<!DOCTYPE html>
<html lang="zh-cn">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <title>《Java编程思想》第19章枚举类型 - 人生最可悲的事情，莫过于胸怀大志，却又虚度光阴。</title>
  <meta name="renderer" content="webkit" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>

<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />

<meta name="theme-color" content="#f8f5ec" />
<meta name="msapplication-navbutton-color" content="#f8f5ec">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="#f8f5ec">


<meta name="author" content="malinkang" /><meta name="description" content="19.1 基本enum特性 调用enum的values()方法，可以遍历enum实例。values()方法返回enum实例的数组，而且该数组中的元素严" /><meta name="keywords" content="Hugo, theme, even" />






<meta name="generator" content="Hugo 0.80.0 with theme even" />


<link rel="canonical" href="https://malinkang.cn/post/thinking-in-java-enumerated-types/" />
<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="manifest" href="/manifest.json">
<link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">



<link href="/sass/main.min.c12ac5d6e912b28ec1fcd71d47773cc8112a03296d4ff03660135b54f0923299.css" rel="stylesheet">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.1.20/dist/jquery.fancybox.min.css" integrity="sha256-7TyXnr2YU040zfSP+rEcz29ggW4j56/ujTPwjMzyqFY=" crossorigin="anonymous">


<meta property="og:title" content="《Java编程思想》第19章枚举类型" />
<meta property="og:description" content="19.1 基本enum特性 调用enum的values()方法，可以遍历enum实例。values()方法返回enum实例的数组，而且该数组中的元素严" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://malinkang.cn/post/thinking-in-java-enumerated-types/" />
<meta property="article:published_time" content="2013-07-16T13:39:36+00:00" />
<meta property="article:modified_time" content="2013-07-16T13:39:36+00:00" />
<meta itemprop="name" content="《Java编程思想》第19章枚举类型">
<meta itemprop="description" content="19.1 基本enum特性 调用enum的values()方法，可以遍历enum实例。values()方法返回enum实例的数组，而且该数组中的元素严">
<meta itemprop="datePublished" content="2013-07-16T13:39:36+00:00" />
<meta itemprop="dateModified" content="2013-07-16T13:39:36+00:00" />
<meta itemprop="wordCount" content="7079">



<meta itemprop="keywords" content="Thinking in Java," />
<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="《Java编程思想》第19章枚举类型"/>
<meta name="twitter:description" content="19.1 基本enum特性 调用enum的values()方法，可以遍历enum实例。values()方法返回enum实例的数组，而且该数组中的元素严"/>

<!--[if lte IE 9]>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/classlist/1.1.20170427/classList.min.js"></script>
<![endif]-->

<!--[if lt IE 9]>
  <script src="https://cdn.jsdelivr.net/npm/html5shiv@3.7.3/dist/html5shiv.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/respond.js@1.4.2/dest/respond.min.js"></script>
<![endif]-->

</head>
<body>
  <div id="mobile-navbar" class="mobile-navbar">
  <div class="mobile-header-logo">
    <a href="/" class="logo">Malinkang&#39;s Blog</a>
  </div>
  <div class="mobile-navbar-icon">
    <span></span>
    <span></span>
    <span></span>
  </div>
</div>
<nav id="mobile-menu" class="mobile-menu slideout-menu">
  <ul class="mobile-menu-list">
    <a href="/">
        <li class="mobile-menu-item">首页</li>
      </a><a href="/post/">
        <li class="mobile-menu-item">归档</li>
      </a><a href="/tags/">
        <li class="mobile-menu-item">标签</li>
      </a>
  </ul>
</nav>
  <div class="container" id="mobile-panel">
    <header id="header" class="header">
        <div class="logo-wrapper">
  <a href="/" class="logo">Malinkang&#39;s Blog</a>
</div>

<nav class="site-navbar">
  <ul id="menu" class="menu">
    <li class="menu-item">
        <a class="menu-item-link" href="/">首页</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/post/">归档</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/tags/">标签</a>
      </li>
  </ul>
</nav>
    </header>

    <main id="main" class="main">
      <div class="content-wrapper">
        <div id="content" class="content">
          <article class="post">
    
    <header class="post-header">
      <h1 class="post-title">《Java编程思想》第19章枚举类型</h1>

      <div class="post-meta">
        <span class="post-time"> 2013-07-16 </span>
        
        
      </div>
    </header>

    <div class="post-toc" id="post-toc">
  <h2 class="post-toc-title">文章目录</h2>
  <div class="post-toc-content always-active">
    <nav id="TableOfContents">
  <ul>
    <li><a href="#191-基本enum特性">19.1 基本enum特性</a>
      <ul>
        <li><a href="#1911-将静态导入用于enum">19.1.1 将静态导入用于enum</a></li>
      </ul>
    </li>
    <li><a href="#192-向enum中添加新方法">19.2 向enum中添加新方法</a>
      <ul>
        <li><a href="#21-覆盖enum的方法">2.1 覆盖enum的方法</a></li>
      </ul>
    </li>
    <li><a href="#3switch语句中的enum">3.Switch语句中的enum</a></li>
    <li><a href="#4values的神秘之处">4.values()的神秘之处</a></li>
    <li><a href="#5实现而非继承">5.实现，而非继承</a></li>
    <li><a href="#6随机选取">6.随机选取</a></li>
    <li><a href="#7使用接口组织枚举">7.使用接口组织枚举</a></li>
    <li><a href="#8使用enumset替代标志">8.使用EnumSet替代标志</a></li>
    <li><a href="#9使用enummap">9.使用EnumMap</a></li>
    <li><a href="#10常量相关的方法">10.常量相关的方法</a>
      <ul>
        <li><a href="#101使用enum的职责链">10.1使用enum的职责链</a></li>
        <li><a href="#102-使用enum的状态机">10.2 使用enum的状态机</a></li>
      </ul>
    </li>
    <li><a href="#11多路分发">11.多路分发</a>
      <ul>
        <li><a href="#111-使用enum分发">11.1 使用enum分发</a></li>
        <li><a href="#112-使用常量相关的方法">11.2 使用常量相关的方法</a></li>
        <li><a href="#114-使用二维数组">11.4 使用二维数组</a></li>
      </ul>
    </li>
  </ul>
</nav>
  </div>
</div>
    <div class="post-content">
      <h2 id="191-基本enum特性">19.1 基本enum特性</h2>
<p>调用<code>enum</code>的<code>values()</code>方法，可以遍历<code>enum</code>实例。<code>values()</code>方法返回<code>enum</code>实例的数组，而且该数组中的元素严格保持其在<code>enum</code>中声明时的顺序。</p>
<p>创建<code>enum</code>时，编译器会为你生成一个相关的类，这个类继承自<code>java.lang.Enum</code>。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="c1">//: enumerated/EnumClass.java
</span><span class="c1">// Capabilities of the Enum class
</span><span class="c1"></span><span class="kn">import static</span> <span class="nn">net.mindview.util.Print.*</span><span class="o">;</span>

<span class="kd">enum</span> <span class="n">Shrubbery</span> <span class="o">{</span> <span class="n">GROUND</span><span class="o">,</span> <span class="n">CRAWLING</span><span class="o">,</span> <span class="n">HANGING</span> <span class="o">}</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">EnumClass</span> <span class="o">{</span>
  <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">for</span><span class="o">(</span><span class="n">Shrubbery</span> <span class="n">s</span> <span class="o">:</span> <span class="n">Shrubbery</span><span class="o">.</span><span class="na">values</span><span class="o">())</span> <span class="o">{</span>
      <span class="n">print</span><span class="o">(</span><span class="n">s</span> <span class="o">+</span> <span class="s">&#34; ordinal: &#34;</span> <span class="o">+</span> <span class="n">s</span><span class="o">.</span><span class="na">ordinal</span><span class="o">());</span>
      <span class="n">printnb</span><span class="o">(</span><span class="n">s</span><span class="o">.</span><span class="na">compareTo</span><span class="o">(</span><span class="n">Shrubbery</span><span class="o">.</span><span class="na">CRAWLING</span><span class="o">)</span> <span class="o">+</span> <span class="s">&#34; &#34;</span><span class="o">);</span>
      <span class="n">printnb</span><span class="o">(</span><span class="n">s</span><span class="o">.</span><span class="na">equals</span><span class="o">(</span><span class="n">Shrubbery</span><span class="o">.</span><span class="na">CRAWLING</span><span class="o">)</span> <span class="o">+</span> <span class="s">&#34; &#34;</span><span class="o">);</span>
      <span class="n">print</span><span class="o">(</span><span class="n">s</span> <span class="o">==</span> <span class="n">Shrubbery</span><span class="o">.</span><span class="na">CRAWLING</span><span class="o">);</span>
      <span class="n">print</span><span class="o">(</span><span class="n">s</span><span class="o">.</span><span class="na">getDeclaringClass</span><span class="o">());</span>
      <span class="n">print</span><span class="o">(</span><span class="n">s</span><span class="o">.</span><span class="na">name</span><span class="o">());</span>
      <span class="n">print</span><span class="o">(</span><span class="s">&#34;----------------------&#34;</span><span class="o">);</span>
    <span class="o">}</span>
    <span class="c1">// Produce an enum value from a string name:
</span><span class="c1"></span>    <span class="k">for</span><span class="o">(</span><span class="n">String</span> <span class="n">s</span> <span class="o">:</span> <span class="s">&#34;HANGING CRAWLING GROUND&#34;</span><span class="o">.</span><span class="na">split</span><span class="o">(</span><span class="s">&#34; &#34;</span><span class="o">))</span> <span class="o">{</span>
      <span class="n">Shrubbery</span> <span class="n">shrub</span> <span class="o">=</span> <span class="n">Enum</span><span class="o">.</span><span class="na">valueOf</span><span class="o">(</span><span class="n">Shrubbery</span><span class="o">.</span><span class="na">class</span><span class="o">,</span> <span class="n">s</span><span class="o">);</span>
      <span class="n">print</span><span class="o">(</span><span class="n">shrub</span><span class="o">);</span>
    <span class="o">}</span>
  <span class="o">}</span>
<span class="o">}</span> <span class="cm">/* Output:
</span><span class="cm">GROUND ordinal: 0
</span><span class="cm">-1 false false
</span><span class="cm">class Shrubbery
</span><span class="cm">GROUND
</span><span class="cm">----------------------
</span><span class="cm">CRAWLING ordinal: 1
</span><span class="cm">0 true true
</span><span class="cm">class Shrubbery
</span><span class="cm">CRAWLING
</span><span class="cm">----------------------
</span><span class="cm">HANGING ordinal: 2
</span><span class="cm">1 false false
</span><span class="cm">class Shrubbery
</span><span class="cm">HANGING
</span><span class="cm">----------------------
</span><span class="cm">HANGING
</span><span class="cm">CRAWLING
</span><span class="cm">GROUND
</span><span class="cm">*/</span><span class="c1">//:~
</span></code></pre></td></tr></table>
</div>
</div><p><code>ordinal()</code>方法返回一个int值，这是每个<code>enum</code>实例在声明时的次序，从0开始。</p>
<p><code>name()</code>方法按返回<code>enum</code>实例声明时的名字，这与使用<code>toString()</code>方法效果相同。</p>
<p><code>valueOf()</code>是在<code>Enum</code>中定义的<code>static</code>方法，它根据给定的名字返回相应的<code>enum</code>实例，如果不存在给定名字的实例，将会抛出异常。</p>
<h3 id="1911-将静态导入用于enum">19.1.1 将静态导入用于enum</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="c1">//: enumerated/Spiciness.java
</span><span class="c1"></span><span class="kn">package</span> <span class="nn">enumerated</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">enum</span> <span class="n">Spiciness</span> <span class="o">{</span>
  <span class="n">NOT</span><span class="o">,</span> <span class="n">MILD</span><span class="o">,</span> <span class="n">MEDIUM</span><span class="o">,</span> <span class="n">HOT</span><span class="o">,</span> <span class="n">FLAMING</span>
<span class="o">}</span> <span class="c1">///:~
</span><span class="c1"></span>
<span class="c1">//: enumerated/Burrito.java
</span><span class="c1"></span><span class="kn">package</span> <span class="nn">enumerated</span><span class="o">;</span>
<span class="kn">import static</span> <span class="nn">enumerated.Spiciness.*</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Burrito</span> <span class="o">{</span>
  <span class="n">Spiciness</span> <span class="n">degree</span><span class="o">;</span>
  <span class="kd">public</span> <span class="nf">Burrito</span><span class="o">(</span><span class="n">Spiciness</span> <span class="n">degree</span><span class="o">)</span> <span class="o">{</span> <span class="k">this</span><span class="o">.</span><span class="na">degree</span> <span class="o">=</span> <span class="n">degree</span><span class="o">;}</span>
  <span class="kd">public</span> <span class="n">String</span> <span class="nf">toString</span><span class="o">()</span> <span class="o">{</span> <span class="k">return</span> <span class="s">&#34;Burrito is &#34;</span><span class="o">+</span> <span class="n">degree</span><span class="o">;}</span>
  <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="k">new</span> <span class="n">Burrito</span><span class="o">(</span><span class="n">NOT</span><span class="o">));</span>
    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="k">new</span> <span class="n">Burrito</span><span class="o">(</span><span class="n">MEDIUM</span><span class="o">));</span>
    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="k">new</span> <span class="n">Burrito</span><span class="o">(</span><span class="n">HOT</span><span class="o">));</span>
  <span class="o">}</span>
<span class="o">}</span> <span class="cm">/* Output:
</span><span class="cm">Burrito is NOT
</span><span class="cm">Burrito is MEDIUM
</span><span class="cm">Burrito is HOT
</span><span class="cm">*/</span><span class="c1">//:~
</span></code></pre></td></tr></table>
</div>
</div><h2 id="192-向enum中添加新方法">19.2 向enum中添加新方法</h2>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="c1">//: enumerated/OzWitch.java
</span><span class="c1">// The witches in the land of Oz.
</span><span class="c1"></span><span class="kn">import static</span> <span class="nn">net.mindview.util.Print.*</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">enum</span> <span class="n">OzWitch</span> <span class="o">{</span>
  <span class="c1">// Instances must be defined first, before methods:
</span><span class="c1"></span>  <span class="n">WEST</span><span class="o">(</span><span class="s">&#34;Miss Gulch, aka the Wicked Witch of the West&#34;</span><span class="o">),</span>
  <span class="n">NORTH</span><span class="o">(</span><span class="s">&#34;Glinda, the Good Witch of the North&#34;</span><span class="o">),</span>
  <span class="n">EAST</span><span class="o">(</span><span class="s">&#34;Wicked Witch of the East, wearer of the Ruby &#34;</span> <span class="o">+</span>
    <span class="s">&#34;Slippers, crushed by Dorothy&#39;s house&#34;</span><span class="o">),</span>
  <span class="n">SOUTH</span><span class="o">(</span><span class="s">&#34;Good by inference, but missing&#34;</span><span class="o">);</span>
  <span class="kd">private</span> <span class="n">String</span> <span class="n">description</span><span class="o">;</span>
  <span class="c1">// Constructor must be package or private access:
</span><span class="c1"></span>  <span class="kd">private</span> <span class="nf">OzWitch</span><span class="o">(</span><span class="n">String</span> <span class="n">description</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">this</span><span class="o">.</span><span class="na">description</span> <span class="o">=</span> <span class="n">description</span><span class="o">;</span>
  <span class="o">}</span>
  <span class="kd">public</span> <span class="n">String</span> <span class="nf">getDescription</span><span class="o">()</span> <span class="o">{</span> <span class="k">return</span> <span class="n">description</span><span class="o">;</span> <span class="o">}</span>
  <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">for</span><span class="o">(</span><span class="n">OzWitch</span> <span class="n">witch</span> <span class="o">:</span> <span class="n">OzWitch</span><span class="o">.</span><span class="na">values</span><span class="o">())</span>
      <span class="n">print</span><span class="o">(</span><span class="n">witch</span> <span class="o">+</span> <span class="s">&#34;: &#34;</span> <span class="o">+</span> <span class="n">witch</span><span class="o">.</span><span class="na">getDescription</span><span class="o">());</span>
  <span class="o">}</span>
<span class="o">}</span> <span class="cm">/* Output:
</span><span class="cm">WEST: Miss Gulch, aka the Wicked Witch of the West
</span><span class="cm">NORTH: Glinda, the Good Witch of the North
</span><span class="cm">EAST: Wicked Witch of the East, wearer of the Ruby Slippers, crushed by Dorothy&#39;s house
</span><span class="cm">SOUTH: Good by inference, but missing
</span><span class="cm">*/</span><span class="c1">//:~
</span></code></pre></td></tr></table>
</div>
</div><p>如果你打算定义自己的方法，那么必须在<code>emum</code>实例序列的最后添加一个分号。同时，<code>Java</code>要求你必须先定义<code>enum</code>实例。如果在定义<code>enum</code>实例之前定义了任何方法或属性，那么在编译时就会得到错误信息。</p>
<h3 id="21-覆盖enum的方法">2.1 覆盖enum的方法</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="c1">//: enumerated/SpaceShip.java
</span><span class="c1"></span><span class="kd">public</span> <span class="kd">enum</span> <span class="n">SpaceShip</span> <span class="o">{</span>
  <span class="n">SCOUT</span><span class="o">,</span> <span class="n">CARGO</span><span class="o">,</span> <span class="n">TRANSPORT</span><span class="o">,</span> <span class="n">CRUISER</span><span class="o">,</span> <span class="n">BATTLESHIP</span><span class="o">,</span> <span class="n">MOTHERSHIP</span><span class="o">;</span>
  <span class="kd">public</span> <span class="n">String</span> <span class="nf">toString</span><span class="o">()</span> <span class="o">{</span>
    <span class="n">String</span> <span class="n">id</span> <span class="o">=</span> <span class="n">name</span><span class="o">();</span>
    <span class="n">String</span> <span class="n">lower</span> <span class="o">=</span> <span class="n">id</span><span class="o">.</span><span class="na">substring</span><span class="o">(</span><span class="n">1</span><span class="o">).</span><span class="na">toLowerCase</span><span class="o">();</span>
    <span class="k">return</span> <span class="n">id</span><span class="o">.</span><span class="na">charAt</span><span class="o">(</span><span class="n">0</span><span class="o">)</span> <span class="o">+</span> <span class="n">lower</span><span class="o">;</span>
  <span class="o">}</span>
  <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">for</span><span class="o">(</span><span class="n">SpaceShip</span> <span class="n">s</span> <span class="o">:</span> <span class="n">values</span><span class="o">())</span> <span class="o">{</span>
      <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">s</span><span class="o">);</span>
    <span class="o">}</span>
  <span class="o">}</span>
<span class="o">}</span> <span class="cm">/* Output:
</span><span class="cm">Scout
</span><span class="cm">Cargo
</span><span class="cm">Transport
</span><span class="cm">Cruiser
</span><span class="cm">Battleship
</span><span class="cm">Mothership
</span><span class="cm">*/</span><span class="c1">//:~
</span></code></pre></td></tr></table>
</div>
</div><h2 id="3switch语句中的enum">3.Switch语句中的enum</h2>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="c1">//: enumerated/TrafficLight.java
</span><span class="c1">// Enums in switch statements.
</span><span class="c1"></span><span class="kn">import static</span> <span class="nn">net.mindview.util.Print.*</span><span class="o">;</span>

<span class="c1">// Define an enum type:
</span><span class="c1"></span><span class="kd">enum</span> <span class="n">Signal</span> <span class="o">{</span> <span class="n">GREEN</span><span class="o">,</span> <span class="n">YELLOW</span><span class="o">,</span> <span class="n">RED</span><span class="o">,</span> <span class="o">}</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">TrafficLight</span> <span class="o">{</span>
  <span class="n">Signal</span> <span class="n">color</span> <span class="o">=</span> <span class="n">Signal</span><span class="o">.</span><span class="na">RED</span><span class="o">;</span>
  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">change</span><span class="o">()</span> <span class="o">{</span>
    <span class="k">switch</span><span class="o">(</span><span class="n">color</span><span class="o">)</span> <span class="o">{</span>
      <span class="c1">// Note that you don&#39;t have to say Signal.RED
</span><span class="c1"></span>      <span class="c1">// in the case statement:
</span><span class="c1"></span>      <span class="k">case</span> <span class="n">RED</span><span class="o">:</span>    <span class="n">color</span> <span class="o">=</span> <span class="n">Signal</span><span class="o">.</span><span class="na">GREEN</span><span class="o">;</span>
                   <span class="k">break</span><span class="o">;</span>
      <span class="k">case</span> <span class="n">GREEN</span><span class="o">:</span>  <span class="n">color</span> <span class="o">=</span> <span class="n">Signal</span><span class="o">.</span><span class="na">YELLOW</span><span class="o">;</span>
                   <span class="k">break</span><span class="o">;</span>
      <span class="k">case</span> <span class="n">YELLOW</span><span class="o">:</span> <span class="n">color</span> <span class="o">=</span> <span class="n">Signal</span><span class="o">.</span><span class="na">RED</span><span class="o">;</span>
                   <span class="k">break</span><span class="o">;</span>
    <span class="o">}</span>
  <span class="o">}</span>
  <span class="kd">public</span> <span class="n">String</span> <span class="nf">toString</span><span class="o">()</span> <span class="o">{</span>
    <span class="k">return</span> <span class="s">&#34;The traffic light is &#34;</span> <span class="o">+</span> <span class="n">color</span><span class="o">;</span>
  <span class="o">}</span>
  <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">TrafficLight</span> <span class="n">t</span> <span class="o">=</span> <span class="k">new</span> <span class="n">TrafficLight</span><span class="o">();</span>
    <span class="k">for</span><span class="o">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="n">0</span><span class="o">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">7</span><span class="o">;</span> <span class="n">i</span><span class="o">++)</span> <span class="o">{</span>
      <span class="n">print</span><span class="o">(</span><span class="n">t</span><span class="o">);</span>
      <span class="n">t</span><span class="o">.</span><span class="na">change</span><span class="o">();</span>
    <span class="o">}</span>
  <span class="o">}</span>
<span class="o">}</span> <span class="cm">/* Output:
</span><span class="cm">The traffic light is RED
</span><span class="cm">The traffic light is GREEN
</span><span class="cm">The traffic light is YELLOW
</span><span class="cm">The traffic light is RED
</span><span class="cm">The traffic light is GREEN
</span><span class="cm">The traffic light is YELLOW
</span><span class="cm">The traffic light is RED
</span><span class="cm">*/</span><span class="c1">//:~
</span></code></pre></td></tr></table>
</div>
</div><h2 id="4values的神秘之处">4.values()的神秘之处</h2>
<p>编译器为你创建的<code>enum</code>类都继承自<code>Enum</code>类。然而，如果你研究一下<code>Enum</code>类就会发现，它并没有<code>values()</code>方法。我们可以利用反射机制编写一个简单的程序，来查看其中的究竟。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span><span class="lnt">53
</span><span class="lnt">54
</span><span class="lnt">55
</span><span class="lnt">56
</span><span class="lnt">57
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="c1">//: enumerated/Reflection.java
</span><span class="c1">// Analyzing enums using reflection.
</span><span class="c1"></span><span class="kn">import</span> <span class="nn">java.lang.reflect.*</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.*</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">net.mindview.util.*</span><span class="o">;</span>
<span class="kn">import static</span> <span class="nn">net.mindview.util.Print.*</span><span class="o">;</span>

<span class="kd">enum</span> <span class="n">Explore</span> <span class="o">{</span> <span class="n">HERE</span><span class="o">,</span> <span class="n">THERE</span> <span class="o">}</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Reflection</span> <span class="o">{</span>
  <span class="kd">public</span> <span class="kd">static</span> <span class="n">Set</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="nf">analyze</span><span class="o">(</span><span class="n">Class</span><span class="o">&lt;?&gt;</span> <span class="n">enumClass</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">print</span><span class="o">(</span><span class="s">&#34;----- Analyzing &#34;</span> <span class="o">+</span> <span class="n">enumClass</span> <span class="o">+</span> <span class="s">&#34; -----&#34;</span><span class="o">);</span>
    <span class="n">print</span><span class="o">(</span><span class="s">&#34;Interfaces:&#34;</span><span class="o">);</span>
    <span class="k">for</span><span class="o">(</span><span class="n">Type</span> <span class="n">t</span> <span class="o">:</span> <span class="n">enumClass</span><span class="o">.</span><span class="na">getGenericInterfaces</span><span class="o">())</span>
      <span class="n">print</span><span class="o">(</span><span class="n">t</span><span class="o">);</span>
    <span class="n">print</span><span class="o">(</span><span class="s">&#34;Base: &#34;</span> <span class="o">+</span> <span class="n">enumClass</span><span class="o">.</span><span class="na">getSuperclass</span><span class="o">());</span>
    <span class="n">print</span><span class="o">(</span><span class="s">&#34;Methods: &#34;</span><span class="o">);</span>
    <span class="n">Set</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">methods</span> <span class="o">=</span> <span class="k">new</span> <span class="n">TreeSet</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;();</span>
    <span class="k">for</span><span class="o">(</span><span class="n">Method</span> <span class="n">m</span> <span class="o">:</span> <span class="n">enumClass</span><span class="o">.</span><span class="na">getMethods</span><span class="o">())</span>
      <span class="n">methods</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">m</span><span class="o">.</span><span class="na">getName</span><span class="o">());</span>
    <span class="n">print</span><span class="o">(</span><span class="n">methods</span><span class="o">);</span>
    <span class="k">return</span> <span class="n">methods</span><span class="o">;</span>
  <span class="o">}</span>
  <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">Set</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">exploreMethods</span> <span class="o">=</span> <span class="n">analyze</span><span class="o">(</span><span class="n">Explore</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
    <span class="n">Set</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">enumMethods</span> <span class="o">=</span> <span class="n">analyze</span><span class="o">(</span><span class="n">Enum</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
    <span class="n">print</span><span class="o">(</span><span class="s">&#34;Explore.containsAll(Enum)? &#34;</span> <span class="o">+</span> <span class="n">exploreMethods</span><span class="o">.</span><span class="na">containsAll</span><span class="o">(</span><span class="n">enumMethods</span><span class="o">));</span>
    <span class="n">printnb</span><span class="o">(</span><span class="s">&#34;Explore.removeAll(Enum): &#34;</span><span class="o">);</span>
    <span class="n">exploreMethods</span><span class="o">.</span><span class="na">removeAll</span><span class="o">(</span><span class="n">enumMethods</span><span class="o">);</span>
    <span class="n">print</span><span class="o">(</span><span class="n">exploreMethods</span><span class="o">);</span>
    <span class="c1">// Decompile the code for the enum:
</span><span class="c1"></span>    <span class="n">OSExecute</span><span class="o">.</span><span class="na">command</span><span class="o">(</span><span class="s">&#34;javap Explore&#34;</span><span class="o">);</span>
  <span class="o">}</span>
<span class="o">}</span> <span class="cm">/* Output:
</span><span class="cm">----- Analyzing class Explore -----
</span><span class="cm">Interfaces:
</span><span class="cm">Base: class java.lang.Enum
</span><span class="cm">Methods:
</span><span class="cm">[compareTo, equals, getClass, getDeclaringClass, hashCode, name, notify, notifyAll, ordinal, toString, valueOf, values, wait]
</span><span class="cm">----- Analyzing class java.lang.Enum -----
</span><span class="cm">Interfaces:
</span><span class="cm">java.lang.Comparable&lt;E&gt;
</span><span class="cm">interface java.io.Serializable
</span><span class="cm">Base: class java.lang.Object
</span><span class="cm">Methods:
</span><span class="cm">[compareTo, equals, getClass, getDeclaringClass, hashCode, name, notify, notifyAll, ordinal, toString, valueOf, wait]
</span><span class="cm">Explore.containsAll(Enum)? true
</span><span class="cm">Explore.removeAll(Enum): [values]
</span><span class="cm">Compiled from &#34;Reflection.java&#34;
</span><span class="cm">final class Explore extends java.lang.Enum{
</span><span class="cm">    public static final Explore HERE;
</span><span class="cm">    public static final Explore THERE;
</span><span class="cm">    public static final Explore[] values();
</span><span class="cm">    public static Explore valueOf(java.lang.String);
</span><span class="cm">    static {};
</span><span class="cm">}
</span><span class="cm">*/</span><span class="c1">//:~
</span></code></pre></td></tr></table>
</div>
</div><p><code>values()</code>由编译器添加的<code>static</code>方法。可以看出，在创建<code>Explore</code>的过程中，编译器还为其添加了<code>valueOf()</code>方法。这可能有点令人迷惑，<code>Enum</code>类不会已经有<code>valueOf()</code>方法了吗。不过<code>Enum</code>中的<code>valueOf()</code>方法需要两个参数，而这个新增的方法只需一个参数。由于这里使用的<code>Set</code>只存储方法的名字，而不考虑方法的签名，所以在调用<code>Explore.removeAll(Enum)</code>之后，就只剩下<code>[values]</code>了。</p>
<p>由于<code>values()</code>方法是由编译器插入到<code>enum</code>定义中的<code>static</code>方法，所以，如果你将<code>enum</code>实例向上转型为<code>Enum</code>，那么<code>values()</code>方法就不可访问了。不过，在<code>Class</code>中有一个<code>getEnumConstants()</code>方法，所以即便<code>Enum</code>接口中没有<code>values()</code>方法，我们仍然可以通过<code>Class</code>对象取得所有<code>enum</code>实例：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="c1">//: enumerated/UpcastEnum.java
</span><span class="c1">// No values() method if you upcast an enum
</span><span class="c1"></span>
<span class="kd">enum</span> <span class="n">Search</span> <span class="o">{</span> <span class="n">HITHER</span><span class="o">,</span> <span class="n">YON</span> <span class="o">}</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">UpcastEnum</span> <span class="o">{</span>
  <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">Search</span><span class="o">[]</span> <span class="n">vals</span> <span class="o">=</span> <span class="n">Search</span><span class="o">.</span><span class="na">values</span><span class="o">();</span>
    <span class="n">Enum</span> <span class="n">e</span> <span class="o">=</span> <span class="n">Search</span><span class="o">.</span><span class="na">HITHER</span><span class="o">;</span> <span class="c1">// Upcast
</span><span class="c1"></span>    <span class="c1">// e.values(); // No values() in Enum
</span><span class="c1"></span>    <span class="k">for</span><span class="o">(</span><span class="n">Enum</span> <span class="n">en</span> <span class="o">:</span> <span class="n">e</span><span class="o">.</span><span class="na">getClass</span><span class="o">().</span><span class="na">getEnumConstants</span><span class="o">())</span>
      <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">en</span><span class="o">);</span>
  <span class="o">}</span>
<span class="o">}</span> <span class="cm">/* Output:
</span><span class="cm">HITHER
</span><span class="cm">YON
</span><span class="cm">*/</span><span class="c1">//:~
</span></code></pre></td></tr></table>
</div>
</div><p>因为<code>getEnumConstants()</code>是<code>Class</code>上的方法，所以你甚至可以对不是枚举的类调用此方法：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="c1">//: enumerated/NonEnum.java
</span><span class="c1"></span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">NonEnum</span> <span class="o">{</span>
  <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">Class</span><span class="o">&lt;</span><span class="n">Integer</span><span class="o">&gt;</span> <span class="n">intClass</span> <span class="o">=</span> <span class="n">Integer</span><span class="o">.</span><span class="na">class</span><span class="o">;</span>
    <span class="k">try</span> <span class="o">{</span>
      <span class="k">for</span><span class="o">(</span><span class="n">Object</span> <span class="n">en</span> <span class="o">:</span> <span class="n">intClass</span><span class="o">.</span><span class="na">getEnumConstants</span><span class="o">())</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">en</span><span class="o">);</span>
    <span class="o">}</span> <span class="k">catch</span><span class="o">(</span><span class="n">Exception</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
      <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">e</span><span class="o">);</span>
    <span class="o">}</span>
  <span class="o">}</span>
<span class="o">}</span> <span class="cm">/* Output:
</span><span class="cm">java.lang.NullPointerException
</span><span class="cm">*/</span><span class="c1">//:~
</span></code></pre></td></tr></table>
</div>
</div><p>只不过，此时该方法返回<code>null</code>，所以当你试图使用其返回的结果时会发生异常。</p>
<h2 id="5实现而非继承">5.实现，而非继承</h2>
<p>所有的<code>enum</code>都继承自<code>java.lang.Enum</code>类。由于<code>Java</code>不支持多重继承，所以你的<code>enum</code>不能再继承其他类。然而，在我们创建一个新的<code>enum</code>时，可以同时实现一个或多个接口：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="c1">//: enumerated/cartoons/EnumImplementation.java
</span><span class="c1">// An enum can implement an interface
</span><span class="c1"></span><span class="kn">package</span> <span class="nn">enumerated.cartoons</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.*</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">net.mindview.util.*</span><span class="o">;</span>

<span class="kd">enum</span> <span class="n">CartoonCharacter</span> <span class="kd">implements</span> <span class="n">Generator</span><span class="o">&lt;</span><span class="n">CartoonCharacter</span><span class="o">&gt;</span> <span class="o">{</span>
  <span class="n">SLAPPY</span><span class="o">,</span> <span class="n">SPANKY</span><span class="o">,</span> <span class="n">PUNCHY</span><span class="o">,</span> <span class="n">SILLY</span><span class="o">,</span> <span class="n">BOUNCY</span><span class="o">,</span> <span class="n">NUTTY</span><span class="o">,</span> <span class="n">BOB</span><span class="o">;</span>
  <span class="kd">private</span> <span class="n">Random</span> <span class="n">rand</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Random</span><span class="o">(</span><span class="n">47</span><span class="o">);</span>
  <span class="kd">public</span> <span class="n">CartoonCharacter</span> <span class="nf">next</span><span class="o">()</span> <span class="o">{</span>
    <span class="k">return</span> <span class="n">values</span><span class="o">()[</span><span class="n">rand</span><span class="o">.</span><span class="na">nextInt</span><span class="o">(</span><span class="n">values</span><span class="o">().</span><span class="na">length</span><span class="o">)];</span>
  <span class="o">}</span>
<span class="o">}</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">EnumImplementation</span> <span class="o">{</span>
  <span class="kd">public</span> <span class="kd">static</span> <span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span> <span class="kt">void</span> <span class="nf">printNext</span><span class="o">(</span><span class="n">Generator</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span> <span class="n">rg</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">print</span><span class="o">(</span><span class="n">rg</span><span class="o">.</span><span class="na">next</span><span class="o">()</span> <span class="o">+</span> <span class="s">&#34;, &#34;</span><span class="o">);</span>
  <span class="o">}</span>
  <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
    <span class="c1">// Choose any instance:
</span><span class="c1"></span>    <span class="n">CartoonCharacter</span> <span class="n">cc</span> <span class="o">=</span> <span class="n">CartoonCharacter</span><span class="o">.</span><span class="na">BOB</span><span class="o">;</span>
    <span class="k">for</span><span class="o">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="n">0</span><span class="o">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">10</span><span class="o">;</span> <span class="n">i</span><span class="o">++)</span>
      <span class="n">printNext</span><span class="o">(</span><span class="n">cc</span><span class="o">);</span>
  <span class="o">}</span>
<span class="o">}</span> <span class="cm">/* Output:
</span><span class="cm">BOB, PUNCHY, BOB, SPANKY, NUTTY, PUNCHY, SLAPPY, NUTTY, NUTTY, SLAPPY,
</span><span class="cm">*/</span><span class="c1">//:~
</span></code></pre></td></tr></table>
</div>
</div><h2 id="6随机选取">6.随机选取</h2>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="c1">//: net/mindview/util/Enums.java
</span><span class="c1"></span><span class="kn">package</span> <span class="nn">net.mindview.util</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.*</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Enums</span> <span class="o">{</span>
  <span class="kd">private</span> <span class="kd">static</span> <span class="n">Random</span> <span class="n">rand</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Random</span><span class="o">(</span><span class="n">47</span><span class="o">);</span>
  <span class="kd">public</span> <span class="kd">static</span> <span class="o">&lt;</span><span class="n">T</span> <span class="kd">extends</span> <span class="n">Enum</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;&gt;</span> <span class="n">T</span> <span class="nf">random</span><span class="o">(</span><span class="n">Class</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span> <span class="n">ec</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">return</span> <span class="n">random</span><span class="o">(</span><span class="n">ec</span><span class="o">.</span><span class="na">getEnumConstants</span><span class="o">());</span>
  <span class="o">}</span>
  <span class="kd">public</span> <span class="kd">static</span> <span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span> <span class="n">T</span> <span class="nf">random</span><span class="o">(</span><span class="n">T</span><span class="o">[]</span> <span class="n">values</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">return</span> <span class="n">values</span><span class="o">[</span><span class="n">rand</span><span class="o">.</span><span class="na">nextInt</span><span class="o">(</span><span class="n">values</span><span class="o">.</span><span class="na">length</span><span class="o">)];</span>
  <span class="o">}</span>
<span class="o">}</span> <span class="c1">///:~
</span></code></pre></td></tr></table>
</div>
</div><p>下面是<code>random()</code>方法的一个简单示例：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="c1">//: enumerated/RandomTest.java
</span><span class="c1"></span><span class="kn">import</span> <span class="nn">net.mindview.util.*</span><span class="o">;</span>

<span class="kd">enum</span> <span class="n">Activity</span> <span class="o">{</span> <span class="n">SITTING</span><span class="o">,</span> <span class="n">LYING</span><span class="o">,</span> <span class="n">STANDING</span><span class="o">,</span> <span class="n">HOPPING</span><span class="o">,</span>
  <span class="n">RUNNING</span><span class="o">,</span> <span class="n">DODGING</span><span class="o">,</span> <span class="n">JUMPING</span><span class="o">,</span> <span class="n">FALLING</span><span class="o">,</span> <span class="n">FLYING</span> <span class="o">}</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">RandomTest</span> <span class="o">{</span>
  <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">for</span><span class="o">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="n">0</span><span class="o">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">20</span><span class="o">;</span> <span class="n">i</span><span class="o">++)</span>
      <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">print</span><span class="o">(</span><span class="n">Enums</span><span class="o">.</span><span class="na">random</span><span class="o">(</span><span class="n">Activity</span><span class="o">.</span><span class="na">class</span><span class="o">)</span> <span class="o">+</span> <span class="s">&#34; &#34;</span><span class="o">);</span>
  <span class="o">}</span>
<span class="o">}</span> <span class="cm">/* Output:
</span><span class="cm">STANDING FLYING RUNNING STANDING RUNNING STANDING LYING DODGING SITTING RUNNING HOPPING HOPPING HOPPING RUNNING STANDING LYING FALLING RUNNING FLYING LYING
</span><span class="cm">*/</span><span class="c1">//:~
</span></code></pre></td></tr></table>
</div>
</div><h2 id="7使用接口组织枚举">7.使用接口组织枚举</h2>
<p>假设你想用<code>enum</code>来表示不同类型的食物，同时还希望每个<code>enum</code>元素仍然保持<code>Food</code>类型。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="c1">//: enumerated/menu/Food.java
</span><span class="c1">// Subcategorization of enums within interfaces.
</span><span class="c1"></span><span class="kn">package</span> <span class="nn">enumerated.menu</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">interface</span> <span class="nc">Food</span> <span class="o">{</span>
  <span class="kd">enum</span> <span class="n">Appetizer</span> <span class="kd">implements</span> <span class="n">Food</span> <span class="o">{</span>
    <span class="n">SALAD</span><span class="o">,</span> <span class="n">SOUP</span><span class="o">,</span> <span class="n">SPRING_ROLLS</span><span class="o">;</span>
  <span class="o">}</span>
  <span class="kd">enum</span> <span class="n">MainCourse</span> <span class="kd">implements</span> <span class="n">Food</span> <span class="o">{</span>
    <span class="n">LASAGNE</span><span class="o">,</span> <span class="n">BURRITO</span><span class="o">,</span> <span class="n">PAD_THAI</span><span class="o">,</span>
    <span class="n">LENTILS</span><span class="o">,</span> <span class="n">HUMMOUS</span><span class="o">,</span> <span class="n">VINDALOO</span><span class="o">;</span>
  <span class="o">}</span>
  <span class="kd">enum</span> <span class="n">Dessert</span> <span class="kd">implements</span> <span class="n">Food</span> <span class="o">{</span>
    <span class="n">TIRAMISU</span><span class="o">,</span> <span class="n">GELATO</span><span class="o">,</span> <span class="n">BLACK_FOREST_CAKE</span><span class="o">,</span>
    <span class="n">FRUIT</span><span class="o">,</span> <span class="n">CREME_CARAMEL</span><span class="o">;</span>
  <span class="o">}</span>
  <span class="kd">enum</span> <span class="n">Coffee</span> <span class="kd">implements</span> <span class="n">Food</span> <span class="o">{</span>
    <span class="n">BLACK_COFFEE</span><span class="o">,</span> <span class="n">DECAF_COFFEE</span><span class="o">,</span> <span class="n">ESPRESSO</span><span class="o">,</span>
    <span class="n">LATTE</span><span class="o">,</span> <span class="n">CAPPUCCINO</span><span class="o">,</span> <span class="n">TEA</span><span class="o">,</span> <span class="n">HERB_TEA</span><span class="o">;</span>
  <span class="o">}</span>
<span class="o">}</span> <span class="c1">///:~
</span></code></pre></td></tr></table>
</div>
</div><p>对于<code>enum</code>而言，实现接口是使其自泪花的唯一办法，所以嵌入在<code>Food</code>中的每个<code>enum</code>都实现了<code>Food</code>接口。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="c1">//: enumerated/menu/TypeOfFood.java
</span><span class="c1"></span><span class="kn">package</span> <span class="nn">enumerated.menu</span><span class="o">;</span>
<span class="kn">import static</span> <span class="nn">enumerated.menu.Food.*</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">TypeOfFood</span> <span class="o">{</span>
  <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">Food</span> <span class="n">food</span> <span class="o">=</span> <span class="n">Appetizer</span><span class="o">.</span><span class="na">SALAD</span><span class="o">;</span>
    <span class="n">food</span> <span class="o">=</span> <span class="n">MainCourse</span><span class="o">.</span><span class="na">LASAGNE</span><span class="o">;</span>
    <span class="n">food</span> <span class="o">=</span> <span class="n">Dessert</span><span class="o">.</span><span class="na">GELATO</span><span class="o">;</span>
    <span class="n">food</span> <span class="o">=</span> <span class="n">Coffee</span><span class="o">.</span><span class="na">CAPPUCCINO</span><span class="o">;</span>
  <span class="o">}</span>
<span class="o">}</span> <span class="c1">///:~
</span></code></pre></td></tr></table>
</div>
</div><p>如果你想创建一个“枚举的枚举”，那么可以创建一个新的<code>enum</code>，然后用其实例包装<code>Food</code>中的每一个<code>enum</code>类：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="c1">//: enumerated/menu/Course.java
</span><span class="c1"></span><span class="kn">package</span> <span class="nn">enumerated.menu</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">net.mindview.util.*</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">enum</span> <span class="n">Course</span> <span class="o">{</span>
  <span class="n">APPETIZER</span><span class="o">(</span><span class="n">Food</span><span class="o">.</span><span class="na">Appetizer</span><span class="o">.</span><span class="na">class</span><span class="o">),</span>
  <span class="n">MAINCOURSE</span><span class="o">(</span><span class="n">Food</span><span class="o">.</span><span class="na">MainCourse</span><span class="o">.</span><span class="na">class</span><span class="o">),</span>
  <span class="n">DESSERT</span><span class="o">(</span><span class="n">Food</span><span class="o">.</span><span class="na">Dessert</span><span class="o">.</span><span class="na">class</span><span class="o">),</span>
  <span class="n">COFFEE</span><span class="o">(</span><span class="n">Food</span><span class="o">.</span><span class="na">Coffee</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
  <span class="kd">private</span> <span class="n">Food</span><span class="o">[]</span> <span class="n">values</span><span class="o">;</span>
  <span class="kd">private</span> <span class="nf">Course</span><span class="o">(</span><span class="n">Class</span><span class="o">&lt;?</span> <span class="kd">extends</span> <span class="n">Food</span><span class="o">&gt;</span> <span class="n">kind</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">values</span> <span class="o">=</span> <span class="n">kind</span><span class="o">.</span><span class="na">getEnumConstants</span><span class="o">();</span>
  <span class="o">}</span>
  <span class="kd">public</span> <span class="n">Food</span> <span class="nf">randomSelection</span><span class="o">()</span> <span class="o">{</span>
    <span class="k">return</span> <span class="n">Enums</span><span class="o">.</span><span class="na">random</span><span class="o">(</span><span class="n">values</span><span class="o">);</span>
  <span class="o">}</span>
<span class="o">}</span> <span class="c1">///:~
</span></code></pre></td></tr></table>
</div>
</div><p>通过每一个<code>Course</code>实例中随机地选择一个<code>Food</code>，我们便能够生成一份菜单：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="c1">//: enumerated/menu/Meal.java
</span><span class="c1"></span><span class="kn">package</span> <span class="nn">enumerated.menu</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Meal</span> <span class="o">{</span>
  <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">for</span><span class="o">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="n">0</span><span class="o">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">5</span><span class="o">;</span> <span class="n">i</span><span class="o">++)</span> <span class="o">{</span>
      <span class="k">for</span><span class="o">(</span><span class="n">Course</span> <span class="n">course</span> <span class="o">:</span> <span class="n">Course</span><span class="o">.</span><span class="na">values</span><span class="o">())</span> <span class="o">{</span>
        <span class="n">Food</span> <span class="n">food</span> <span class="o">=</span> <span class="n">course</span><span class="o">.</span><span class="na">randomSelection</span><span class="o">();</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">food</span><span class="o">);</span>
      <span class="o">}</span>
      <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;---&#34;</span><span class="o">);</span>
    <span class="o">}</span>
  <span class="o">}</span>
<span class="o">}</span> <span class="cm">/* Output:
</span><span class="cm">SPRING_ROLLS
</span><span class="cm">VINDALOO
</span><span class="cm">FRUIT
</span><span class="cm">DECAF_COFFEE
</span><span class="cm">---
</span><span class="cm">SOUP
</span><span class="cm">VINDALOO
</span><span class="cm">FRUIT
</span><span class="cm">TEA
</span><span class="cm">---
</span><span class="cm">SALAD
</span><span class="cm">BURRITO
</span><span class="cm">FRUIT
</span><span class="cm">TEA
</span><span class="cm">---
</span><span class="cm">SALAD
</span><span class="cm">BURRITO
</span><span class="cm">CREME_CARAMEL
</span><span class="cm">LATTE
</span><span class="cm">---
</span><span class="cm">SOUP
</span><span class="cm">BURRITO
</span><span class="cm">TIRAMISU
</span><span class="cm">ESPRESSO
</span><span class="cm">---
</span><span class="cm">*/</span><span class="c1">//:~
</span></code></pre></td></tr></table>
</div>
</div><p>还有一种更简洁的管理枚举的办法，就是将一个<code>enum</code>嵌套在另一个<code>enum</code>内。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="c1">//: enumerated/SecurityCategory.java
</span><span class="c1">// More succinct subcategorization of enums.
</span><span class="c1"></span><span class="kn">import</span> <span class="nn">net.mindview.util.*</span><span class="o">;</span>

<span class="kd">enum</span> <span class="n">SecurityCategory</span> <span class="o">{</span>
  <span class="n">STOCK</span><span class="o">(</span><span class="n">Security</span><span class="o">.</span><span class="na">Stock</span><span class="o">.</span><span class="na">class</span><span class="o">),</span> <span class="n">BOND</span><span class="o">(</span><span class="n">Security</span><span class="o">.</span><span class="na">Bond</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
  <span class="n">Security</span><span class="o">[]</span> <span class="n">values</span><span class="o">;</span>
  <span class="n">SecurityCategory</span><span class="o">(</span><span class="n">Class</span><span class="o">&lt;?</span> <span class="kd">extends</span> <span class="n">Security</span><span class="o">&gt;</span> <span class="n">kind</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">values</span> <span class="o">=</span> <span class="n">kind</span><span class="o">.</span><span class="na">getEnumConstants</span><span class="o">();</span>
  <span class="o">}</span>
  <span class="kd">interface</span> <span class="nc">Security</span> <span class="o">{</span>
    <span class="kd">enum</span> <span class="n">Stock</span> <span class="kd">implements</span> <span class="n">Security</span> <span class="o">{</span> <span class="n">SHORT</span><span class="o">,</span> <span class="n">LONG</span><span class="o">,</span> <span class="n">MARGIN</span> <span class="o">}</span>
    <span class="kd">enum</span> <span class="n">Bond</span> <span class="kd">implements</span> <span class="n">Security</span> <span class="o">{</span> <span class="n">MUNICIPAL</span><span class="o">,</span> <span class="n">JUNK</span> <span class="o">}</span>
  <span class="o">}</span>
  <span class="kd">public</span> <span class="n">Security</span> <span class="nf">randomSelection</span><span class="o">()</span> <span class="o">{</span>
    <span class="k">return</span> <span class="n">Enums</span><span class="o">.</span><span class="na">random</span><span class="o">(</span><span class="n">values</span><span class="o">);</span>
  <span class="o">}</span>
  <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">for</span><span class="o">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="n">0</span><span class="o">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">10</span><span class="o">;</span> <span class="n">i</span><span class="o">++)</span> <span class="o">{</span>
      <span class="n">SecurityCategory</span> <span class="n">category</span> <span class="o">=</span>
        <span class="n">Enums</span><span class="o">.</span><span class="na">random</span><span class="o">(</span><span class="n">SecurityCategory</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
      <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">category</span> <span class="o">+</span> <span class="s">&#34;: &#34;</span> <span class="o">+</span>
        <span class="n">category</span><span class="o">.</span><span class="na">randomSelection</span><span class="o">());</span>
    <span class="o">}</span>
  <span class="o">}</span>
<span class="o">}</span> <span class="cm">/* Output:
</span><span class="cm">BOND: MUNICIPAL
</span><span class="cm">BOND: MUNICIPAL
</span><span class="cm">STOCK: MARGIN
</span><span class="cm">STOCK: MARGIN
</span><span class="cm">BOND: JUNK
</span><span class="cm">STOCK: SHORT
</span><span class="cm">STOCK: LONG
</span><span class="cm">STOCK: LONG
</span><span class="cm">BOND: MUNICIPAL
</span><span class="cm">BOND: JUNK
</span><span class="cm">*/</span><span class="c1">//:~
</span></code></pre></td></tr></table>
</div>
</div><p>如果我们将这种方式应用于<code>Food</code>的例子，结果应该这样：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="c1">//: enumerated/menu/Meal2.java
</span><span class="c1"></span><span class="kn">package</span> <span class="nn">enumerated.menu</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">net.mindview.util.*</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">enum</span> <span class="n">Meal2</span> <span class="o">{</span>
  <span class="n">APPETIZER</span><span class="o">(</span><span class="n">Food</span><span class="o">.</span><span class="na">Appetizer</span><span class="o">.</span><span class="na">class</span><span class="o">),</span>
  <span class="n">MAINCOURSE</span><span class="o">(</span><span class="n">Food</span><span class="o">.</span><span class="na">MainCourse</span><span class="o">.</span><span class="na">class</span><span class="o">),</span>
  <span class="n">DESSERT</span><span class="o">(</span><span class="n">Food</span><span class="o">.</span><span class="na">Dessert</span><span class="o">.</span><span class="na">class</span><span class="o">),</span>
  <span class="n">COFFEE</span><span class="o">(</span><span class="n">Food</span><span class="o">.</span><span class="na">Coffee</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
  <span class="kd">private</span> <span class="n">Food</span><span class="o">[]</span> <span class="n">values</span><span class="o">;</span>
  <span class="kd">private</span> <span class="nf">Meal2</span><span class="o">(</span><span class="n">Class</span><span class="o">&lt;?</span> <span class="kd">extends</span> <span class="n">Food</span><span class="o">&gt;</span> <span class="n">kind</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">values</span> <span class="o">=</span> <span class="n">kind</span><span class="o">.</span><span class="na">getEnumConstants</span><span class="o">();</span>
  <span class="o">}</span>
  <span class="kd">public</span> <span class="kd">interface</span> <span class="nc">Food</span> <span class="o">{</span>
    <span class="kd">enum</span> <span class="n">Appetizer</span> <span class="kd">implements</span> <span class="n">Food</span> <span class="o">{</span>
      <span class="n">SALAD</span><span class="o">,</span> <span class="n">SOUP</span><span class="o">,</span> <span class="n">SPRING_ROLLS</span><span class="o">;</span>
    <span class="o">}</span>
    <span class="kd">enum</span> <span class="n">MainCourse</span> <span class="kd">implements</span> <span class="n">Food</span> <span class="o">{</span>
      <span class="n">LASAGNE</span><span class="o">,</span> <span class="n">BURRITO</span><span class="o">,</span> <span class="n">PAD_THAI</span><span class="o">,</span>
      <span class="n">LENTILS</span><span class="o">,</span> <span class="n">HUMMOUS</span><span class="o">,</span> <span class="n">VINDALOO</span><span class="o">;</span>
    <span class="o">}</span>
    <span class="kd">enum</span> <span class="n">Dessert</span> <span class="kd">implements</span> <span class="n">Food</span> <span class="o">{</span>
      <span class="n">TIRAMISU</span><span class="o">,</span> <span class="n">GELATO</span><span class="o">,</span> <span class="n">BLACK_FOREST_CAKE</span><span class="o">,</span>
      <span class="n">FRUIT</span><span class="o">,</span> <span class="n">CREME_CARAMEL</span><span class="o">;</span>
    <span class="o">}</span>
    <span class="kd">enum</span> <span class="n">Coffee</span> <span class="kd">implements</span> <span class="n">Food</span> <span class="o">{</span>
      <span class="n">BLACK_COFFEE</span><span class="o">,</span> <span class="n">DECAF_COFFEE</span><span class="o">,</span> <span class="n">ESPRESSO</span><span class="o">,</span>
      <span class="n">LATTE</span><span class="o">,</span> <span class="n">CAPPUCCINO</span><span class="o">,</span> <span class="n">TEA</span><span class="o">,</span> <span class="n">HERB_TEA</span><span class="o">;</span>
    <span class="o">}</span>
  <span class="o">}</span>
  <span class="kd">public</span> <span class="n">Food</span> <span class="nf">randomSelection</span><span class="o">()</span> <span class="o">{</span>
    <span class="k">return</span> <span class="n">Enums</span><span class="o">.</span><span class="na">random</span><span class="o">(</span><span class="n">values</span><span class="o">);</span>
  <span class="o">}</span>
  <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">for</span><span class="o">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="n">0</span><span class="o">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">5</span><span class="o">;</span> <span class="n">i</span><span class="o">++)</span> <span class="o">{</span>
      <span class="k">for</span><span class="o">(</span><span class="n">Meal2</span> <span class="n">meal</span> <span class="o">:</span> <span class="n">Meal2</span><span class="o">.</span><span class="na">values</span><span class="o">())</span> <span class="o">{</span>
        <span class="n">Food</span> <span class="n">food</span> <span class="o">=</span> <span class="n">meal</span><span class="o">.</span><span class="na">randomSelection</span><span class="o">();</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">food</span><span class="o">);</span>
      <span class="o">}</span>
      <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;---&#34;</span><span class="o">);</span>
    <span class="o">}</span>
  <span class="o">}</span>
<span class="o">}</span> <span class="cm">/* Same output as Meal.java */</span><span class="c1">//:~
</span></code></pre></td></tr></table>
</div>
</div><h2 id="8使用enumset替代标志">8.使用EnumSet替代标志</h2>
<p><code>Java SE5</code>引入<code>EnumSet</code>，是为了通过<code>enum</code>创建一种替代品，以替代传统的基于<code>int</code>的“位标志”。这种标志可以用来表示某种“开/关”信息。</p>
<p><code>EnumSet</code>的设计充分考虑到了速度因素，因为它必须与非常高效的<code>bit</code>标志相竞争。就其内部而言，它就是将一个long值作为比特向量，所以<code>EnumSet</code>非常快速高效。使用<code>EnumSet</code>的优点是，它在说明一个二进制位是否存在时，具有更好的表达能力，并且无须担心性能。</p>
<p>下面的<code>enum</code>表示在一座大楼中，警报传感器的安放位置：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="c1">//: enumerated/AlarmPoints.java
</span><span class="c1"></span><span class="kn">package</span> <span class="nn">enumerated</span><span class="o">;</span>
<span class="kd">public</span> <span class="kd">enum</span> <span class="n">AlarmPoints</span> <span class="o">{</span>
  <span class="n">STAIR1</span><span class="o">,</span> <span class="n">STAIR2</span><span class="o">,</span> <span class="n">LOBBY</span><span class="o">,</span> <span class="n">OFFICE1</span><span class="o">,</span> <span class="n">OFFICE2</span><span class="o">,</span> <span class="n">OFFICE3</span><span class="o">,</span>
  <span class="n">OFFICE4</span><span class="o">,</span> <span class="n">BATHROOM</span><span class="o">,</span> <span class="n">UTILITY</span><span class="o">,</span> <span class="n">KITCHEN</span>
<span class="o">}</span> <span class="c1">///:~
</span></code></pre></td></tr></table>
</div>
</div><p>然后，我们用<code>EnumSet</code>来跟踪报警器的状态：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="c1">//: enumerated/EnumSets.java
</span><span class="c1">// Operations on EnumSets
</span><span class="c1"></span><span class="kn">package</span> <span class="nn">enumerated</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.*</span><span class="o">;</span>
<span class="kn">import static</span> <span class="nn">enumerated.AlarmPoints.*</span><span class="o">;</span>
<span class="kn">import static</span> <span class="nn">net.mindview.util.Print.*</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">EnumSets</span> <span class="o">{</span>
  <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">EnumSet</span><span class="o">&lt;</span><span class="n">AlarmPoints</span><span class="o">&gt;</span> <span class="n">points</span> <span class="o">=</span>
      <span class="n">EnumSet</span><span class="o">.</span><span class="na">noneOf</span><span class="o">(</span><span class="n">AlarmPoints</span><span class="o">.</span><span class="na">class</span><span class="o">);</span> <span class="c1">// Empty set
</span><span class="c1"></span>    <span class="n">points</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">BATHROOM</span><span class="o">);</span>
    <span class="n">print</span><span class="o">(</span><span class="n">points</span><span class="o">);</span>
    <span class="n">points</span><span class="o">.</span><span class="na">addAll</span><span class="o">(</span><span class="n">EnumSet</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="n">STAIR1</span><span class="o">,</span> <span class="n">STAIR2</span><span class="o">,</span> <span class="n">KITCHEN</span><span class="o">));</span>
    <span class="n">print</span><span class="o">(</span><span class="n">points</span><span class="o">);</span>
    <span class="n">points</span> <span class="o">=</span> <span class="n">EnumSet</span><span class="o">.</span><span class="na">allOf</span><span class="o">(</span><span class="n">AlarmPoints</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
    <span class="n">points</span><span class="o">.</span><span class="na">removeAll</span><span class="o">(</span><span class="n">EnumSet</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="n">STAIR1</span><span class="o">,</span> <span class="n">STAIR2</span><span class="o">,</span> <span class="n">KITCHEN</span><span class="o">));</span>
    <span class="n">print</span><span class="o">(</span><span class="n">points</span><span class="o">);</span>
    <span class="n">points</span><span class="o">.</span><span class="na">removeAll</span><span class="o">(</span><span class="n">EnumSet</span><span class="o">.</span><span class="na">range</span><span class="o">(</span><span class="n">OFFICE1</span><span class="o">,</span> <span class="n">OFFICE4</span><span class="o">));</span>
    <span class="n">print</span><span class="o">(</span><span class="n">points</span><span class="o">);</span>
    <span class="n">points</span> <span class="o">=</span> <span class="n">EnumSet</span><span class="o">.</span><span class="na">complementOf</span><span class="o">(</span><span class="n">points</span><span class="o">);</span>
    <span class="n">print</span><span class="o">(</span><span class="n">points</span><span class="o">);</span>
  <span class="o">}</span>
<span class="o">}</span> <span class="cm">/* Output:
</span><span class="cm">[BATHROOM]
</span><span class="cm">[STAIR1, STAIR2, BATHROOM, KITCHEN]
</span><span class="cm">[LOBBY, OFFICE1, OFFICE2, OFFICE3, OFFICE4, BATHROOM, UTILITY]
</span><span class="cm">[LOBBY, BATHROOM, UTILITY]
</span><span class="cm">[STAIR1, STAIR2, OFFICE1, OFFICE2, OFFICE3, OFFICE4, KITCHEN]
</span><span class="cm">*/</span><span class="c1">//:~
</span></code></pre></td></tr></table>
</div>
</div><p><code>EnumSet</code>的基础是<code>long</code>，一个<code>long</code>值有64位，而一个<code>enum</code>实例只需一位<code>bit</code>表示其是否存在。也就是说，在不超过一个<code>long</code>的表达能力的情况下，你的<code>EnumSet</code>可以应用于最多不超过64个元素的<code>enum</code>。如果<code>enum</code>超过了64个元素会发生什么呢？</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-text" data-lang="text">//: enumerated/BigEnumSet.java
import java.util.*;

public class BigEnumSet {
  enum Big { A0, A1, A2, A3, A4, A5, A6, A7, A8, A9, A10,
    A11, A12, A13, A14, A15, A16, A17, A18, A19, A20, A21,
    A22, A23, A24, A25, A26, A27, A28, A29, A30, A31, A32,
    A33, A34, A35, A36, A37, A38, A39, A40, A41, A42, A43,
    A44, A45, A46, A47, A48, A49, A50, A51, A52, A53, A54,
    A55, A56, A57, A58, A59, A60, A61, A62, A63, A64, A65,
    A66, A67, A68, A69, A70, A71, A72, A73, A74, A75 }
  public static void main(String[] args) {
    EnumSet&lt;Big&gt; bigEnumSet = EnumSet.allOf(Big.class);
    System.out.println(bigEnumSet);
  }
} /* Output:
[A0, A1, A2, A3, A4, A5, A6, A7, A8, A9, A10, A11, A12, A13, A14, A15, A16, A17, A18, A19, A20, A21, A22, A23, A24, A25, A26, A27, A28, A29, A30, A31, A32, A33, A34, A35, A36, A37, A38, A39, A40, A41, A42, A43, A44, A45, A46, A47, A48, A49, A50, A51, A52, A53, A54, A55, A56, A57, A58, A59, A60, A61, A62, A63, A64, A65, A66, A67, A68, A69, A70, A71, A72, A73, A74, A75]
*///:~
</code></pre></td></tr></table>
</div>
</div><p>显然，<code>EnumSet</code>可以应用于多过64个元素的<code>enum</code>，所以我猜测，<code>Enum</code>会在必要的时候增加一个<code>long</code>。</p>
<h2 id="9使用enummap">9.使用EnumMap</h2>
<p><code>EnumMap</code>是一种特殊的<code>Map</code>，它要求其中的键必须来自一个<code>enum</code>。由于enum本身的限制，所以<code>EnumMap</code>在内部可由数组实现。因此<code>EnumMap</code>的速度很快，我们可以放心地使用<code>enum</code>实例在<code>EnumMap</code>中进行查找操作。不过，我们只能将<code>enum</code>的实例作为键来调用<code>put()</code>方法，其他操作与使用一般的<code>Map</code>差不多。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="c1">//: enumerated/EnumMaps.java
</span><span class="c1">// Basics of EnumMaps.
</span><span class="c1"></span><span class="kn">package</span> <span class="nn">enumerated</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.*</span><span class="o">;</span>
<span class="kn">import static</span> <span class="nn">enumerated.AlarmPoints.*</span><span class="o">;</span>
<span class="kn">import static</span> <span class="nn">net.mindview.util.Print.*</span><span class="o">;</span>

<span class="kd">interface</span> <span class="nc">Command</span> <span class="o">{</span> <span class="kt">void</span> <span class="nf">action</span><span class="o">();</span> <span class="o">}</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">EnumMaps</span> <span class="o">{</span>
  <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">EnumMap</span><span class="o">&lt;</span><span class="n">AlarmPoints</span><span class="o">,</span><span class="n">Command</span><span class="o">&gt;</span> <span class="n">em</span> <span class="o">=</span>
      <span class="k">new</span> <span class="n">EnumMap</span><span class="o">&lt;</span><span class="n">AlarmPoints</span><span class="o">,</span><span class="n">Command</span><span class="o">&gt;(</span><span class="n">AlarmPoints</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
    <span class="n">em</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="n">KITCHEN</span><span class="o">,</span> <span class="k">new</span> <span class="n">Command</span><span class="o">()</span> <span class="o">{</span>
      <span class="kd">public</span> <span class="kt">void</span> <span class="nf">action</span><span class="o">()</span> <span class="o">{</span> <span class="n">print</span><span class="o">(</span><span class="s">&#34;Kitchen fire!&#34;</span><span class="o">);</span> <span class="o">}</span>
    <span class="o">});</span>
    <span class="n">em</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="n">BATHROOM</span><span class="o">,</span> <span class="k">new</span> <span class="n">Command</span><span class="o">()</span> <span class="o">{</span>
      <span class="kd">public</span> <span class="kt">void</span> <span class="nf">action</span><span class="o">()</span> <span class="o">{</span> <span class="n">print</span><span class="o">(</span><span class="s">&#34;Bathroom alert!&#34;</span><span class="o">);</span> <span class="o">}</span>
    <span class="o">});</span>
    <span class="k">for</span><span class="o">(</span><span class="n">Map</span><span class="o">.</span><span class="na">Entry</span><span class="o">&lt;</span><span class="n">AlarmPoints</span><span class="o">,</span><span class="n">Command</span><span class="o">&gt;</span> <span class="n">e</span> <span class="o">:</span> <span class="n">em</span><span class="o">.</span><span class="na">entrySet</span><span class="o">())</span> <span class="o">{</span>
      <span class="n">printnb</span><span class="o">(</span><span class="n">e</span><span class="o">.</span><span class="na">getKey</span><span class="o">()</span> <span class="o">+</span> <span class="s">&#34;: &#34;</span><span class="o">);</span>
      <span class="n">e</span><span class="o">.</span><span class="na">getValue</span><span class="o">().</span><span class="na">action</span><span class="o">();</span>
    <span class="o">}</span>
    <span class="k">try</span> <span class="o">{</span> <span class="c1">// If there&#39;s no value for a particular key:
</span><span class="c1"></span>      <span class="n">em</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">UTILITY</span><span class="o">).</span><span class="na">action</span><span class="o">();</span>
    <span class="o">}</span> <span class="k">catch</span><span class="o">(</span><span class="n">Exception</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
      <span class="n">print</span><span class="o">(</span><span class="n">e</span><span class="o">);</span>
    <span class="o">}</span>
  <span class="o">}</span>
<span class="o">}</span> <span class="cm">/* Output:
</span><span class="cm">BATHROOM: Bathroom alert!
</span><span class="cm">KITCHEN: Kitchen fire!
</span><span class="cm">java.lang.NullPointerException
</span><span class="cm">*/</span><span class="c1">//:~
</span></code></pre></td></tr></table>
</div>
</div><p>与<code>EnumSet</code>一样，<code>enum</code>实例定义时的次序决定了其在<code>EnumMap</code>中声明时的顺序。</p>
<h2 id="10常量相关的方法">10.常量相关的方法</h2>
<p><code>Java</code>的<code>enum</code>有一个非常有趣的特性，即它允许程序员为<code>enum</code>实例编写方法，从而为每个<code>enum</code>实例赋予各自不同的行为。要实现常量相关的方法，你需要为<code>enum</code>定义一个或多个<code>abstract</code>方法，然后为每个<code>enum</code>实例实现该抽象方法。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="c1">//: enumerated/ConstantSpecificMethod.java
</span><span class="c1"></span><span class="kn">import</span> <span class="nn">java.util.*</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.text.*</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">enum</span> <span class="n">ConstantSpecificMethod</span> <span class="o">{</span>
  <span class="n">DATE_TIME</span> <span class="o">{</span>
    <span class="n">String</span> <span class="nf">getInfo</span><span class="o">()</span> <span class="o">{</span>
      <span class="k">return</span>
        <span class="n">DateFormat</span><span class="o">.</span><span class="na">getDateInstance</span><span class="o">().</span><span class="na">format</span><span class="o">(</span><span class="k">new</span> <span class="n">Date</span><span class="o">());</span>
    <span class="o">}</span>
  <span class="o">},</span>
  <span class="n">CLASSPATH</span> <span class="o">{</span>
    <span class="n">String</span> <span class="nf">getInfo</span><span class="o">()</span> <span class="o">{</span>
      <span class="k">return</span> <span class="n">System</span><span class="o">.</span><span class="na">getenv</span><span class="o">(</span><span class="s">&#34;CLASSPATH&#34;</span><span class="o">);</span>
    <span class="o">}</span>
  <span class="o">},</span>
  <span class="n">VERSION</span> <span class="o">{</span>
    <span class="n">String</span> <span class="nf">getInfo</span><span class="o">()</span> <span class="o">{</span>
      <span class="k">return</span> <span class="n">System</span><span class="o">.</span><span class="na">getProperty</span><span class="o">(</span><span class="s">&#34;java.version&#34;</span><span class="o">);</span>
    <span class="o">}</span>
  <span class="o">};</span>
  <span class="kd">abstract</span> <span class="n">String</span> <span class="nf">getInfo</span><span class="o">();</span>
  <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">for</span><span class="o">(</span><span class="n">ConstantSpecificMethod</span> <span class="n">csm</span> <span class="o">:</span> <span class="n">values</span><span class="o">())</span>
      <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">csm</span><span class="o">.</span><span class="na">getInfo</span><span class="o">());</span>
  <span class="o">}</span>
<span class="o">}</span> <span class="cm">/* (Execute to see output) */</span><span class="c1">//:~
</span></code></pre></td></tr></table>
</div>
</div><p>并不能真的将<code>enum</code>实例作为一个类型来使用：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="c1">//: enumerated/NotClasses.java
</span><span class="c1">// {Exec: javap -c LikeClasses}
</span><span class="c1"></span><span class="kn">import static</span> <span class="nn">net.mindview.util.Print.*</span><span class="o">;</span>

<span class="kd">enum</span> <span class="n">LikeClasses</span> <span class="o">{</span>
  <span class="n">WINKEN</span> <span class="o">{</span> <span class="kt">void</span> <span class="nf">behavior</span><span class="o">()</span> <span class="o">{</span> <span class="n">print</span><span class="o">(</span><span class="s">&#34;Behavior1&#34;</span><span class="o">);</span> <span class="o">}</span> <span class="o">},</span>
  <span class="n">BLINKEN</span> <span class="o">{</span> <span class="kt">void</span> <span class="nf">behavior</span><span class="o">()</span> <span class="o">{</span> <span class="n">print</span><span class="o">(</span><span class="s">&#34;Behavior2&#34;</span><span class="o">);</span> <span class="o">}</span> <span class="o">},</span>
  <span class="n">NOD</span> <span class="o">{</span> <span class="kt">void</span> <span class="nf">behavior</span><span class="o">()</span> <span class="o">{</span> <span class="n">print</span><span class="o">(</span><span class="s">&#34;Behavior3&#34;</span><span class="o">);</span> <span class="o">}</span> <span class="o">};</span>
  <span class="kd">abstract</span> <span class="kt">void</span> <span class="nf">behavior</span><span class="o">();</span>
<span class="o">}</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">NotClasses</span> <span class="o">{</span>
  <span class="c1">// void f1(LikeClasses.WINKEN instance) {} // Nope
</span><span class="c1"></span><span class="o">}</span> <span class="cm">/* Output:
</span><span class="cm">Compiled from &#34;NotClasses.java&#34;
</span><span class="cm">abstract class LikeClasses extends java.lang.Enum{
</span><span class="cm">public static final LikeClasses WINKEN;
</span><span class="cm">public static final LikeClasses BLINKEN;
</span><span class="cm">public static final LikeClasses NOD;
</span><span class="cm">...
</span><span class="cm">*/</span><span class="c1">//:~
</span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span><span class="lnt">53
</span><span class="lnt">54
</span><span class="lnt">55
</span><span class="lnt">56
</span><span class="lnt">57
</span><span class="lnt">58
</span><span class="lnt">59
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="c1">//: enumerated/CarWash.java
</span><span class="c1"></span><span class="kn">import</span> <span class="nn">java.util.*</span><span class="o">;</span>
<span class="kn">import static</span> <span class="nn">net.mindview.util.Print.*</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">CarWash</span> <span class="o">{</span>
  <span class="kd">public</span> <span class="kd">enum</span> <span class="n">Cycle</span> <span class="o">{</span>
    <span class="n">UNDERBODY</span> <span class="o">{</span>
      <span class="kt">void</span> <span class="nf">action</span><span class="o">()</span> <span class="o">{</span> <span class="n">print</span><span class="o">(</span><span class="s">&#34;Spraying the underbody&#34;</span><span class="o">);</span> <span class="o">}</span>
    <span class="o">},</span>
    <span class="n">WHEELWASH</span> <span class="o">{</span>
      <span class="kt">void</span> <span class="nf">action</span><span class="o">()</span> <span class="o">{</span> <span class="n">print</span><span class="o">(</span><span class="s">&#34;Washing the wheels&#34;</span><span class="o">);</span> <span class="o">}</span>
    <span class="o">},</span>
    <span class="n">PREWASH</span> <span class="o">{</span>
      <span class="kt">void</span> <span class="nf">action</span><span class="o">()</span> <span class="o">{</span> <span class="n">print</span><span class="o">(</span><span class="s">&#34;Loosening the dirt&#34;</span><span class="o">);</span> <span class="o">}</span>
    <span class="o">},</span>
    <span class="n">BASIC</span> <span class="o">{</span>
      <span class="kt">void</span> <span class="nf">action</span><span class="o">()</span> <span class="o">{</span> <span class="n">print</span><span class="o">(</span><span class="s">&#34;The basic wash&#34;</span><span class="o">);</span> <span class="o">}</span>
    <span class="o">},</span>
    <span class="n">HOTWAX</span> <span class="o">{</span>
      <span class="kt">void</span> <span class="nf">action</span><span class="o">()</span> <span class="o">{</span> <span class="n">print</span><span class="o">(</span><span class="s">&#34;Applying hot wax&#34;</span><span class="o">);</span> <span class="o">}</span>
    <span class="o">},</span>
    <span class="n">RINSE</span> <span class="o">{</span>
      <span class="kt">void</span> <span class="nf">action</span><span class="o">()</span> <span class="o">{</span> <span class="n">print</span><span class="o">(</span><span class="s">&#34;Rinsing&#34;</span><span class="o">);</span> <span class="o">}</span>
    <span class="o">},</span>
    <span class="n">BLOWDRY</span> <span class="o">{</span>
      <span class="kt">void</span> <span class="nf">action</span><span class="o">()</span> <span class="o">{</span> <span class="n">print</span><span class="o">(</span><span class="s">&#34;Blowing dry&#34;</span><span class="o">);</span> <span class="o">}</span>
    <span class="o">};</span>
    <span class="kd">abstract</span> <span class="kt">void</span> <span class="nf">action</span><span class="o">();</span>
  <span class="o">}</span>
  <span class="n">EnumSet</span><span class="o">&lt;</span><span class="n">Cycle</span><span class="o">&gt;</span> <span class="n">cycles</span> <span class="o">=</span>
    <span class="n">EnumSet</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="n">Cycle</span><span class="o">.</span><span class="na">BASIC</span><span class="o">,</span> <span class="n">Cycle</span><span class="o">.</span><span class="na">RINSE</span><span class="o">);</span>
  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">add</span><span class="o">(</span><span class="n">Cycle</span> <span class="n">cycle</span><span class="o">)</span> <span class="o">{</span> <span class="n">cycles</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">cycle</span><span class="o">);</span> <span class="o">}</span>
  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">washCar</span><span class="o">()</span> <span class="o">{</span>
    <span class="k">for</span><span class="o">(</span><span class="n">Cycle</span> <span class="n">c</span> <span class="o">:</span> <span class="n">cycles</span><span class="o">)</span>
      <span class="n">c</span><span class="o">.</span><span class="na">action</span><span class="o">();</span>
  <span class="o">}</span>
  <span class="kd">public</span> <span class="n">String</span> <span class="nf">toString</span><span class="o">()</span> <span class="o">{</span> <span class="k">return</span> <span class="n">cycles</span><span class="o">.</span><span class="na">toString</span><span class="o">();</span> <span class="o">}</span>
  <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">CarWash</span> <span class="n">wash</span> <span class="o">=</span> <span class="k">new</span> <span class="n">CarWash</span><span class="o">();</span>
    <span class="n">print</span><span class="o">(</span><span class="n">wash</span><span class="o">);</span>
    <span class="n">wash</span><span class="o">.</span><span class="na">washCar</span><span class="o">();</span>
    <span class="c1">// Order of addition is unimportant:
</span><span class="c1"></span>    <span class="n">wash</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">Cycle</span><span class="o">.</span><span class="na">BLOWDRY</span><span class="o">);</span>
    <span class="n">wash</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">Cycle</span><span class="o">.</span><span class="na">BLOWDRY</span><span class="o">);</span> <span class="c1">// Duplicates ignored
</span><span class="c1"></span>    <span class="n">wash</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">Cycle</span><span class="o">.</span><span class="na">RINSE</span><span class="o">);</span>
    <span class="n">wash</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">Cycle</span><span class="o">.</span><span class="na">HOTWAX</span><span class="o">);</span>
    <span class="n">print</span><span class="o">(</span><span class="n">wash</span><span class="o">);</span>
    <span class="n">wash</span><span class="o">.</span><span class="na">washCar</span><span class="o">();</span>
  <span class="o">}</span>
<span class="o">}</span> <span class="cm">/* Output:
</span><span class="cm">[BASIC, RINSE]
</span><span class="cm">The basic wash
</span><span class="cm">Rinsing
</span><span class="cm">[BASIC, HOTWAX, RINSE, BLOWDRY]
</span><span class="cm">The basic wash
</span><span class="cm">Applying hot wax
</span><span class="cm">Rinsing
</span><span class="cm">Blowing dry
</span><span class="cm">*/</span><span class="c1">//:~
</span></code></pre></td></tr></table>
</div>
</div><p>与使用匿名内部类相比较，定义常量相关方法的语法更高效、简洁。</p>
<p>除了实现<code>abstarct</code>方法以外，程序员是否可以覆盖常量相关的方法呢？答案是肯定的。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="c1">//: enumerated/OverrideConstantSpecific.java
</span><span class="c1"></span><span class="kn">import static</span> <span class="nn">net.mindview.util.Print.*</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">enum</span> <span class="n">OverrideConstantSpecific</span> <span class="o">{</span>
  <span class="n">NUT</span><span class="o">,</span> <span class="n">BOLT</span><span class="o">,</span>
  <span class="n">WASHER</span> <span class="o">{</span>
    <span class="kt">void</span> <span class="nf">f</span><span class="o">()</span> <span class="o">{</span> <span class="n">print</span><span class="o">(</span><span class="s">&#34;Overridden method&#34;</span><span class="o">);</span> <span class="o">}</span>
  <span class="o">};</span>
  <span class="kt">void</span> <span class="nf">f</span><span class="o">()</span> <span class="o">{</span> <span class="n">print</span><span class="o">(</span><span class="s">&#34;default behavior&#34;</span><span class="o">);</span> <span class="o">}</span>
  <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">for</span><span class="o">(</span><span class="n">OverrideConstantSpecific</span> <span class="n">ocs</span> <span class="o">:</span> <span class="n">values</span><span class="o">())</span> <span class="o">{</span>
      <span class="n">printnb</span><span class="o">(</span><span class="n">ocs</span> <span class="o">+</span> <span class="s">&#34;: &#34;</span><span class="o">);</span>
      <span class="n">ocs</span><span class="o">.</span><span class="na">f</span><span class="o">();</span>
    <span class="o">}</span>
  <span class="o">}</span>
<span class="o">}</span> <span class="cm">/* Output:
</span><span class="cm">NUT: default behavior
</span><span class="cm">BOLT: default behavior
</span><span class="cm">WASHER: Overridden method
</span><span class="cm">*/</span><span class="c1">//:~
</span></code></pre></td></tr></table>
</div>
</div><h3 id="101使用enum的职责链">10.1使用enum的职责链</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">  1
</span><span class="lnt">  2
</span><span class="lnt">  3
</span><span class="lnt">  4
</span><span class="lnt">  5
</span><span class="lnt">  6
</span><span class="lnt">  7
</span><span class="lnt">  8
</span><span class="lnt">  9
</span><span class="lnt"> 10
</span><span class="lnt"> 11
</span><span class="lnt"> 12
</span><span class="lnt"> 13
</span><span class="lnt"> 14
</span><span class="lnt"> 15
</span><span class="lnt"> 16
</span><span class="lnt"> 17
</span><span class="lnt"> 18
</span><span class="lnt"> 19
</span><span class="lnt"> 20
</span><span class="lnt"> 21
</span><span class="lnt"> 22
</span><span class="lnt"> 23
</span><span class="lnt"> 24
</span><span class="lnt"> 25
</span><span class="lnt"> 26
</span><span class="lnt"> 27
</span><span class="lnt"> 28
</span><span class="lnt"> 29
</span><span class="lnt"> 30
</span><span class="lnt"> 31
</span><span class="lnt"> 32
</span><span class="lnt"> 33
</span><span class="lnt"> 34
</span><span class="lnt"> 35
</span><span class="lnt"> 36
</span><span class="lnt"> 37
</span><span class="lnt"> 38
</span><span class="lnt"> 39
</span><span class="lnt"> 40
</span><span class="lnt"> 41
</span><span class="lnt"> 42
</span><span class="lnt"> 43
</span><span class="lnt"> 44
</span><span class="lnt"> 45
</span><span class="lnt"> 46
</span><span class="lnt"> 47
</span><span class="lnt"> 48
</span><span class="lnt"> 49
</span><span class="lnt"> 50
</span><span class="lnt"> 51
</span><span class="lnt"> 52
</span><span class="lnt"> 53
</span><span class="lnt"> 54
</span><span class="lnt"> 55
</span><span class="lnt"> 56
</span><span class="lnt"> 57
</span><span class="lnt"> 58
</span><span class="lnt"> 59
</span><span class="lnt"> 60
</span><span class="lnt"> 61
</span><span class="lnt"> 62
</span><span class="lnt"> 63
</span><span class="lnt"> 64
</span><span class="lnt"> 65
</span><span class="lnt"> 66
</span><span class="lnt"> 67
</span><span class="lnt"> 68
</span><span class="lnt"> 69
</span><span class="lnt"> 70
</span><span class="lnt"> 71
</span><span class="lnt"> 72
</span><span class="lnt"> 73
</span><span class="lnt"> 74
</span><span class="lnt"> 75
</span><span class="lnt"> 76
</span><span class="lnt"> 77
</span><span class="lnt"> 78
</span><span class="lnt"> 79
</span><span class="lnt"> 80
</span><span class="lnt"> 81
</span><span class="lnt"> 82
</span><span class="lnt"> 83
</span><span class="lnt"> 84
</span><span class="lnt"> 85
</span><span class="lnt"> 86
</span><span class="lnt"> 87
</span><span class="lnt"> 88
</span><span class="lnt"> 89
</span><span class="lnt"> 90
</span><span class="lnt"> 91
</span><span class="lnt"> 92
</span><span class="lnt"> 93
</span><span class="lnt"> 94
</span><span class="lnt"> 95
</span><span class="lnt"> 96
</span><span class="lnt"> 97
</span><span class="lnt"> 98
</span><span class="lnt"> 99
</span><span class="lnt">100
</span><span class="lnt">101
</span><span class="lnt">102
</span><span class="lnt">103
</span><span class="lnt">104
</span><span class="lnt">105
</span><span class="lnt">106
</span><span class="lnt">107
</span><span class="lnt">108
</span><span class="lnt">109
</span><span class="lnt">110
</span><span class="lnt">111
</span><span class="lnt">112
</span><span class="lnt">113
</span><span class="lnt">114
</span><span class="lnt">115
</span><span class="lnt">116
</span><span class="lnt">117
</span><span class="lnt">118
</span><span class="lnt">119
</span><span class="lnt">120
</span><span class="lnt">121
</span><span class="lnt">122
</span><span class="lnt">123
</span><span class="lnt">124
</span><span class="lnt">125
</span><span class="lnt">126
</span><span class="lnt">127
</span><span class="lnt">128
</span><span class="lnt">129
</span><span class="lnt">130
</span><span class="lnt">131
</span><span class="lnt">132
</span><span class="lnt">133
</span><span class="lnt">134
</span><span class="lnt">135
</span><span class="lnt">136
</span><span class="lnt">137
</span><span class="lnt">138
</span><span class="lnt">139
</span><span class="lnt">140
</span><span class="lnt">141
</span><span class="lnt">142
</span><span class="lnt">143
</span><span class="lnt">144
</span><span class="lnt">145
</span><span class="lnt">146
</span><span class="lnt">147
</span><span class="lnt">148
</span><span class="lnt">149
</span><span class="lnt">150
</span><span class="lnt">151
</span><span class="lnt">152
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="c1">//: enumerated/PostOffice.java
</span><span class="c1">// Modeling a post office.
</span><span class="c1"></span><span class="kn">import</span> <span class="nn">java.util.*</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">net.mindview.util.*</span><span class="o">;</span>
<span class="kn">import static</span> <span class="nn">net.mindview.util.Print.*</span><span class="o">;</span>

<span class="kd">class</span> <span class="nc">Mail</span> <span class="o">{</span>
  <span class="c1">// The NO&#39;s lower the probability of random selection:
</span><span class="c1"></span>  <span class="kd">enum</span> <span class="n">GeneralDelivery</span> <span class="o">{</span><span class="n">YES</span><span class="o">,</span><span class="n">NO1</span><span class="o">,</span><span class="n">NO2</span><span class="o">,</span><span class="n">NO3</span><span class="o">,</span><span class="n">NO4</span><span class="o">,</span><span class="n">NO5</span><span class="o">}</span>
  <span class="kd">enum</span> <span class="n">Scannability</span> <span class="o">{</span><span class="n">UNSCANNABLE</span><span class="o">,</span><span class="n">YES1</span><span class="o">,</span><span class="n">YES2</span><span class="o">,</span><span class="n">YES3</span><span class="o">,</span><span class="n">YES4</span><span class="o">}</span>
  <span class="kd">enum</span> <span class="n">Readability</span> <span class="o">{</span><span class="n">ILLEGIBLE</span><span class="o">,</span><span class="n">YES1</span><span class="o">,</span><span class="n">YES2</span><span class="o">,</span><span class="n">YES3</span><span class="o">,</span><span class="n">YES4</span><span class="o">}</span>
  <span class="kd">enum</span> <span class="n">Address</span> <span class="o">{</span><span class="n">INCORRECT</span><span class="o">,</span><span class="n">OK1</span><span class="o">,</span><span class="n">OK2</span><span class="o">,</span><span class="n">OK3</span><span class="o">,</span><span class="n">OK4</span><span class="o">,</span><span class="n">OK5</span><span class="o">,</span><span class="n">OK6</span><span class="o">}</span>
  <span class="kd">enum</span> <span class="n">ReturnAddress</span> <span class="o">{</span><span class="n">MISSING</span><span class="o">,</span><span class="n">OK1</span><span class="o">,</span><span class="n">OK2</span><span class="o">,</span><span class="n">OK3</span><span class="o">,</span><span class="n">OK4</span><span class="o">,</span><span class="n">OK5</span><span class="o">}</span>
  <span class="n">GeneralDelivery</span> <span class="n">generalDelivery</span><span class="o">;</span>
  <span class="n">Scannability</span> <span class="n">scannability</span><span class="o">;</span>
  <span class="n">Readability</span> <span class="n">readability</span><span class="o">;</span>
  <span class="n">Address</span> <span class="n">address</span><span class="o">;</span>
  <span class="n">ReturnAddress</span> <span class="n">returnAddress</span><span class="o">;</span>
  <span class="kd">static</span> <span class="kt">long</span> <span class="n">counter</span> <span class="o">=</span> <span class="n">0</span><span class="o">;</span>
  <span class="kt">long</span> <span class="n">id</span> <span class="o">=</span> <span class="n">counter</span><span class="o">++;</span>
  <span class="kd">public</span> <span class="n">String</span> <span class="nf">toString</span><span class="o">()</span> <span class="o">{</span> <span class="k">return</span> <span class="s">&#34;Mail &#34;</span> <span class="o">+</span> <span class="n">id</span><span class="o">;</span> <span class="o">}</span>
  <span class="kd">public</span> <span class="n">String</span> <span class="nf">details</span><span class="o">()</span> <span class="o">{</span>
    <span class="k">return</span> <span class="n">toString</span><span class="o">()</span> <span class="o">+</span>
      <span class="s">&#34;, General Delivery: &#34;</span> <span class="o">+</span> <span class="n">generalDelivery</span> <span class="o">+</span>
      <span class="s">&#34;, Address Scanability: &#34;</span> <span class="o">+</span> <span class="n">scannability</span> <span class="o">+</span>
      <span class="s">&#34;, Address Readability: &#34;</span> <span class="o">+</span> <span class="n">readability</span> <span class="o">+</span>
      <span class="s">&#34;, Address Address: &#34;</span> <span class="o">+</span> <span class="n">address</span> <span class="o">+</span>
      <span class="s">&#34;, Return address: &#34;</span> <span class="o">+</span> <span class="n">returnAddress</span><span class="o">;</span>
  <span class="o">}</span>
  <span class="c1">// Generate test Mail:
</span><span class="c1"></span>  <span class="kd">public</span> <span class="kd">static</span> <span class="n">Mail</span> <span class="nf">randomMail</span><span class="o">()</span> <span class="o">{</span>
    <span class="n">Mail</span> <span class="n">m</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Mail</span><span class="o">();</span>
    <span class="n">m</span><span class="o">.</span><span class="na">generalDelivery</span><span class="o">=</span> <span class="n">Enums</span><span class="o">.</span><span class="na">random</span><span class="o">(</span><span class="n">GeneralDelivery</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
    <span class="n">m</span><span class="o">.</span><span class="na">scannability</span> <span class="o">=</span> <span class="n">Enums</span><span class="o">.</span><span class="na">random</span><span class="o">(</span><span class="n">Scannability</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
    <span class="n">m</span><span class="o">.</span><span class="na">readability</span> <span class="o">=</span> <span class="n">Enums</span><span class="o">.</span><span class="na">random</span><span class="o">(</span><span class="n">Readability</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
    <span class="n">m</span><span class="o">.</span><span class="na">address</span> <span class="o">=</span> <span class="n">Enums</span><span class="o">.</span><span class="na">random</span><span class="o">(</span><span class="n">Address</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
    <span class="n">m</span><span class="o">.</span><span class="na">returnAddress</span> <span class="o">=</span> <span class="n">Enums</span><span class="o">.</span><span class="na">random</span><span class="o">(</span><span class="n">ReturnAddress</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
    <span class="k">return</span> <span class="n">m</span><span class="o">;</span>
  <span class="o">}</span>
  <span class="kd">public</span> <span class="kd">static</span> <span class="n">Iterable</span><span class="o">&lt;</span><span class="n">Mail</span><span class="o">&gt;</span> <span class="nf">generator</span><span class="o">(</span><span class="kd">final</span> <span class="kt">int</span> <span class="n">count</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">return</span> <span class="k">new</span> <span class="n">Iterable</span><span class="o">&lt;</span><span class="n">Mail</span><span class="o">&gt;()</span> <span class="o">{</span>
      <span class="kt">int</span> <span class="n">n</span> <span class="o">=</span> <span class="n">count</span><span class="o">;</span>
      <span class="kd">public</span> <span class="n">Iterator</span><span class="o">&lt;</span><span class="n">Mail</span><span class="o">&gt;</span> <span class="nf">iterator</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="k">new</span> <span class="n">Iterator</span><span class="o">&lt;</span><span class="n">Mail</span><span class="o">&gt;()</span> <span class="o">{</span>
          <span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">hasNext</span><span class="o">()</span> <span class="o">{</span> <span class="k">return</span> <span class="n">n</span><span class="o">--</span> <span class="o">&gt;</span> <span class="n">0</span><span class="o">;</span> <span class="o">}</span>
          <span class="kd">public</span> <span class="n">Mail</span> <span class="nf">next</span><span class="o">()</span> <span class="o">{</span> <span class="k">return</span> <span class="n">randomMail</span><span class="o">();</span> <span class="o">}</span>
          <span class="kd">public</span> <span class="kt">void</span> <span class="nf">remove</span><span class="o">()</span> <span class="o">{</span> <span class="c1">// Not implemented
</span><span class="c1"></span>            <span class="k">throw</span> <span class="k">new</span> <span class="n">UnsupportedOperationException</span><span class="o">();</span>
          <span class="o">}</span>
        <span class="o">};</span>
      <span class="o">}</span>
    <span class="o">};</span>
  <span class="o">}</span>
<span class="o">}</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">PostOffice</span> <span class="o">{</span>
  <span class="kd">enum</span> <span class="n">MailHandler</span> <span class="o">{</span>
    <span class="n">GENERAL_DELIVERY</span> <span class="o">{</span>
      <span class="kt">boolean</span> <span class="nf">handle</span><span class="o">(</span><span class="n">Mail</span> <span class="n">m</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">switch</span><span class="o">(</span><span class="n">m</span><span class="o">.</span><span class="na">generalDelivery</span><span class="o">)</span> <span class="o">{</span>
          <span class="k">case</span> <span class="n">YES</span><span class="o">:</span>
            <span class="n">print</span><span class="o">(</span><span class="s">&#34;Using general delivery for &#34;</span> <span class="o">+</span> <span class="n">m</span><span class="o">);</span>
            <span class="k">return</span> <span class="kc">true</span><span class="o">;</span>
          <span class="k">default</span><span class="o">:</span> <span class="k">return</span> <span class="kc">false</span><span class="o">;</span>
        <span class="o">}</span>
      <span class="o">}</span>
    <span class="o">},</span>
    <span class="n">MACHINE_SCAN</span> <span class="o">{</span>
      <span class="kt">boolean</span> <span class="nf">handle</span><span class="o">(</span><span class="n">Mail</span> <span class="n">m</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">switch</span><span class="o">(</span><span class="n">m</span><span class="o">.</span><span class="na">scannability</span><span class="o">)</span> <span class="o">{</span>
          <span class="k">case</span> <span class="n">UNSCANNABLE</span><span class="o">:</span> <span class="k">return</span> <span class="kc">false</span><span class="o">;</span>
          <span class="k">default</span><span class="o">:</span>
            <span class="k">switch</span><span class="o">(</span><span class="n">m</span><span class="o">.</span><span class="na">address</span><span class="o">)</span> <span class="o">{</span>
              <span class="k">case</span> <span class="n">INCORRECT</span><span class="o">:</span> <span class="k">return</span> <span class="kc">false</span><span class="o">;</span>
              <span class="k">default</span><span class="o">:</span>
                <span class="n">print</span><span class="o">(</span><span class="s">&#34;Delivering &#34;</span><span class="o">+</span> <span class="n">m</span> <span class="o">+</span> <span class="s">&#34; automatically&#34;</span><span class="o">);</span>
                <span class="k">return</span> <span class="kc">true</span><span class="o">;</span>
            <span class="o">}</span>
        <span class="o">}</span>
      <span class="o">}</span>
    <span class="o">},</span>
    <span class="n">VISUAL_INSPECTION</span> <span class="o">{</span>
      <span class="kt">boolean</span> <span class="nf">handle</span><span class="o">(</span><span class="n">Mail</span> <span class="n">m</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">switch</span><span class="o">(</span><span class="n">m</span><span class="o">.</span><span class="na">readability</span><span class="o">)</span> <span class="o">{</span>
          <span class="k">case</span> <span class="n">ILLEGIBLE</span><span class="o">:</span> <span class="k">return</span> <span class="kc">false</span><span class="o">;</span>
          <span class="k">default</span><span class="o">:</span>
            <span class="k">switch</span><span class="o">(</span><span class="n">m</span><span class="o">.</span><span class="na">address</span><span class="o">)</span> <span class="o">{</span>
              <span class="k">case</span> <span class="n">INCORRECT</span><span class="o">:</span> <span class="k">return</span> <span class="kc">false</span><span class="o">;</span>
              <span class="k">default</span><span class="o">:</span>
                <span class="n">print</span><span class="o">(</span><span class="s">&#34;Delivering &#34;</span> <span class="o">+</span> <span class="n">m</span> <span class="o">+</span> <span class="s">&#34; normally&#34;</span><span class="o">);</span>
                <span class="k">return</span> <span class="kc">true</span><span class="o">;</span>
            <span class="o">}</span>
        <span class="o">}</span>
      <span class="o">}</span>
    <span class="o">},</span>
    <span class="n">RETURN_TO_SENDER</span> <span class="o">{</span>
      <span class="kt">boolean</span> <span class="nf">handle</span><span class="o">(</span><span class="n">Mail</span> <span class="n">m</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">switch</span><span class="o">(</span><span class="n">m</span><span class="o">.</span><span class="na">returnAddress</span><span class="o">)</span> <span class="o">{</span>
          <span class="k">case</span> <span class="n">MISSING</span><span class="o">:</span> <span class="k">return</span> <span class="kc">false</span><span class="o">;</span>
          <span class="k">default</span><span class="o">:</span>
            <span class="n">print</span><span class="o">(</span><span class="s">&#34;Returning &#34;</span> <span class="o">+</span> <span class="n">m</span> <span class="o">+</span> <span class="s">&#34; to sender&#34;</span><span class="o">);</span>
            <span class="k">return</span> <span class="kc">true</span><span class="o">;</span>
        <span class="o">}</span>
      <span class="o">}</span>
    <span class="o">};</span>
    <span class="kd">abstract</span> <span class="kt">boolean</span> <span class="nf">handle</span><span class="o">(</span><span class="n">Mail</span> <span class="n">m</span><span class="o">);</span>
  <span class="o">}</span>
  <span class="kd">static</span> <span class="kt">void</span> <span class="nf">handle</span><span class="o">(</span><span class="n">Mail</span> <span class="n">m</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">for</span><span class="o">(</span><span class="n">MailHandler</span> <span class="n">handler</span> <span class="o">:</span> <span class="n">MailHandler</span><span class="o">.</span><span class="na">values</span><span class="o">())</span>
      <span class="k">if</span><span class="o">(</span><span class="n">handler</span><span class="o">.</span><span class="na">handle</span><span class="o">(</span><span class="n">m</span><span class="o">))</span>
        <span class="k">return</span><span class="o">;</span>
    <span class="n">print</span><span class="o">(</span><span class="n">m</span> <span class="o">+</span> <span class="s">&#34; is a dead letter&#34;</span><span class="o">);</span>
  <span class="o">}</span>
  <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">for</span><span class="o">(</span><span class="n">Mail</span> <span class="n">mail</span> <span class="o">:</span> <span class="n">Mail</span><span class="o">.</span><span class="na">generator</span><span class="o">(</span><span class="n">10</span><span class="o">))</span> <span class="o">{</span>
      <span class="n">print</span><span class="o">(</span><span class="n">mail</span><span class="o">.</span><span class="na">details</span><span class="o">());</span>
      <span class="n">handle</span><span class="o">(</span><span class="n">mail</span><span class="o">);</span>
      <span class="n">print</span><span class="o">(</span><span class="s">&#34;*****&#34;</span><span class="o">);</span>
    <span class="o">}</span>
  <span class="o">}</span>
<span class="o">}</span> <span class="cm">/* Output:
</span><span class="cm">Mail 0, General Delivery: NO2, Address Scanability: UNSCANNABLE, Address Readability: YES3, Address Address: OK1, Return address: OK1
</span><span class="cm">Delivering Mail 0 normally
</span><span class="cm">*****
</span><span class="cm">Mail 1, General Delivery: NO5, Address Scanability: YES3, Address Readability: ILLEGIBLE, Address Address: OK5, Return address: OK1
</span><span class="cm">Delivering Mail 1 automatically
</span><span class="cm">*****
</span><span class="cm">Mail 2, General Delivery: YES, Address Scanability: YES3, Address Readability: YES1, Address Address: OK1, Return address: OK5
</span><span class="cm">Using general delivery for Mail 2
</span><span class="cm">*****
</span><span class="cm">Mail 3, General Delivery: NO4, Address Scanability: YES3, Address Readability: YES1, Address Address: INCORRECT, Return address: OK4
</span><span class="cm">Returning Mail 3 to sender
</span><span class="cm">*****
</span><span class="cm">Mail 4, General Delivery: NO4, Address Scanability: UNSCANNABLE, Address Readability: YES1, Address Address: INCORRECT, Return address: OK2
</span><span class="cm">Returning Mail 4 to sender
</span><span class="cm">*****
</span><span class="cm">Mail 5, General Delivery: NO3, Address Scanability: YES1, Address Readability: ILLEGIBLE, Address Address: OK4, Return address: OK2
</span><span class="cm">Delivering Mail 5 automatically
</span><span class="cm">*****
</span><span class="cm">Mail 6, General Delivery: YES, Address Scanability: YES4, Address Readability: ILLEGIBLE, Address Address: OK4, Return address: OK4
</span><span class="cm">Using general delivery for Mail 6
</span><span class="cm">*****
</span><span class="cm">Mail 7, General Delivery: YES, Address Scanability: YES3, Address Readability: YES4, Address Address: OK2, Return address: MISSING
</span><span class="cm">Using general delivery for Mail 7
</span><span class="cm">*****
</span><span class="cm">Mail 8, General Delivery: NO3, Address Scanability: YES1, Address Readability: YES3, Address Address: INCORRECT, Return address: MISSING
</span><span class="cm">Mail 8 is a dead letter
</span><span class="cm">*****
</span><span class="cm">Mail 9, General Delivery: NO1, Address Scanability: UNSCANNABLE, Address Readability: YES2, Address Address: OK1, Return address: OK4
</span><span class="cm">Delivering Mail 9 normally
</span><span class="cm">*****
</span><span class="cm">*/</span><span class="c1">//:~
</span></code></pre></td></tr></table>
</div>
</div><h3 id="102-使用enum的状态机">10.2 使用enum的状态机</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="c1">//: enumerated/Input.java
</span><span class="c1"></span><span class="kn">package</span> <span class="nn">enumerated</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.*</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">enum</span> <span class="n">Input</span> <span class="o">{</span>
  <span class="n">NICKEL</span><span class="o">(</span><span class="n">5</span><span class="o">),</span> <span class="n">DIME</span><span class="o">(</span><span class="n">10</span><span class="o">),</span> <span class="n">QUARTER</span><span class="o">(</span><span class="n">25</span><span class="o">),</span> <span class="n">DOLLAR</span><span class="o">(</span><span class="n">100</span><span class="o">),</span>
  <span class="n">TOOTHPASTE</span><span class="o">(</span><span class="n">200</span><span class="o">),</span> <span class="n">CHIPS</span><span class="o">(</span><span class="n">75</span><span class="o">),</span> <span class="n">SODA</span><span class="o">(</span><span class="n">100</span><span class="o">),</span> <span class="n">SOAP</span><span class="o">(</span><span class="n">50</span><span class="o">),</span>
  <span class="n">ABORT_TRANSACTION</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="kt">int</span> <span class="nf">amount</span><span class="o">()</span> <span class="o">{</span> <span class="c1">// Disallow
</span><span class="c1"></span>      <span class="k">throw</span> <span class="k">new</span> <span class="n">RuntimeException</span><span class="o">(</span><span class="s">&#34;ABORT.amount()&#34;</span><span class="o">);</span>
    <span class="o">}</span>
  <span class="o">},</span>
  <span class="n">STOP</span> <span class="o">{</span> <span class="c1">// This must be the last instance.
</span><span class="c1"></span>    <span class="kd">public</span> <span class="kt">int</span> <span class="nf">amount</span><span class="o">()</span> <span class="o">{</span> <span class="c1">// Disallow
</span><span class="c1"></span>      <span class="k">throw</span> <span class="k">new</span> <span class="n">RuntimeException</span><span class="o">(</span><span class="s">&#34;SHUT_DOWN.amount()&#34;</span><span class="o">);</span>
    <span class="o">}</span>
  <span class="o">};</span>    
  <span class="kt">int</span> <span class="n">value</span><span class="o">;</span> <span class="c1">// In cents
</span><span class="c1"></span>  <span class="n">Input</span><span class="o">(</span><span class="kt">int</span> <span class="n">value</span><span class="o">)</span> <span class="o">{</span> <span class="k">this</span><span class="o">.</span><span class="na">value</span> <span class="o">=</span> <span class="n">value</span><span class="o">;</span> <span class="o">}</span>
  <span class="n">Input</span><span class="o">()</span> <span class="o">{}</span>
  <span class="kt">int</span> <span class="nf">amount</span><span class="o">()</span> <span class="o">{</span> <span class="k">return</span> <span class="n">value</span><span class="o">;</span> <span class="o">};</span> <span class="c1">// In cents
</span><span class="c1"></span>  <span class="kd">static</span> <span class="n">Random</span> <span class="n">rand</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Random</span><span class="o">(</span><span class="n">47</span><span class="o">);</span>
  <span class="kd">public</span> <span class="kd">static</span> <span class="n">Input</span> <span class="nf">randomSelection</span><span class="o">()</span> <span class="o">{</span>
    <span class="c1">// Don&#39;t include STOP:
</span><span class="c1"></span>    <span class="k">return</span> <span class="n">values</span><span class="o">()[</span><span class="n">rand</span><span class="o">.</span><span class="na">nextInt</span><span class="o">(</span><span class="n">values</span><span class="o">().</span><span class="na">length</span> <span class="o">-</span> <span class="n">1</span><span class="o">)];</span>
  <span class="o">}</span>
<span class="o">}</span> <span class="c1">///:~
</span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">  1
</span><span class="lnt">  2
</span><span class="lnt">  3
</span><span class="lnt">  4
</span><span class="lnt">  5
</span><span class="lnt">  6
</span><span class="lnt">  7
</span><span class="lnt">  8
</span><span class="lnt">  9
</span><span class="lnt"> 10
</span><span class="lnt"> 11
</span><span class="lnt"> 12
</span><span class="lnt"> 13
</span><span class="lnt"> 14
</span><span class="lnt"> 15
</span><span class="lnt"> 16
</span><span class="lnt"> 17
</span><span class="lnt"> 18
</span><span class="lnt"> 19
</span><span class="lnt"> 20
</span><span class="lnt"> 21
</span><span class="lnt"> 22
</span><span class="lnt"> 23
</span><span class="lnt"> 24
</span><span class="lnt"> 25
</span><span class="lnt"> 26
</span><span class="lnt"> 27
</span><span class="lnt"> 28
</span><span class="lnt"> 29
</span><span class="lnt"> 30
</span><span class="lnt"> 31
</span><span class="lnt"> 32
</span><span class="lnt"> 33
</span><span class="lnt"> 34
</span><span class="lnt"> 35
</span><span class="lnt"> 36
</span><span class="lnt"> 37
</span><span class="lnt"> 38
</span><span class="lnt"> 39
</span><span class="lnt"> 40
</span><span class="lnt"> 41
</span><span class="lnt"> 42
</span><span class="lnt"> 43
</span><span class="lnt"> 44
</span><span class="lnt"> 45
</span><span class="lnt"> 46
</span><span class="lnt"> 47
</span><span class="lnt"> 48
</span><span class="lnt"> 49
</span><span class="lnt"> 50
</span><span class="lnt"> 51
</span><span class="lnt"> 52
</span><span class="lnt"> 53
</span><span class="lnt"> 54
</span><span class="lnt"> 55
</span><span class="lnt"> 56
</span><span class="lnt"> 57
</span><span class="lnt"> 58
</span><span class="lnt"> 59
</span><span class="lnt"> 60
</span><span class="lnt"> 61
</span><span class="lnt"> 62
</span><span class="lnt"> 63
</span><span class="lnt"> 64
</span><span class="lnt"> 65
</span><span class="lnt"> 66
</span><span class="lnt"> 67
</span><span class="lnt"> 68
</span><span class="lnt"> 69
</span><span class="lnt"> 70
</span><span class="lnt"> 71
</span><span class="lnt"> 72
</span><span class="lnt"> 73
</span><span class="lnt"> 74
</span><span class="lnt"> 75
</span><span class="lnt"> 76
</span><span class="lnt"> 77
</span><span class="lnt"> 78
</span><span class="lnt"> 79
</span><span class="lnt"> 80
</span><span class="lnt"> 81
</span><span class="lnt"> 82
</span><span class="lnt"> 83
</span><span class="lnt"> 84
</span><span class="lnt"> 85
</span><span class="lnt"> 86
</span><span class="lnt"> 87
</span><span class="lnt"> 88
</span><span class="lnt"> 89
</span><span class="lnt"> 90
</span><span class="lnt"> 91
</span><span class="lnt"> 92
</span><span class="lnt"> 93
</span><span class="lnt"> 94
</span><span class="lnt"> 95
</span><span class="lnt"> 96
</span><span class="lnt"> 97
</span><span class="lnt"> 98
</span><span class="lnt"> 99
</span><span class="lnt">100
</span><span class="lnt">101
</span><span class="lnt">102
</span><span class="lnt">103
</span><span class="lnt">104
</span><span class="lnt">105
</span><span class="lnt">106
</span><span class="lnt">107
</span><span class="lnt">108
</span><span class="lnt">109
</span><span class="lnt">110
</span><span class="lnt">111
</span><span class="lnt">112
</span><span class="lnt">113
</span><span class="lnt">114
</span><span class="lnt">115
</span><span class="lnt">116
</span><span class="lnt">117
</span><span class="lnt">118
</span><span class="lnt">119
</span><span class="lnt">120
</span><span class="lnt">121
</span><span class="lnt">122
</span><span class="lnt">123
</span><span class="lnt">124
</span><span class="lnt">125
</span><span class="lnt">126
</span><span class="lnt">127
</span><span class="lnt">128
</span><span class="lnt">129
</span><span class="lnt">130
</span><span class="lnt">131
</span><span class="lnt">132
</span><span class="lnt">133
</span><span class="lnt">134
</span><span class="lnt">135
</span><span class="lnt">136
</span><span class="lnt">137
</span><span class="lnt">138
</span><span class="lnt">139
</span><span class="lnt">140
</span><span class="lnt">141
</span><span class="lnt">142
</span><span class="lnt">143
</span><span class="lnt">144
</span><span class="lnt">145
</span><span class="lnt">146
</span><span class="lnt">147
</span><span class="lnt">148
</span><span class="lnt">149
</span><span class="lnt">150
</span><span class="lnt">151
</span><span class="lnt">152
</span><span class="lnt">153
</span><span class="lnt">154
</span><span class="lnt">155
</span><span class="lnt">156
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="c1">//: enumerated/VendingMachine.java
</span><span class="c1">// {Args: VendingMachineInput.txt}
</span><span class="c1"></span><span class="kn">package</span> <span class="nn">enumerated</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.*</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">net.mindview.util.*</span><span class="o">;</span>
<span class="kn">import static</span> <span class="nn">enumerated.Input.*</span><span class="o">;</span>
<span class="kn">import static</span> <span class="nn">net.mindview.util.Print.*</span><span class="o">;</span>

<span class="kd">enum</span> <span class="n">Category</span> <span class="o">{</span>
  <span class="n">MONEY</span><span class="o">(</span><span class="n">NICKEL</span><span class="o">,</span> <span class="n">DIME</span><span class="o">,</span> <span class="n">QUARTER</span><span class="o">,</span> <span class="n">DOLLAR</span><span class="o">),</span>
  <span class="n">ITEM_SELECTION</span><span class="o">(</span><span class="n">TOOTHPASTE</span><span class="o">,</span> <span class="n">CHIPS</span><span class="o">,</span> <span class="n">SODA</span><span class="o">,</span> <span class="n">SOAP</span><span class="o">),</span>
  <span class="n">QUIT_TRANSACTION</span><span class="o">(</span><span class="n">ABORT_TRANSACTION</span><span class="o">),</span>
  <span class="n">SHUT_DOWN</span><span class="o">(</span><span class="n">STOP</span><span class="o">);</span>
  <span class="kd">private</span> <span class="n">Input</span><span class="o">[]</span> <span class="n">values</span><span class="o">;</span>
  <span class="n">Category</span><span class="o">(</span><span class="n">Input</span><span class="o">...</span> <span class="n">types</span><span class="o">)</span> <span class="o">{</span> <span class="n">values</span> <span class="o">=</span> <span class="n">types</span><span class="o">;</span> <span class="o">}</span>    
  <span class="kd">private</span> <span class="kd">static</span> <span class="n">EnumMap</span><span class="o">&lt;</span><span class="n">Input</span><span class="o">,</span><span class="n">Category</span><span class="o">&gt;</span> <span class="n">categories</span> <span class="o">=</span>
    <span class="k">new</span> <span class="n">EnumMap</span><span class="o">&lt;</span><span class="n">Input</span><span class="o">,</span><span class="n">Category</span><span class="o">&gt;(</span><span class="n">Input</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
  <span class="kd">static</span> <span class="o">{</span>
    <span class="k">for</span><span class="o">(</span><span class="n">Category</span> <span class="n">c</span> <span class="o">:</span> <span class="n">Category</span><span class="o">.</span><span class="na">class</span><span class="o">.</span><span class="na">getEnumConstants</span><span class="o">())</span>
      <span class="k">for</span><span class="o">(</span><span class="n">Input</span> <span class="n">type</span> <span class="o">:</span> <span class="n">c</span><span class="o">.</span><span class="na">values</span><span class="o">)</span>
        <span class="n">categories</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="n">type</span><span class="o">,</span> <span class="n">c</span><span class="o">);</span>
  <span class="o">}</span>
  <span class="kd">public</span> <span class="kd">static</span> <span class="n">Category</span> <span class="nf">categorize</span><span class="o">(</span><span class="n">Input</span> <span class="n">input</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">return</span> <span class="n">categories</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">input</span><span class="o">);</span>
  <span class="o">}</span>
<span class="o">}</span>    

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">VendingMachine</span> <span class="o">{</span>
  <span class="kd">private</span> <span class="kd">static</span> <span class="n">State</span> <span class="n">state</span> <span class="o">=</span> <span class="n">State</span><span class="o">.</span><span class="na">RESTING</span><span class="o">;</span>
  <span class="kd">private</span> <span class="kd">static</span> <span class="kt">int</span> <span class="n">amount</span> <span class="o">=</span> <span class="n">0</span><span class="o">;</span>
  <span class="kd">private</span> <span class="kd">static</span> <span class="n">Input</span> <span class="n">selection</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
  <span class="kd">enum</span> <span class="n">StateDuration</span> <span class="o">{</span> <span class="n">TRANSIENT</span> <span class="o">}</span> <span class="c1">// Tagging enum
</span><span class="c1"></span>  <span class="kd">enum</span> <span class="n">State</span> <span class="o">{</span>
    <span class="n">RESTING</span> <span class="o">{</span>
      <span class="kt">void</span> <span class="nf">next</span><span class="o">(</span><span class="n">Input</span> <span class="n">input</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">switch</span><span class="o">(</span><span class="n">Category</span><span class="o">.</span><span class="na">categorize</span><span class="o">(</span><span class="n">input</span><span class="o">))</span> <span class="o">{</span>
          <span class="k">case</span> <span class="n">MONEY</span><span class="o">:</span>
            <span class="n">amount</span> <span class="o">+=</span> <span class="n">input</span><span class="o">.</span><span class="na">amount</span><span class="o">();</span>
            <span class="n">state</span> <span class="o">=</span> <span class="n">ADDING_MONEY</span><span class="o">;</span>
            <span class="k">break</span><span class="o">;</span>
          <span class="k">case</span> <span class="n">SHUT_DOWN</span><span class="o">:</span>
            <span class="n">state</span> <span class="o">=</span> <span class="n">TERMINAL</span><span class="o">;</span>
          <span class="k">default</span><span class="o">:</span>
        <span class="o">}</span>
      <span class="o">}</span>
    <span class="o">},</span>    
    <span class="n">ADDING_MONEY</span> <span class="o">{</span>
      <span class="kt">void</span> <span class="nf">next</span><span class="o">(</span><span class="n">Input</span> <span class="n">input</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">switch</span><span class="o">(</span><span class="n">Category</span><span class="o">.</span><span class="na">categorize</span><span class="o">(</span><span class="n">input</span><span class="o">))</span> <span class="o">{</span>
          <span class="k">case</span> <span class="n">MONEY</span><span class="o">:</span>
            <span class="n">amount</span> <span class="o">+=</span> <span class="n">input</span><span class="o">.</span><span class="na">amount</span><span class="o">();</span>
            <span class="k">break</span><span class="o">;</span>
          <span class="k">case</span> <span class="n">ITEM_SELECTION</span><span class="o">:</span>
            <span class="n">selection</span> <span class="o">=</span> <span class="n">input</span><span class="o">;</span>
            <span class="k">if</span><span class="o">(</span><span class="n">amount</span> <span class="o">&lt;</span> <span class="n">selection</span><span class="o">.</span><span class="na">amount</span><span class="o">())</span>
              <span class="n">print</span><span class="o">(</span><span class="s">&#34;Insufficient money for &#34;</span> <span class="o">+</span> <span class="n">selection</span><span class="o">);</span>
            <span class="k">else</span> <span class="n">state</span> <span class="o">=</span> <span class="n">DISPENSING</span><span class="o">;</span>
            <span class="k">break</span><span class="o">;</span>
          <span class="k">case</span> <span class="n">QUIT_TRANSACTION</span><span class="o">:</span>
            <span class="n">state</span> <span class="o">=</span> <span class="n">GIVING_CHANGE</span><span class="o">;</span>
            <span class="k">break</span><span class="o">;</span>
          <span class="k">case</span> <span class="n">SHUT_DOWN</span><span class="o">:</span>
            <span class="n">state</span> <span class="o">=</span> <span class="n">TERMINAL</span><span class="o">;</span>
          <span class="k">default</span><span class="o">:</span>
        <span class="o">}</span>
      <span class="o">}</span>
    <span class="o">},</span>    
    <span class="n">DISPENSING</span><span class="o">(</span><span class="n">StateDuration</span><span class="o">.</span><span class="na">TRANSIENT</span><span class="o">)</span> <span class="o">{</span>
      <span class="kt">void</span> <span class="nf">next</span><span class="o">()</span> <span class="o">{</span>
        <span class="n">print</span><span class="o">(</span><span class="s">&#34;here is your &#34;</span> <span class="o">+</span> <span class="n">selection</span><span class="o">);</span>
        <span class="n">amount</span> <span class="o">-=</span> <span class="n">selection</span><span class="o">.</span><span class="na">amount</span><span class="o">();</span>
        <span class="n">state</span> <span class="o">=</span> <span class="n">GIVING_CHANGE</span><span class="o">;</span>
      <span class="o">}</span>
    <span class="o">},</span>
    <span class="n">GIVING_CHANGE</span><span class="o">(</span><span class="n">StateDuration</span><span class="o">.</span><span class="na">TRANSIENT</span><span class="o">)</span> <span class="o">{</span>
      <span class="kt">void</span> <span class="nf">next</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">if</span><span class="o">(</span><span class="n">amount</span> <span class="o">&gt;</span> <span class="n">0</span><span class="o">)</span> <span class="o">{</span>
          <span class="n">print</span><span class="o">(</span><span class="s">&#34;Your change: &#34;</span> <span class="o">+</span> <span class="n">amount</span><span class="o">);</span>
          <span class="n">amount</span> <span class="o">=</span> <span class="n">0</span><span class="o">;</span>
        <span class="o">}</span>
        <span class="n">state</span> <span class="o">=</span> <span class="n">RESTING</span><span class="o">;</span>
      <span class="o">}</span>
    <span class="o">},</span>    
    <span class="n">TERMINAL</span> <span class="o">{</span> <span class="kt">void</span> <span class="nf">output</span><span class="o">()</span> <span class="o">{</span> <span class="n">print</span><span class="o">(</span><span class="s">&#34;Halted&#34;</span><span class="o">);</span> <span class="o">}</span> <span class="o">};</span>
    <span class="kd">private</span> <span class="kt">boolean</span> <span class="n">isTransient</span> <span class="o">=</span> <span class="kc">false</span><span class="o">;</span>
    <span class="n">State</span><span class="o">()</span> <span class="o">{}</span>
    <span class="n">State</span><span class="o">(</span><span class="n">StateDuration</span> <span class="n">trans</span><span class="o">)</span> <span class="o">{</span> <span class="n">isTransient</span> <span class="o">=</span> <span class="kc">true</span><span class="o">;</span> <span class="o">}</span>
    <span class="kt">void</span> <span class="nf">next</span><span class="o">(</span><span class="n">Input</span> <span class="n">input</span><span class="o">)</span> <span class="o">{</span>
      <span class="k">throw</span> <span class="k">new</span> <span class="n">RuntimeException</span><span class="o">(</span><span class="s">&#34;Only call &#34;</span> <span class="o">+</span>
        <span class="s">&#34;next(Input input) for non-transient states&#34;</span><span class="o">);</span>
    <span class="o">}</span>
    <span class="kt">void</span> <span class="nf">next</span><span class="o">()</span> <span class="o">{</span>
      <span class="k">throw</span> <span class="k">new</span> <span class="n">RuntimeException</span><span class="o">(</span><span class="s">&#34;Only call next() for &#34;</span> <span class="o">+</span>
        <span class="s">&#34;StateDuration.TRANSIENT states&#34;</span><span class="o">);</span>
    <span class="o">}</span>
    <span class="kt">void</span> <span class="nf">output</span><span class="o">()</span> <span class="o">{</span> <span class="n">print</span><span class="o">(</span><span class="n">amount</span><span class="o">);</span> <span class="o">}</span>
  <span class="o">}</span>    
  <span class="kd">static</span> <span class="kt">void</span> <span class="nf">run</span><span class="o">(</span><span class="n">Generator</span><span class="o">&lt;</span><span class="n">Input</span><span class="o">&gt;</span> <span class="n">gen</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">while</span><span class="o">(</span><span class="n">state</span> <span class="o">!=</span> <span class="n">State</span><span class="o">.</span><span class="na">TERMINAL</span><span class="o">)</span> <span class="o">{</span>
      <span class="n">state</span><span class="o">.</span><span class="na">next</span><span class="o">(</span><span class="n">gen</span><span class="o">.</span><span class="na">next</span><span class="o">());</span>
      <span class="k">while</span><span class="o">(</span><span class="n">state</span><span class="o">.</span><span class="na">isTransient</span><span class="o">)</span>
        <span class="n">state</span><span class="o">.</span><span class="na">next</span><span class="o">();</span>
      <span class="n">state</span><span class="o">.</span><span class="na">output</span><span class="o">();</span>
    <span class="o">}</span>
  <span class="o">}</span>
  <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">Generator</span><span class="o">&lt;</span><span class="n">Input</span><span class="o">&gt;</span> <span class="n">gen</span> <span class="o">=</span> <span class="k">new</span> <span class="n">RandomInputGenerator</span><span class="o">();</span>
    <span class="k">if</span><span class="o">(</span><span class="n">args</span><span class="o">.</span><span class="na">length</span> <span class="o">==</span> <span class="n">1</span><span class="o">)</span>
      <span class="n">gen</span> <span class="o">=</span> <span class="k">new</span> <span class="n">FileInputGenerator</span><span class="o">(</span><span class="n">args</span><span class="o">[</span><span class="n">0</span><span class="o">]);</span>
    <span class="n">run</span><span class="o">(</span><span class="n">gen</span><span class="o">);</span>
  <span class="o">}</span>
<span class="o">}</span>    

<span class="c1">// For a basic sanity check:
</span><span class="c1"></span><span class="kd">class</span> <span class="nc">RandomInputGenerator</span> <span class="kd">implements</span> <span class="n">Generator</span><span class="o">&lt;</span><span class="n">Input</span><span class="o">&gt;</span> <span class="o">{</span>
  <span class="kd">public</span> <span class="n">Input</span> <span class="nf">next</span><span class="o">()</span> <span class="o">{</span> <span class="k">return</span> <span class="n">Input</span><span class="o">.</span><span class="na">randomSelection</span><span class="o">();</span> <span class="o">}</span>
<span class="o">}</span>

<span class="c1">// Create Inputs from a file of &#39;;&#39;-separated strings:
</span><span class="c1"></span><span class="kd">class</span> <span class="nc">FileInputGenerator</span> <span class="kd">implements</span> <span class="n">Generator</span><span class="o">&lt;</span><span class="n">Input</span><span class="o">&gt;</span> <span class="o">{</span>
  <span class="kd">private</span> <span class="n">Iterator</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">input</span><span class="o">;</span>
  <span class="kd">public</span> <span class="nf">FileInputGenerator</span><span class="o">(</span><span class="n">String</span> <span class="n">fileName</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">input</span> <span class="o">=</span> <span class="k">new</span> <span class="n">TextFile</span><span class="o">(</span><span class="n">fileName</span><span class="o">,</span> <span class="s">&#34;;&#34;</span><span class="o">).</span><span class="na">iterator</span><span class="o">();</span>
  <span class="o">}</span>
  <span class="kd">public</span> <span class="n">Input</span> <span class="nf">next</span><span class="o">()</span> <span class="o">{</span>
    <span class="k">if</span><span class="o">(!</span><span class="n">input</span><span class="o">.</span><span class="na">hasNext</span><span class="o">())</span>
      <span class="k">return</span> <span class="kc">null</span><span class="o">;</span>
    <span class="k">return</span> <span class="n">Enum</span><span class="o">.</span><span class="na">valueOf</span><span class="o">(</span><span class="n">Input</span><span class="o">.</span><span class="na">class</span><span class="o">,</span> <span class="n">input</span><span class="o">.</span><span class="na">next</span><span class="o">().</span><span class="na">trim</span><span class="o">());</span>
  <span class="o">}</span>
<span class="o">}</span> <span class="cm">/* Output:
</span><span class="cm">25
</span><span class="cm">50
</span><span class="cm">75
</span><span class="cm">here is your CHIPS
</span><span class="cm">0
</span><span class="cm">100
</span><span class="cm">200
</span><span class="cm">here is your TOOTHPASTE
</span><span class="cm">0
</span><span class="cm">25
</span><span class="cm">35
</span><span class="cm">Your change: 35
</span><span class="cm">0
</span><span class="cm">25
</span><span class="cm">35
</span><span class="cm">Insufficient money for SODA
</span><span class="cm">35
</span><span class="cm">60
</span><span class="cm">70
</span><span class="cm">75
</span><span class="cm">Insufficient money for SODA
</span><span class="cm">75
</span><span class="cm">Your change: 75
</span><span class="cm">0
</span><span class="cm">Halted
</span><span class="cm">*/</span><span class="c1">//:~
</span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-text" data-lang="text">QUARTER; QUARTER; QUARTER; CHIPS;
DOLLAR; DOLLAR; TOOTHPASTE;
QUARTER; DIME; ABORT_TRANSACTION;
QUARTER; DIME; SODA;
QUARTER; DIME; NICKEL; SODA;
ABORT_TRANSACTION;
STOP;
</code></pre></td></tr></table>
</div>
</div><h2 id="11多路分发">11.多路分发</h2>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span><span class="lnt">53
</span><span class="lnt">54
</span><span class="lnt">55
</span><span class="lnt">56
</span><span class="lnt">57
</span><span class="lnt">58
</span><span class="lnt">59
</span><span class="lnt">60
</span><span class="lnt">61
</span><span class="lnt">62
</span><span class="lnt">63
</span><span class="lnt">64
</span><span class="lnt">65
</span><span class="lnt">66
</span><span class="lnt">67
</span><span class="lnt">68
</span><span class="lnt">69
</span><span class="lnt">70
</span><span class="lnt">71
</span><span class="lnt">72
</span><span class="lnt">73
</span><span class="lnt">74
</span><span class="lnt">75
</span><span class="lnt">76
</span><span class="lnt">77
</span><span class="lnt">78
</span><span class="lnt">79
</span><span class="lnt">80
</span><span class="lnt">81
</span><span class="lnt">82
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-text" data-lang="text">//: enumerated/Outcome.java
package enumerated;
public enum Outcome { WIN, LOSE, DRAW } ///:~

//: enumerated/RoShamBo1.java
// Demonstration of multiple dispatching.
package enumerated;
import java.util.*;
import static enumerated.Outcome.*;

interface Item {
  Outcome compete(Item it);
  Outcome eval(Paper p);
  Outcome eval(Scissors s);
  Outcome eval(Rock r);
}

class Paper implements Item {
  public Outcome compete(Item it) { return it.eval(this); }
  public Outcome eval(Paper p) { return DRAW; }
  public Outcome eval(Scissors s) { return WIN; }
  public Outcome eval(Rock r) { return LOSE; }
  public String toString() { return &#34;Paper&#34;; }
}    

class Scissors implements Item {
  public Outcome compete(Item it) { return it.eval(this); }
  public Outcome eval(Paper p) { return LOSE; }
  public Outcome eval(Scissors s) { return DRAW; }
  public Outcome eval(Rock r) { return WIN; }
  public String toString() { return &#34;Scissors&#34;; }
}

class Rock implements Item {
  public Outcome compete(Item it) { return it.eval(this); }
  public Outcome eval(Paper p) { return WIN; }
  public Outcome eval(Scissors s) { return LOSE; }
  public Outcome eval(Rock r) { return DRAW; }
  public String toString() { return &#34;Rock&#34;; }
}    

public class RoShamBo1 {
  static final int SIZE = 20;
  private static Random rand = new Random(47);
  public static Item newItem() {
    switch(rand.nextInt(3)) {
      default:
      case 0: return new Scissors();
      case 1: return new Paper();
      case 2: return new Rock();
    }
  }
  public static void match(Item a, Item b) {
    System.out.println(
      a + &#34; vs. &#34; + b + &#34;: &#34; +  a.compete(b));
  }
  public static void main(String[] args) {
    for(int i = 0; i &lt; SIZE; i++)
      match(newItem(), newItem());
  }
} /* Output:    
Rock vs. Rock: DRAW
Paper vs. Rock: WIN
Paper vs. Rock: WIN
Paper vs. Rock: WIN
Scissors vs. Paper: WIN
Scissors vs. Scissors: DRAW
Scissors vs. Paper: WIN
Rock vs. Paper: LOSE
Paper vs. Paper: DRAW
Rock vs. Paper: LOSE
Paper vs. Scissors: LOSE
Paper vs. Scissors: LOSE
Rock vs. Scissors: WIN
Rock vs. Paper: LOSE
Paper vs. Rock: WIN
Scissors vs. Paper: WIN
Paper vs. Scissors: LOSE
Paper vs. Scissors: LOSE
Paper vs. Scissors: LOSE
Paper vs. Scissors: LOSE
*///:~
</code></pre></td></tr></table>
</div>
</div><h3 id="111-使用enum分发">11.1 使用enum分发</h3>
<h3 id="112-使用常量相关的方法">11.2 使用常量相关的方法</h3>
<h3 id="114-使用二维数组">11.4 使用二维数组</h3>

    </div>

    <div class="post-copyright">
  <p class="copyright-item">
    <span class="item-title">文章作者</span>
    <span class="item-content">malinkang</span>
  </p>
  <p class="copyright-item">
    <span class="item-title">上次更新</span>
    <span class="item-content">
        2013-07-16
        
    </span>
  </p>
  
  
</div>
<footer class="post-footer">
      <div class="post-tags">
          <a href="/tags/thinking-in-java/">Thinking in Java</a>
          </div>
      <nav class="post-nav">
        <a class="prev" href="/post/thinking-in-java-annotations/">
            <i class="iconfont icon-left"></i>
            <span class="prev-text nav-default">《Java编程思想》第20章注解</span>
            <span class="prev-text nav-mobile">上一篇</span>
          </a>
        <a class="next" href="/post/thinking-in-java-i-o/">
            <span class="next-text nav-default">《Java编程思想》第18章I/O系统</span>
            <span class="next-text nav-mobile">下一篇</span>
            <i class="iconfont icon-right"></i>
          </a>
      </nav>
    </footer>
  </article>
        </div>
        <div id="disqus_thread"></div>
    <script type="text/javascript">
    (function() {
      
      
      if (window.location.hostname === 'localhost') return;

      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      var disqus_shortname = 'malinkang-cn';
      dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
    </script>
    <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>

  

  

      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="social-links">
      <a href="https://twitter.com/malinkang" class="iconfont icon-twitter" title="twitter"></a>
      <a href="https://github.com/malinkang" class="iconfont icon-github" title="github"></a>
      <a href="https://weibo.com/malinkang" class="iconfont icon-weibo" title="weibo"></a>
  <a href="https://malinkang.cn/index.xml" type="application/rss+xml" class="iconfont icon-rss" title="rss"></a>
</div>

<div class="copyright">
  <span class="power-by">
    由 <a class="hexo-link" href="https://gohugo.io">Hugo</a> 强力驱动
  </span>
  <span class="division">|</span>
  <span class="theme-info">
    主题 - 
    <a class="theme-link" href="https://github.com/olOwOlo/hugo-theme-even">Even</a>
  </span>

  

  <span class="copyright-year">
    &copy; 
    2017 - 
    2021
    <span class="heart">
      <i class="iconfont icon-heart"></i>
    </span>
    <span class="author">malinkang</span>
  </span>
</div>
    </footer>

    <div class="back-to-top" id="back-to-top">
      <i class="iconfont icon-up"></i>
    </div>
  </div>
  
  <script src="https://cdn.jsdelivr.net/npm/jquery@3.2.1/dist/jquery.min.js" integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/slideout@1.0.1/dist/slideout.min.js" integrity="sha256-t+zJ/g8/KXIJMjSVQdnibt4dlaDxc9zXr/9oNPeWqdg=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.1.20/dist/jquery.fancybox.min.js" integrity="sha256-XVLffZaxoWfGUEbdzuLi7pwaUJv1cecsQJQqGLe7axY=" crossorigin="anonymous"></script>



<script type="text/javascript" src="/js/main.min.d7b7ada643c9c1a983026e177f141f7363b4640d619caf01d8831a6718cd44ea.js"></script>
  <script type="text/javascript">
    window.MathJax = {
      showProcessingMessages: false,
      messageStyle: 'none'
    };
  </script>
  <script async src="https://cdn.jsdelivr.net/npm/mathjax@2.7.5/MathJax.js?config=TeX-MML-AM_CHTML"  integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>








</body>
</html>
