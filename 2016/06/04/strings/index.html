<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>《Java编程思想》读书笔记第13章字符串 | 马林康的博客</title><meta name="keywords" content="Java,读书笔记"><meta name="author" content="马林康"><meta name="copyright" content="马林康"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><meta name="description" content="第13章 字符串13.1 不可变String12345678910111213public class Immutable &amp;#123;    public static String upcase(String s)&amp;#123;        return s.toUpperCase();    &amp;#125;    public static void main(String[] args) &amp;">
<meta property="og:type" content="article">
<meta property="og:title" content="《Java编程思想》读书笔记第13章字符串">
<meta property="og:url" content="https://malinkang.cn/2016/06/04/strings/index.html">
<meta property="og:site_name" content="马林康的博客">
<meta property="og:description" content="第13章 字符串13.1 不可变String12345678910111213public class Immutable &amp;#123;    public static String upcase(String s)&amp;#123;        return s.toUpperCase();    &amp;#125;    public static void main(String[] args) &amp;">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/img/default.jpg">
<meta property="article:published_time" content="2016-06-04T05:39:36.000Z">
<meta property="article:modified_time" content="2020-12-30T07:28:52.148Z">
<meta property="article:author" content="马林康">
<meta property="article:tag" content="Java">
<meta property="article:tag" content="读书笔记">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/img/default.jpg"><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="https://malinkang.cn/2016/06/04/strings/"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css"><script>var GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  ClickShowText: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  source: {
    jQuery: 'https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js',
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/js/jquery.justifiedGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/css/justifiedGallery.min.css'
    },
    fancybox: {
      js: 'https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js',
      css: 'https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isanchor: false
};

var saveToLocal = {
  set: function setWithExpiry(key, value, ttl) {
    const now = new Date()
    const expiryDay = ttl * 86400000
    const item = {
      value: value,
      expiry: now.getTime() + expiryDay,
    }
    localStorage.setItem(key, JSON.stringify(item))
  },

  get: function getWithExpiry(key) {
    const itemStr = localStorage.getItem(key)

    if (!itemStr) {
      return undefined
    }
    const item = JSON.parse(itemStr)
    const now = new Date()

    if (now.getTime() > item.expiry) {
      localStorage.removeItem(key)
      return undefined
    }
    return item.value
  }
}

// https://stackoverflow.com/questions/16839698/jquery-getscript-alternative-in-native-javascript
const getScript = url => new Promise((resolve, reject) => {
  const script = document.createElement('script')
  script.src = url
  script.async = true
  script.onerror = reject
  script.onload = script.onreadystatechange = function() {
    const loadState = this.readyState
    if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
    script.onload = script.onreadystatechange = null
    resolve()
  }
  document.head.appendChild(script)
})</script><script id="config_change">var GLOBAL_CONFIG_SITE = { 
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2020-12-30 15:28:52'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(function () {  window.activateDarkMode = function () {
    document.documentElement.setAttribute('data-theme', 'dark')
    if (document.querySelector('meta[name="theme-color"]') !== null) {
      document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
    }
  }
  window.activateLightMode = function () {
    document.documentElement.setAttribute('data-theme', 'light')
   if (document.querySelector('meta[name="theme-color"]') !== null) {
      document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
    }
  }
  const autoChangeMode = 'false'
  const t = saveToLocal.get('theme')
  if (autoChangeMode === '1') {
    const isDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches
    const isLightMode = window.matchMedia('(prefers-color-scheme: light)').matches
    const isNotSpecified = window.matchMedia('(prefers-color-scheme: no-preference)').matches
    const hasNoSupport = !isDarkMode && !isLightMode && !isNotSpecified
    if (t === undefined) {
      if (isLightMode) activateLightMode()
      else if (isDarkMode) activateDarkMode()
      else if (isNotSpecified || hasNoSupport) {
        const now = new Date()
        const hour = now.getHours()
        const isNight = hour <= 6 || hour >= 18
        isNight ? activateDarkMode() : activateLightMode()
      }
      window.matchMedia('(prefers-color-scheme: dark)').addListener(function (e) {
        if (saveToLocal.get('theme') === undefined) {
          e.matches ? activateDarkMode() : activateLightMode()
        }
      })
    } else if (t === 'light') activateLightMode()
    else activateDarkMode()
  } else if (autoChangeMode === '2') {
    const now = new Date()
    const hour = now.getHours()
    const isNight = hour <= 6 || hour >= 18
    if (t === undefined) isNight ? activateDarkMode() : activateLightMode()
    else if (t === 'light') activateLightMode()
    else activateDarkMode()
  } else {
    if (t === 'dark') activateDarkMode()
    else if (t === 'light') activateLightMode()
  }const asideStatus = saveToLocal.get('aside-status')
if (asideStatus !== undefined) {
   if (asideStatus === 'hide') {
     document.documentElement.classList.add('hide-aside')
   } else {
     document.documentElement.classList.remove('hide-aside')
   }
}})()</script><meta name="generator" content="Hexo 5.2.0"></head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="author-avatar"><img class="avatar-img" src="/img/avatar.jpeg" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="site-data"><div class="data-item is-center"><div class="data-item-link"><a href="/archives/"><div class="headline">文章</div><div class="length-num">43</div></a></div></div><div class="data-item is-center"><div class="data-item-link"><a href="/tags/"><div class="headline">标签</div><div class="length-num">3</div></a></div></div></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><i class="fa-fw fas fa-list"></i><span> 笔记</span><i class="fas fa-chevron-down expand"></i></a><ul class="menus_item_child"><li><a class="site-page" target="_blank" rel="noopener" href="https://leetcode.malinkang.cn/"><i class="fa-fw fas fa-link"></i><span> LeetCode解题</span></a></li><li><a class="site-page" href="/movies/"><i class="fa-fw fas fa-video"></i><span> Movie</span></a></li></ul></div></div></div></div><div id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url(https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/img/default.jpg)"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">马林康的博客</a></span><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><i class="fa-fw fas fa-list"></i><span> 笔记</span><i class="fas fa-chevron-down expand"></i></a><ul class="menus_item_child"><li><a class="site-page" target="_blank" rel="noopener" href="https://leetcode.malinkang.cn/"><i class="fa-fw fas fa-link"></i><span> LeetCode解题</span></a></li><li><a class="site-page" href="/movies/"><i class="fa-fw fas fa-video"></i><span> Movie</span></a></li></ul></div></div><div id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">《Java编程思想》读书笔记第13章字符串</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2016-06-04T05:39:36.000Z" title="发表于 2016-06-04 13:39:36">2016-06-04</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2020-12-30T07:28:52.148Z" title="更新于 2020-12-30 15:28:52">2020-12-30</time></span></div><div class="meta-secondline"> <span class="post-meta-separator">|</span><span class="post-meta-pv-cv"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="busuanzi_value_page_pv"></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h1 id="第13章-字符串"><a href="#第13章-字符串" class="headerlink" title="第13章 字符串"></a>第13章 字符串</h1><h2 id="13-1-不可变String"><a href="#13-1-不可变String" class="headerlink" title="13.1 不可变String"></a>13.1 不可变String</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Immutable</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> String <span class="title">upcase</span><span class="params">(String s)</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> s.toUpperCase();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        String q = <span class="string">&quot;howdy&quot;</span>;</span><br><span class="line">        System.out.println(q);</span><br><span class="line">        String qq = upcase(q);</span><br><span class="line">        System.out.println(qq);</span><br><span class="line">        System.out.println(q);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>当把<code>q</code>传给<code>upcase()</code>方法时，实际传递的是引用的一份拷贝。其实，<strong>每当把</strong><code>String</code><strong>对象作为方法的参数时，都会复制一份引用</strong>，而该引用所指的对象其实一直待在单一的物理位置上，从未动过。</p>
<p>回到<code>upcase()</code>的定义，传入其中的引用有了名字<code>s</code>,只有<code>upcase()</code>运行的时候，局部引用<code>s</code>才存在。一旦<code>upcase()</code>运行结束，<code>s</code>就消失了。当然了，<code>upcase()</code>的返回值，其实只是最终结果的引用。这足以说明，<code>upcase()</code>返回的引用已经指向了一个新的对象，而原本的<code>q</code>则还在原地。</p>
<h2 id="13-2-重载“-”与StringBuilder"><a href="#13-2-重载“-”与StringBuilder" class="headerlink" title="13.2 重载“+”与StringBuilder"></a>13.2 重载“+”与StringBuilder</h2><p>操作符“+”可以用来连接<code>String</code>。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Concatenation</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        String mango =  <span class="string">&quot;mango&quot;</span>;</span><br><span class="line">        String s = <span class="string">&quot;abc&quot;</span>+mango+<span class="string">&quot;def&quot;</span>+<span class="number">47</span>;</span><br><span class="line">        System.out.println(s);<span class="comment">//abcmangodef47</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>用<code>JDK</code>自带的工具<code>javap</code>来反编译以上代码。命令如下</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">javap -c Concatenation</span><br></pre></td></tr></table></figure>

<p><code>-c</code>标志表示将生成<code>JVM</code>字节码。剔除不感兴趣的部分，有了以下的字节码。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(java.lang.String[])</span></span>;</span><br><span class="line">Code:</span><br><span class="line">   0: ldc           #2                  // String mango</span><br><span class="line">   <span class="number">2</span>: astore_1</span><br><span class="line">   3: new           #3                  // class java/lang/StringBuilder</span><br><span class="line">   <span class="number">6</span>: dup</span><br><span class="line">   7: invokespecial #4                  // Method java/lang/StringBuilder.&quot;&lt;init&gt;&quot;:()V</span><br><span class="line">  10: ldc           #5                  // String abc</span><br><span class="line">  12: invokevirtual #6                  // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;</span><br><span class="line">  <span class="number">15</span>: aload_1</span><br><span class="line">  16: invokevirtual #6                  // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;</span><br><span class="line">  19: ldc           #7                  // String def</span><br><span class="line">  21: invokevirtual #6                  // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;</span><br><span class="line">  <span class="number">24</span>: bipush        <span class="number">47</span></span><br><span class="line">  26: invokevirtual #8                  // Method java/lang/StringBuilder.append:(I)Ljava/lang/StringBuilder;</span><br><span class="line">  29: invokevirtual #9                  // Method java/lang/StringBuilder.toString:()Ljava/lang/String;</span><br><span class="line">  <span class="number">32</span>: astore_2</span><br><span class="line">  33: getstatic     #10                 // Field java/lang/System.out:Ljava/io/PrintStream;</span><br><span class="line">  <span class="number">36</span>: aload_2</span><br><span class="line">  37: invokevirtual #11                 // Method java/io/PrintStream.println:(Ljava/lang/String;)V</span><br><span class="line">  <span class="number">40</span>: <span class="keyword">return</span></span><br></pre></td></tr></table></figure>

<p><code>dup</code>与<code>invokevirtual</code>语句相当于<code>Java</code>虚拟机上的汇编语句。</p>
<p>在这个例子中，编译器创建了一个<code>StringBuilder</code>对象，用以构建最终的<code>String</code>，并未每个字符串调用一次<code>StringBuilder</code>的<code>append()</code>方法，总计四次。最后调用<code>toString()</code>生成结果，并存为<code>s</code>。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">WhitherStringBuilder</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">implicit</span><span class="params">(String[] fields)</span> </span>&#123;</span><br><span class="line">        String result = <span class="string">&quot;&quot;</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; fields.length; i++) &#123;</span><br><span class="line">            result += fields[i];</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">explicit</span><span class="params">(String[] fields)</span> </span>&#123;</span><br><span class="line">        StringBuilder result = <span class="keyword">new</span> StringBuilder();</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; fields.length; i++) &#123;</span><br><span class="line">            result.append(fields[i]);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> result.toString();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>运行<code>javap -c WhitherStringBuilder</code>。</p>
<p><code>implicit()</code>方法对应的字节码：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> java.lang.<span class="function">String <span class="title">implicit</span><span class="params">(java.lang.String[])</span></span>;</span><br><span class="line">Code:</span><br><span class="line">   0: ldc           #2                  // String</span><br><span class="line">   <span class="number">2</span>: astore_2</span><br><span class="line">   <span class="number">3</span>: iconst_0</span><br><span class="line">   <span class="number">4</span>: istore_3</span><br><span class="line">   <span class="number">5</span>: iload_3</span><br><span class="line">   <span class="number">6</span>: aload_1</span><br><span class="line">   <span class="number">7</span>: arraylength</span><br><span class="line">   <span class="number">8</span>: if_icmpge     <span class="number">38</span></span><br><span class="line">  11: new           #3                  // class java/lang/StringBuilder</span><br><span class="line">  <span class="number">14</span>: dup</span><br><span class="line">  15: invokespecial #4                  // Method java/lang/StringBuilder.&quot;&lt;init&gt;&quot;:()V</span><br><span class="line">  <span class="number">18</span>: aload_2</span><br><span class="line">  19: invokevirtual #5                  // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;</span><br><span class="line">  <span class="number">22</span>: aload_1</span><br><span class="line">  <span class="number">23</span>: iload_3</span><br><span class="line">  <span class="number">24</span>: aaload</span><br><span class="line">  25: invokevirtual #5                  // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;</span><br><span class="line">  28: invokevirtual #6                  // Method java/lang/StringBuilder.toString:()Ljava/lang/String;</span><br><span class="line">  <span class="number">31</span>: astore_2</span><br><span class="line">  <span class="number">32</span>: iinc          <span class="number">3</span>, <span class="number">1</span></span><br><span class="line">  <span class="number">35</span>: goto          <span class="number">5</span></span><br><span class="line">  <span class="number">38</span>: aload_2</span><br><span class="line">  <span class="number">39</span>: areturn</span><br></pre></td></tr></table></figure>

<p>从第8行到第35行构成了一个循环体。第8行：对堆栈中的操作数进行“大于或等于的整数比较运算”，循环结束时跳到第38行。第35行：返回循环体的起始点第5行。要注意的重点是：<code>StringBuilder</code>是在循环之内构造的，这意味着没经过循环一次，就会创建一个新的<code>StringBuilder</code>对象。</p>
<p><code>explicit()</code>方法对应的字节码：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> java.lang.<span class="function">String <span class="title">explicit</span><span class="params">(java.lang.String[])</span></span>;</span><br><span class="line">Code:</span><br><span class="line">   0: new           #3                  // class java/lang/StringBuilder</span><br><span class="line">   <span class="number">3</span>: dup</span><br><span class="line">   4: invokespecial #4                  // Method java/lang/StringBuilder.&quot;&lt;init&gt;&quot;:()V</span><br><span class="line">   <span class="number">7</span>: astore_2</span><br><span class="line">   <span class="number">8</span>: iconst_0</span><br><span class="line">   <span class="number">9</span>: istore_3</span><br><span class="line">  <span class="number">10</span>: iload_3</span><br><span class="line">  <span class="number">11</span>: aload_1</span><br><span class="line">  <span class="number">12</span>: arraylength</span><br><span class="line">  <span class="number">13</span>: if_icmpge     <span class="number">30</span></span><br><span class="line">  <span class="number">16</span>: aload_2</span><br><span class="line">  <span class="number">17</span>: aload_1</span><br><span class="line">  <span class="number">18</span>: iload_3</span><br><span class="line">  <span class="number">19</span>: aaload</span><br><span class="line">  20: invokevirtual #5                  // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;</span><br><span class="line">  <span class="number">23</span>: pop</span><br><span class="line">  <span class="number">24</span>: iinc          <span class="number">3</span>, <span class="number">1</span></span><br><span class="line">  <span class="number">27</span>: goto          <span class="number">10</span></span><br><span class="line">  <span class="number">30</span>: aload_2</span><br><span class="line">  31: invokevirtual #6                  // Method java/lang/StringBuilder.toString:()Ljava/lang/String;</span><br><span class="line">  <span class="number">34</span>: areturn</span><br></pre></td></tr></table></figure>

<p>可以看到，不仅循环部分的代码更简短、更简单，并且它只生成了一个<code>StringBuilder</code>对象。显式地创建<code>StringBuilder</code>还允许你预先指定<code>StringBuilder</code>的大小，避免多次重新分配缓存。</p>
<p>因此，当为一个类编写<code>toString()</code>方法时，如果字符串操作比较简单，那就可以信赖编译器，他会为你合理地构造最终的字符串结果。但是，如果你要在<code>toString()</code>方法中使用循环，那么最好自己创建一个<code>StringBuilder</code>对象，用它来构造最终的结果。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UsingStringBuilder</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> Random rand = <span class="keyword">new</span> Random(<span class="number">47</span>);</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        StringBuilder result = <span class="keyword">new</span> StringBuilder(<span class="string">&quot;[&quot;</span>);</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">25</span>; i++) &#123;</span><br><span class="line">            result.append(rand.nextInt(<span class="number">100</span>));</span><br><span class="line">            result.append(<span class="string">&quot;, &quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        result.delete(result.length() - <span class="number">2</span>, result.length());</span><br><span class="line">        result.append(<span class="string">&quot;]&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> result.toString();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        UsingStringBuilder usb = <span class="keyword">new</span> UsingStringBuilder();</span><br><span class="line">        System.out.println(usb);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">[58, 55, 93, 61, 61, 29, 68, 0, 22, 7, 88, 28, 51, 89, </span></span><br><span class="line"><span class="comment">9, 78, 98, 61, 20, 58, 16, 40, 11, 22, 4]</span></span><br><span class="line"><span class="comment"> */</span></span><br></pre></td></tr></table></figure>

<h2 id="13-3-无意识的递归"><a href="#13-3-无意识的递归" class="headerlink" title="13.3 无意识的递归"></a>13.3 无意识的递归</h2><p><code>Java</code>中的每个类从根本上都是继承自<code>Object</code>，标准容器类自然也不例外。因此容器类都有<code>toString()</code>方法，覆写了该方法，使得它生成的<code>String</code>结果能够表达容器自身，以及容器所包含的对象。例如<code>ArrayList.toString()</code>，它会遍历<code>ArrayList</code>中包含的所有对象，调用每个元素上的<code>toString()</code>方法：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ArrayListDisplay</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        ArrayList&lt;Coffee&gt; coffees = <span class="keyword">new</span> ArrayList&lt;Coffee&gt;();</span><br><span class="line">        <span class="keyword">for</span> (Coffee coffee : <span class="keyword">new</span> CoffeeGenerator(<span class="number">10</span>)) &#123;</span><br><span class="line">            coffees.add(coffee);</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(coffees);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">[Americano 0, Latte 1, Americano 2, Mocha 3, Mocha 4, Breve 5,</span></span><br><span class="line"><span class="comment">Americano 6, Latte 7, Cappuccino 8, Cappuccino 9]</span></span><br><span class="line"><span class="comment"> */</span></span><br></pre></td></tr></table></figure>

<p>如果希望<code>toString()</code>方法打印出对象的内存地址，也许会考虑使用<code>this</code>关键字：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">InfiniteRecursion</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;InfiniteRecursion address: &quot;</span> + <span class="keyword">this</span> + <span class="string">&quot;\n&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        List&lt;InfiniteRecursion&gt; v = <span class="keyword">new</span> ArrayList&lt;InfiniteRecursion&gt;();</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++) &#123;</span><br><span class="line">            v.add(<span class="keyword">new</span> InfiniteRecursion());</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(v);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>执行代码会得到一串非常长的异常。这里发生了自动类型转换，由<code>InfiniteRecursion</code>类型转换成<code>String</code>类型。因为编译器看到一个<code>String</code>对象后面跟着一个“+”，而在后面的对象不是<code>String</code>，于是编译器试着将<code>this</code>转换成一个<code>String</code>。调用<code>this</code>上的<code>toString()</code>方法进行转换，于是就发生了递归调用。所以不该使用<code>this</code>，而是应该调用<code>super.toString()</code>方法。</p>
<h2 id="13-4-String上的操作"><a href="#13-4-String上的操作" class="headerlink" title="13.4 String上的操作"></a>13.4 String上的操作</h2><h2 id="13-5-格式化输出"><a href="#13-5-格式化输出" class="headerlink" title="13.5 格式化输出"></a>13.5 格式化输出</h2><h3 id="13-5-1-printf"><a href="#13-5-1-printf" class="headerlink" title="13.5.1 printf()"></a>13.5.1 printf()</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">System.out.printf(<span class="string">&quot;Row 1:[%d %f] \n&quot;</span>,<span class="number">10</span>,<span class="number">2.5</span>);<span class="comment">// Row 1:[10 2.500000]</span></span><br></pre></td></tr></table></figure>

<h3 id="13-5-2-System-out-format"><a href="#13-5-2-System-out-format" class="headerlink" title="13.5.2 System.out.format()"></a>13.5.2 System.out.format()</h3><p><code>Java SE5</code>引入的<code>format</code>方法可用于<code>PrintStream</code>或<code>PrintWriter</code>对象，其中也包括<code>System.out</code>对象。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SimpleFormat</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> x = <span class="number">5</span>;</span><br><span class="line">        <span class="keyword">double</span> y = <span class="number">5.332542</span>;</span><br><span class="line">        <span class="comment">// The old way:</span></span><br><span class="line">        System.out.println(<span class="string">&quot;Row 1: [&quot;</span> + x + <span class="string">&quot; &quot;</span> + y + <span class="string">&quot;]&quot;</span>);</span><br><span class="line">        <span class="comment">// The new way:</span></span><br><span class="line">        System.out.format(<span class="string">&quot;Row 1: [%d %f]\n&quot;</span>, x, y);</span><br><span class="line">        <span class="comment">// OR</span></span><br><span class="line">        System.out.printf(<span class="string">&quot;Row 1: [%d %f]\n&quot;</span>, x, y);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">Row 1: [5 5.332542]</span></span><br><span class="line"><span class="comment">Row 1: [5 5.332542]</span></span><br><span class="line"><span class="comment">Row 1: [5 5.332542]</span></span><br><span class="line"><span class="comment"> */</span></span><br></pre></td></tr></table></figure>

<p>可以看到，<code>format()</code>与<code>printf()</code>是等价的。</p>
<h3 id="13-5-3-Formatter类"><a href="#13-5-3-Formatter类" class="headerlink" title="13.5.3 Formatter类"></a>13.5.3 Formatter类</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Turtle</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> Formatter f;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Turtle</span><span class="params">(String name, Formatter f)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">        <span class="keyword">this</span>.f = f;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">move</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> y)</span> </span>&#123;</span><br><span class="line">        f.format(<span class="string">&quot;%s The Turtle is at (%d,%d)\n&quot;</span>, name, x, y);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        PrintStream outAlias =System.out;</span><br><span class="line">        Turtle tommy = <span class="keyword">new</span> Turtle(<span class="string">&quot;Tommy&quot;</span>,<span class="keyword">new</span> Formatter(System.out));</span><br><span class="line">        Turtle terry = <span class="keyword">new</span> Turtle(<span class="string">&quot;Terry&quot;</span>,<span class="keyword">new</span> Formatter(outAlias));</span><br><span class="line">        tommy.move(<span class="number">0</span>,<span class="number">0</span>);</span><br><span class="line">        terry.move(<span class="number">4</span>,<span class="number">8</span>);</span><br><span class="line">        tommy.move(<span class="number">3</span>,<span class="number">4</span>);</span><br><span class="line">        terry.move(<span class="number">2</span>,<span class="number">5</span>);</span><br><span class="line">        tommy.move(<span class="number">3</span>,<span class="number">3</span>);</span><br><span class="line">        terry.move(<span class="number">3</span>,<span class="number">3</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">Tommy The Turtle is at (0,0)</span></span><br><span class="line"><span class="comment">Terry The Turtle is at (4,8)</span></span><br><span class="line"><span class="comment">Tommy The Turtle is at (3,4)</span></span><br><span class="line"><span class="comment">Terry The Turtle is at (2,5)</span></span><br><span class="line"><span class="comment">Tommy The Turtle is at (3,3)</span></span><br><span class="line"><span class="comment">Terry The Turtle is at (3,3)</span></span><br><span class="line"><span class="comment"> */</span></span><br></pre></td></tr></table></figure>

<h3 id="13-5-4-格式化说明符"><a href="#13-5-4-格式化说明符" class="headerlink" title="13.5.4 格式化说明符"></a>13.5.4 格式化说明符</h3><p>在插入数据时，如果想要控制空格与对齐，你需要更精细复杂的格式修饰符，一下是其抽象的语法：</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">%[argument_index$][flags][width][precision]conversion</span><br></pre></td></tr></table></figure>

<p>通过指定<code>width</code>来实现控制一个域的最小尺寸。<code>Formatter</code>对象通过在必要时添加空格，来确保一个域至少达到某个长度。在默认情况下，数据时右对齐，不过可以通过使用“-”标志来改变对齐方向。</p>
<p>与<code>width</code>相对的是<code>precision</code>,它用来指明最大尺寸。<code>width</code>可以用用于各种类型的数据转换，并且其行为方式都一样。<code>precision</code>则不然，不是所有类型的数据都能使用<code>precision</code>，而且，应用于不同类型的数据转换时，<code>precision</code>的意义也不同。在将<code>precision</code>应用于<code>String</code>时，它表示打印<code>String</code>时输出字符的最大数量。而在将<code>precision</code>应用于浮点数时，它表示小数部分要显示出来的位数（默认是6位小数），如果小数位过多则舍入，太少则在尾部补零。由于整数没有小数部分，所以<code>precision</code>无法应用于整数，如果你对整数应用<code>precision</code>，则会触发异常。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Receipt</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">double</span> total = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">private</span> Formatter f = <span class="keyword">new</span> Formatter(System.out);</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">printTitle</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        f.format(<span class="string">&quot;%-15s %5s %10s \n&quot;</span>, <span class="string">&quot;Item&quot;</span>, <span class="string">&quot;Qty&quot;</span>, <span class="string">&quot;Price&quot;</span>);</span><br><span class="line">        f.format(<span class="string">&quot;%-15s %5s %10s \n&quot;</span>, <span class="string">&quot;----&quot;</span>, <span class="string">&quot;---&quot;</span>, <span class="string">&quot;-----&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">print</span><span class="params">(String name, <span class="keyword">int</span> qty, <span class="keyword">double</span> price)</span> </span>&#123;</span><br><span class="line">        f.format(<span class="string">&quot;%-15.15s %5d %10.2f \n&quot;</span>, name, qty, price);</span><br><span class="line">        total += price;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">printTotal</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        f.format(<span class="string">&quot;%-15s %5s %10.2f \n&quot;</span>, <span class="string">&quot;Tax&quot;</span>, <span class="string">&quot;&quot;</span>, total * <span class="number">0.06</span>);</span><br><span class="line">        f.format(<span class="string">&quot;%-15s %5s %10s \n&quot;</span>, <span class="string">&quot;Tax&quot;</span>, <span class="string">&quot;&quot;</span>, <span class="string">&quot;-----&quot;</span>);</span><br><span class="line">        f.format(<span class="string">&quot;%-15s %5s %10.2f \n&quot;</span>, <span class="string">&quot;Total&quot;</span>, <span class="string">&quot;&quot;</span>, total * <span class="number">1.06</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Receipt receipt = <span class="keyword">new</span> Receipt();</span><br><span class="line">        receipt.printTitle();</span><br><span class="line">        receipt.print(<span class="string">&quot;Jack&#x27;s Magic Beans&quot;</span>,<span class="number">4</span>,<span class="number">4.25</span>);</span><br><span class="line">        receipt.print(<span class="string">&quot;Princess Peas&quot;</span>,<span class="number">3</span>,<span class="number">5.1</span>);</span><br><span class="line">        receipt.print(<span class="string">&quot;Three Bears Porridge&quot;</span>,<span class="number">1</span>,<span class="number">14.29</span>);</span><br><span class="line">        receipt.printTotal();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">Item              Qty      Price</span></span><br><span class="line"><span class="comment">----              ---      -----</span></span><br><span class="line"><span class="comment">Jack&#x27;s Magic Be     4       4.25</span></span><br><span class="line"><span class="comment">Princess Peas       3       5.10</span></span><br><span class="line"><span class="comment">Three Bears Por     1      14.29</span></span><br><span class="line"><span class="comment">Tax                         1.42</span></span><br><span class="line"><span class="comment">Tax                        -----</span></span><br><span class="line"><span class="comment">Total                      25.06</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"> */</span></span><br></pre></td></tr></table></figure>

<h3 id="13-5-5-Formatter转换"><a href="#13-5-5-Formatter转换" class="headerlink" title="13.5.5 Formatter转换"></a>13.5.5 Formatter转换</h3><p>类型转换字符：</p>
<ul>
<li>d 整数型（十进制）</li>
<li>c Unicode字符</li>
<li>b Boolean值</li>
<li>s String</li>
<li>f 浮点数（十进制）</li>
<li>e 浮点数（科学计数）</li>
<li>x 整数（十六进制）</li>
<li>h 散列码（十六进制）</li>
<li>% 字符”%”</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Conversion</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Formatter f = <span class="keyword">new</span> Formatter(System.out);</span><br><span class="line">        <span class="keyword">char</span> u = <span class="string">&#x27;a&#x27;</span>;</span><br><span class="line">        System.out.println(<span class="string">&quot;u = &#x27;a&#x27;&quot;</span>);</span><br><span class="line">        f.format(<span class="string">&quot;s: %s\n&quot;</span>, u);</span><br><span class="line"><span class="comment">//        f.format(&quot;d: %d\n&quot;, u);</span></span><br><span class="line">        f.format(<span class="string">&quot;c: %c\n&quot;</span>, u);</span><br><span class="line">        f.format(<span class="string">&quot;b: %b\n&quot;</span>, u);</span><br><span class="line"><span class="comment">//        f.format(&quot;f: %f\n&quot;, u);</span></span><br><span class="line"><span class="comment">//        f.format(&quot;e: %e\n&quot;, u);</span></span><br><span class="line"><span class="comment">//        f.format(&quot;x: %x\n&quot;, u);</span></span><br><span class="line"><span class="comment">//        f.format(&quot;h: %h\n&quot;, u);</span></span><br><span class="line">        <span class="keyword">int</span> v = <span class="number">121</span>;</span><br><span class="line">        System.out.println(<span class="string">&quot;v = 121&quot;</span>);</span><br><span class="line">        f.format(<span class="string">&quot;d: %d\n&quot;</span>, v);</span><br><span class="line">        f.format(<span class="string">&quot;c: %c\n&quot;</span>, v);</span><br><span class="line">        f.format(<span class="string">&quot;b: %b\n&quot;</span>, v);</span><br><span class="line">        f.format(<span class="string">&quot;s: %s\n&quot;</span>, v);</span><br><span class="line"><span class="comment">//        f.format(&quot;f: %f\n&quot;, v);</span></span><br><span class="line"><span class="comment">//        f.format(&quot;e: %e\n&quot;, v);</span></span><br><span class="line">        f.format(<span class="string">&quot;x: %x\n&quot;</span>, v);</span><br><span class="line">        f.format(<span class="string">&quot;h: %h\n&quot;</span>, v);</span><br><span class="line">        BigInteger w = <span class="keyword">new</span> BigInteger(<span class="string">&quot;50000000000000&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;w = new BigInteger(\&quot;50000000000000\&quot;)&quot;</span>);</span><br><span class="line">        f.format(<span class="string">&quot;d: %d\n&quot;</span>, w);</span><br><span class="line">       <span class="comment">// f.format(&quot;c: %c\n&quot;, w);</span></span><br><span class="line">        f.format(<span class="string">&quot;b: %b\n&quot;</span>, w);</span><br><span class="line">        f.format(<span class="string">&quot;s: %s\n&quot;</span>, w);</span><br><span class="line"><span class="comment">//        f.format(&quot;f: %f\n&quot;, w);</span></span><br><span class="line"><span class="comment">//        f.format(&quot;e: %e\n&quot;, w);</span></span><br><span class="line">        f.format(<span class="string">&quot;x: %x\n&quot;</span>, w);</span><br><span class="line">        f.format(<span class="string">&quot;h: %h\n&quot;</span>, w);</span><br><span class="line">        <span class="keyword">double</span> x = <span class="number">179.543</span>;</span><br><span class="line">        System.out.println(<span class="string">&quot;x = 179.543&quot;</span>);</span><br><span class="line"><span class="comment">//        f.format(&quot;d: %d\n&quot;, x);</span></span><br><span class="line"><span class="comment">//        f.format(&quot;c: %c\n&quot;, x);</span></span><br><span class="line">        f.format(<span class="string">&quot;b: %b\n&quot;</span>, x);</span><br><span class="line">        f.format(<span class="string">&quot;s: %s\n&quot;</span>, x);</span><br><span class="line">        f.format(<span class="string">&quot;f: %f\n&quot;</span>, x);</span><br><span class="line">        f.format(<span class="string">&quot;e: %e\n&quot;</span>, x);</span><br><span class="line"><span class="comment">//        f.format(&quot;x: %x\n&quot;, x);</span></span><br><span class="line">        f.format(<span class="string">&quot;h: %h\n&quot;</span>, x);</span><br><span class="line">        Conversion y = <span class="keyword">new</span> Conversion();</span><br><span class="line">        System.out.println(<span class="string">&quot;y = new Conversion()&quot;</span>);</span><br><span class="line"><span class="comment">//        f.format(&quot;d: %d\n&quot;, y);</span></span><br><span class="line"><span class="comment">//        f.format(&quot;c: %c\n&quot;, y);</span></span><br><span class="line">        f.format(<span class="string">&quot;b: %b\n&quot;</span>, y);</span><br><span class="line">        f.format(<span class="string">&quot;s: %s\n&quot;</span>, y);</span><br><span class="line"><span class="comment">//        f.format(&quot;f: %f\n&quot;, y);</span></span><br><span class="line"><span class="comment">//        f.format(&quot;e: %e\n&quot;, y);</span></span><br><span class="line"><span class="comment">//        f.format(&quot;x: %x\n&quot;, y);</span></span><br><span class="line">        f.format(<span class="string">&quot;h: %h\n&quot;</span>, y);</span><br><span class="line">        <span class="keyword">boolean</span> z = <span class="keyword">false</span>;</span><br><span class="line">        System.out.println(<span class="string">&quot;z = false&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//        f.format(&quot;d: %d\n&quot;, z);</span></span><br><span class="line"><span class="comment">//        f.format(&quot;c: %c\n&quot;, z);</span></span><br><span class="line">        f.format(<span class="string">&quot;b: %b\n&quot;</span>, z);</span><br><span class="line">        f.format(<span class="string">&quot;s: %s\n&quot;</span>, z);</span><br><span class="line"><span class="comment">//        f.format(&quot;f: %f\n&quot;, z);</span></span><br><span class="line"><span class="comment">//        f.format(&quot;e: %e\n&quot;, z);</span></span><br><span class="line"><span class="comment">//        f.format(&quot;x: %x\n&quot;, z);</span></span><br><span class="line">        f.format(<span class="string">&quot;h: %h\n&quot;</span>, z);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">u = &#x27;a&#x27;</span></span><br><span class="line"><span class="comment">s: a</span></span><br><span class="line"><span class="comment">c: a</span></span><br><span class="line"><span class="comment">b: true</span></span><br><span class="line"><span class="comment">v = 121</span></span><br><span class="line"><span class="comment">d: 121</span></span><br><span class="line"><span class="comment">c: y</span></span><br><span class="line"><span class="comment">b: true</span></span><br><span class="line"><span class="comment">s: 121</span></span><br><span class="line"><span class="comment">x: 79</span></span><br><span class="line"><span class="comment">h: 79</span></span><br><span class="line"><span class="comment">w = new BigInteger(&quot;50000000000000&quot;)</span></span><br><span class="line"><span class="comment">d: 50000000000000</span></span><br><span class="line"><span class="comment">b: true</span></span><br><span class="line"><span class="comment">s: 50000000000000</span></span><br><span class="line"><span class="comment">x: 2d79883d2000</span></span><br><span class="line"><span class="comment">h: 8842a1a7</span></span><br><span class="line"><span class="comment">x = 179.543</span></span><br><span class="line"><span class="comment">b: true</span></span><br><span class="line"><span class="comment">s: 179.543</span></span><br><span class="line"><span class="comment">f: 179.543000</span></span><br><span class="line"><span class="comment">e: 1.795430e+02</span></span><br><span class="line"><span class="comment">h: 1ef462c</span></span><br><span class="line"><span class="comment">y = new Conversion()</span></span><br><span class="line"><span class="comment">b: true</span></span><br><span class="line"><span class="comment">s: strings.Conversion@7440e464</span></span><br><span class="line"><span class="comment">h: 7440e464</span></span><br><span class="line"><span class="comment">z = false</span></span><br><span class="line"><span class="comment">b: false</span></span><br><span class="line"><span class="comment">s: false</span></span><br><span class="line"><span class="comment">h: 4d5</span></span><br><span class="line"><span class="comment"> */</span></span><br></pre></td></tr></table></figure>

<p>程序中的每个变量都用到了<code>b</code>转换。虽然它对各种类型都是合法的，但其行为却不一定与你想象的一致。对于<code>boolean</code>基本类型或<code>Boolean</code>对象，其转换结果是对应的<code>true</code>或<code>false</code>。但是，对其他类型的参数，只要该参数不为<code>null</code>，那转换的结果就永远都是<code>true</code>。即使是数字0，转换结果依然是<code>true</code>，而这在其他语言中，往往转换为<code>false</code>。</p>
<h3 id="5-6-String-format"><a href="#5-6-String-format" class="headerlink" title="5.6 String.format()"></a>5.6 String.format()</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DatabaseException</span> <span class="keyword">extends</span> <span class="title">Exception</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">DatabaseException</span><span class="params">(<span class="keyword">int</span> transactionID,<span class="keyword">int</span> queryID,String message)</span></span>&#123;</span><br><span class="line">        <span class="keyword">super</span>(String.format(<span class="string">&quot;(t%d, q%d) %s&quot;</span>,transactionID,queryID,message));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">try</span>&#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> DatabaseException(<span class="number">3</span>,<span class="number">7</span>,<span class="string">&quot;Write failed&quot;</span>);</span><br><span class="line">        &#125;<span class="keyword">catch</span> (Exception e)&#123;</span><br><span class="line">            System.out.println(e);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">strings.DatabaseException: (t3, q7) Write failed</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"> */</span></span><br></pre></td></tr></table></figure>

<p><strong>一个十六进制转储（dump）工具</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Hex</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> String <span class="title">format</span><span class="params">(<span class="keyword">byte</span>[] data)</span> </span>&#123;</span><br><span class="line">        StringBuilder result = <span class="keyword">new</span> StringBuilder();</span><br><span class="line">        <span class="keyword">int</span> n = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">byte</span> b : data) &#123;</span><br><span class="line">            <span class="keyword">if</span> (n % <span class="number">16</span> == <span class="number">0</span>) &#123;</span><br><span class="line">                result.append(String.format(<span class="string">&quot;%05X: &quot;</span>, n));</span><br><span class="line">            &#125;</span><br><span class="line">            result.append(String.format(<span class="string">&quot;%02X&quot;</span>, b));</span><br><span class="line">            n++;</span><br><span class="line">            <span class="keyword">if</span> (n % <span class="number">16</span> == <span class="number">0</span>) &#123;</span><br><span class="line">                result.append(<span class="string">&quot;\n&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        result.append(<span class="string">&quot;\n&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> result.toString();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(args.length==<span class="number">0</span>)&#123;</span><br><span class="line">            System.out.println(format(BinaryFile.read(<span class="string">&quot;Hex.class&quot;</span>)));</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            System.out.println(BinaryFile.read(<span class="keyword">new</span> File(args[<span class="number">0</span>])));</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="13-6-正则表达式"><a href="#13-6-正则表达式" class="headerlink" title="13.6 正则表达式"></a>13.6 正则表达式</h2><h3 id="13-6-1-基础"><a href="#13-6-1-基础" class="headerlink" title="13.6.1 基础"></a>13.6.1 基础</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Splitting</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> String knights =</span><br><span class="line">            <span class="string">&quot;Then, when you have found the shrubbery, you must &quot;</span> +</span><br><span class="line">                    <span class="string">&quot;cut down the mightiest tree in the forest... &quot;</span> +</span><br><span class="line">                    <span class="string">&quot;with... a herring!&quot;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">split</span><span class="params">(String regex)</span> </span>&#123;</span><br><span class="line">        System.out.println(Arrays.toString(knights.split(regex)));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        split(<span class="string">&quot; &quot;</span>);</span><br><span class="line">        split(<span class="string">&quot;\\W+&quot;</span>); <span class="comment">//非单词字符</span></span><br><span class="line">        split(<span class="string">&quot;n\\W+&quot;</span>); <span class="comment">//n后面跟着一个或多个非单词字符</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">[Then,, when, you, have, found, the, shrubbery,, you, must, cut, down,</span></span><br><span class="line"><span class="comment">the, mightiest, tree, in, the, forest..., with..., a, herring!]</span></span><br><span class="line"><span class="comment">[Then, when, you, have, found, the, shrubbery, you, must, cut, down,</span></span><br><span class="line"><span class="comment">the, mightiest, tree, in, the, forest, with, a, herring]</span></span><br><span class="line"><span class="comment">[The, whe, you have found the shrubbery, you must cut dow,</span></span><br><span class="line"><span class="comment"> the mightiest tree i, the forest... with... a herring!]</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"> */</span></span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Replacing</span> </span>&#123;</span><br><span class="line">    <span class="keyword">static</span> String s = Splitting.knights;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        System.out.println(s.replaceFirst(<span class="string">&quot;f\\w+&quot;</span>,<span class="string">&quot;located&quot;</span>));<span class="comment">//以f开头后面跟一个或多个字母</span></span><br><span class="line">        System.out.println(s.replaceAll(<span class="string">&quot;shrubbery|tree|herring&quot;</span>,<span class="string">&quot;banana&quot;</span>));<span class="comment">//匹配三个单词中的任意一个</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="13-6-2-创建正则表达式"><a href="#13-6-2-创建正则表达式" class="headerlink" title="13.6.2 创建正则表达式"></a>13.6.2 创建正则表达式</h3><p>字符类（character classes）:</p>
<ul>
<li>· ：任意字符</li>
<li>[abc]：包含a、b和c的任何字符</li>
<li>：除了a、b和c之外的任何字符</li>
<li>[a-zA-Z]：从a到z或从A到Z的任何字符</li>
<li>[abc[hij]]：任意a、b、c、h、i和j</li>
<li>[a-z&amp;&amp;[hij]]：任意h、i或j</li>
<li>\s：空白符</li>
<li>\S：非空白符</li>
<li>\d：数字[0-9]</li>
<li>\D：非数字</li>
<li>\w：词字符[a-zA-Z0-9]</li>
<li>\W：非词字符</li>
</ul>
<p>逻辑操作符：</p>
<ul>
<li>XY：Y跟在X后面</li>
<li>X|Y：X或Y</li>
<li>(X): 捕获组，可以在表达式中用\i引用第i个捕获组</li>
</ul>
<p>边界匹配符</p>
<ul>
<li>^：一行的开始</li>
<li>$：一行的结束</li>
<li>\b：词的边界</li>
<li>\B：非词的边界</li>
<li>\G：前一个匹配的结束</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Rudolph</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">for</span> (String pattern : <span class="keyword">new</span> String[]&#123;<span class="string">&quot;Rudolph&quot;</span>, <span class="string">&quot;[rR]udolph&quot;</span>,</span><br><span class="line">                <span class="string">&quot;[rR][aeiou][a-z]ol.*&quot;</span>, <span class="string">&quot;R.*&quot;</span>&#125;) &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;Rudolph&quot;</span>.matches(pattern));</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">true</span></span><br><span class="line"><span class="comment">true</span></span><br><span class="line"><span class="comment">true</span></span><br><span class="line"><span class="comment">true</span></span><br><span class="line"><span class="comment"> */</span></span><br></pre></td></tr></table></figure>

<h3 id="13-6-3-量词"><a href="#13-6-3-量词" class="headerlink" title="13.6.3 量词"></a>13.6.3 量词</h3><p>量词描述了一个模式吸收输入文本的方式：</p>
<ul>
<li><code>贪婪型</code>：量词总是贪婪的，除非有其他的选项被设置。贪婪表达式会为所有可能的模式发现尽可能多的匹配。导致此问题的一个典型理由就是假定我们的模式仅能匹配第一个可能的字符组，如果它是贪婪的，那么它就会继续往下匹配。</li>
<li><code>勉强型</code>：用问好来指定，这个量词匹配满足模式所需要的最少字符数。因此也称作懒惰的、最少匹配的、非贪婪的、或不贪婪的。</li>
<li><code>占有型</code>：目前，这种类型的量词只有在<code>Java</code>语言中才可用（在其他语言中不可用），并且也更高级，因此我们大概不会立刻用到它。当正则表达式被应用于字符串时，它会产生相当多的状态，以便在匹配失败时可以回溯。而“占有的”量词并不保存这些中间状态，因此它们可以防止回溯。它们常常用于防止正则表达式失控，因此可以使正则表达式执行起来更有效。</li>
</ul>
<h3 id="13-6-4-Pattern和Matcher"><a href="#13-6-4-Pattern和Matcher" class="headerlink" title="13.6.4 Pattern和Matcher"></a>13.6.4 Pattern和Matcher</h3><p>比起功能有限的<code>String</code>类。我们更愿意构建功能强大的正则表达式对象。用<code>Pattern.compile()</code>方法来编译你的正则表达式。它会根据你的<code>String</code>类型的正则表达式生成一个<code>Pattern</code>对象。接下来，把你想要检索的字符串传入<code>Pattern</code>对象的<code>matcher()</code>方法。<code>matcher()</code>方法会生成一个<code>Matcher</code>对象。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestRegularExpression</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (args.length &lt; <span class="number">2</span>) &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;Usage:\njava TestRegularExpression characterSequence regularExpression+&quot;</span>);</span><br><span class="line">            System.exit(<span class="number">0</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(<span class="string">&quot;Input: \&quot;&quot;</span> + args[<span class="number">0</span>] + <span class="string">&quot;\&quot;&quot;</span>);</span><br><span class="line">        <span class="keyword">for</span> (String arg : args) &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;Regular expression: \&quot;&quot;</span> + arg + <span class="string">&quot;\&quot;&quot;</span>);</span><br><span class="line">            Pattern p = Pattern.compile(arg);</span><br><span class="line">            Matcher m = p.matcher(args[<span class="number">0</span>]);</span><br><span class="line">            <span class="keyword">while</span> (m.find()) &#123;</span><br><span class="line">                System.out.println(<span class="string">&quot;Match \&quot;&quot;</span> + m.group() + <span class="string">&quot;\&quot; at positions &quot;</span> + m.start() + <span class="string">&quot;-&quot;</span> + (m.end() - <span class="number">1</span>));</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">java strings.TestRegularExpression &quot;abcabcabcdefabc&quot; &quot;abc+&quot; &quot;(abc)+&quot; &quot;(abc)&#123;2,&#125;&quot;</span><br></pre></td></tr></table></figure>

<p>输出：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">Input: <span class="string">&quot;abcabcabcdefabc&quot;</span></span><br><span class="line">Regular expression: <span class="string">&quot;abcabcabcdefabc&quot;</span></span><br><span class="line">Match <span class="string">&quot;abcabcabcdefabc&quot;</span> at positions <span class="number">0</span>-<span class="number">14</span></span><br><span class="line">Regular expression: <span class="string">&quot;abc+&quot;</span></span><br><span class="line">Match <span class="string">&quot;abc&quot;</span> at positions <span class="number">0</span>-<span class="number">2</span></span><br><span class="line">Match <span class="string">&quot;abc&quot;</span> at positions <span class="number">3</span>-<span class="number">5</span></span><br><span class="line">Match <span class="string">&quot;abc&quot;</span> at positions <span class="number">6</span>-<span class="number">8</span></span><br><span class="line">Match <span class="string">&quot;abc&quot;</span> at positions <span class="number">12</span>-<span class="number">14</span></span><br><span class="line">Regular expression: <span class="string">&quot;(abc)+&quot;</span></span><br><span class="line">Match <span class="string">&quot;abcabcabc&quot;</span> at positions <span class="number">0</span>-<span class="number">8</span></span><br><span class="line">Match <span class="string">&quot;abc&quot;</span> at positions <span class="number">12</span>-<span class="number">14</span></span><br><span class="line">Regular expression: <span class="string">&quot;(abc)&#123;2,&#125;&quot;</span></span><br><span class="line">Match <span class="string">&quot;abcabcabc&quot;</span> at positions <span class="number">0</span>-<span class="number">8</span></span><br></pre></td></tr></table></figure>

<p><code>Pattern</code>对象表示编译后的正则表达式。从例子中可以看到，使用已编译的<code>Pattern</code>对象上的<code>matcher()</code>方法，加上一个输入字符串，从而共同构造了一个<code>Matcher</code>对象。同时，<code>Pattern</code>类还提供了<code>static</code>方法。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">static</span> <span class="keyword">boolean</span> <span class="title">matches</span><span class="params">(String regex,CharSequence input)</span></span></span><br></pre></td></tr></table></figure>

<p>该方法用以检查<code>regex</code>是否匹配整个<code>CharSequence</code>类型的<code>input</code>参数。编译后的<code>Pattern</code>对象还提供了<code>split()</code>方法，它从匹配了<code>regex</code>的地方分割输入字符串，返回分割后的字符串<code>String</code>数组。</p>
<p>通过调用<code>Pattern.matcher()</code>方法，并传入一个字符串参数，我们得到了一个<code>Matcher</code>对象。使用<code>Matcher</code>上的方法，我们将能够判断各种不同类型的匹配是否成功：</p>
<ul>
<li>boolean matches()</li>
<li>boolean lookingAt()</li>
<li>boolean find()</li>
<li>boolean find(int start)</li>
</ul>
<p>其中<code>matches()</code>方法用来判断整个输入字符串是否匹配正则表达式模式，而<code>lookingAt()</code>则用来判断该字符串（不必是整个字符串）的始部分是否能够匹配模式。</p>
<h4 id="find"><a href="#find" class="headerlink" title="find()"></a>find()</h4><p><code>Matcher.find()</code>方法可用来在<code>CharSequence</code>中查找多个匹配。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Finding</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Matcher m = Pattern.compile(<span class="string">&quot;\\w+&quot;</span>).matcher(<span class="string">&quot;Evening is full of the linnet&#x27;s wings&quot;</span>);</span><br><span class="line">        <span class="keyword">while</span> (m.find()) &#123;</span><br><span class="line">            System.out.print(m.group() + <span class="string">&quot;, &quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println();</span><br><span class="line">        <span class="keyword">int</span> i = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">while</span> (m.find(i)) &#123;<span class="comment">//不断重新设定搜索的起始位置</span></span><br><span class="line">            System.out.print(m.group() + <span class="string">&quot;, &quot;</span>);</span><br><span class="line">            i++;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">Evening, is, full, of, the, linnet, s, wings, </span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">Evening, vening, ening, ning, ing, ng, g, is, is, s, full, full, ull, ll, l, of, of, f, </span></span><br><span class="line"><span class="comment">the, the, he, e, linnet, linnet, innet, nnet, net, et, t, s, s, wings, wings, ings, ngs, gs, s, </span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"> */</span></span><br></pre></td></tr></table></figure>

<h4 id="组（Groups）"><a href="#组（Groups）" class="headerlink" title="组（Groups）"></a>组（Groups）</h4><p>组是用括号划分的正则表达式，可以根据组的编号来引用某个组。组号为0表示整个表达式，组号1表示被第一对括号括起来的组，依次类推。因此，在下面这个表达式,</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">A(B(C))D</span><br></pre></td></tr></table></figure>

<p>中有三个组：组0是ABCD，组1是BC，组2是C。</p>
<p><code>Matcher</code>对象提供了一系列方法，用以获取与组相关的信息：</p>
<ul>
<li>groupCount()：返回该匹配器的模式中的分组数目，第0组不包括在内。</li>
<li>group()：返回前一次匹配操作（例如find())的第0组（整个匹配）。</li>
<li>group(int i)：返回前一次匹配操作的第i组。指定的组没有匹配输入字符串的任何部分，则将会返回<code>null</code>。</li>
<li>start(int group)：返回在前一次匹配操作中寻找到的组的起始索引。</li>
<li>end(int group)：返回在前一次匹配操作中寻找到的组的最后一个字符索引加一的值。</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Groups</span> </span>&#123;</span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">public</span> <span class="keyword">final</span> String POEM =</span><br><span class="line">            <span class="string">&quot;Twas brillig, and the slithy toves\n&quot;</span> +</span><br><span class="line">                    <span class="string">&quot;Did gyre and gimble in the wabe.\n&quot;</span> +</span><br><span class="line">                    <span class="string">&quot;All mimsy were the borogoves,\n&quot;</span> +</span><br><span class="line">                    <span class="string">&quot;And the mome raths outgrabe.\n\n&quot;</span> +</span><br><span class="line">                    <span class="string">&quot;Beware the Jabberwock, my son,\n&quot;</span> +</span><br><span class="line">                    <span class="string">&quot;The jaws that bite, the claws that catch.\n&quot;</span> +</span><br><span class="line">                    <span class="string">&quot;Beware the Jubjub bird, and shun\n&quot;</span> +</span><br><span class="line">                    <span class="string">&quot;The frumious Bandersnatch.&quot;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Matcher m = Pattern.compile(<span class="string">&quot;(?m)(\\S+)\\s+((\\S+)\\s+(\\S+))$&quot;</span>).matcher(POEM);</span><br><span class="line">        <span class="keyword">while</span> (m.find()) &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt;= m.groupCount(); i++) &#123;</span><br><span class="line">                System.out.print(<span class="string">&quot;[&quot;</span> + m.group(i) + <span class="string">&quot;]&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">            System.out.println();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">[the slithy toves][the][slithy toves][slithy][toves]</span></span><br><span class="line"><span class="comment">[in the wabe.][in][the wabe.][the][wabe.]</span></span><br><span class="line"><span class="comment">[were the borogoves,][were][the borogoves,][the][borogoves,]</span></span><br><span class="line"><span class="comment">[mome raths outgrabe.][mome][raths outgrabe.][raths][outgrabe.]</span></span><br><span class="line"><span class="comment">[Jabberwock, my son,][Jabberwock,][my son,][my][son,]</span></span><br><span class="line"><span class="comment">[claws that catch.][claws][that catch.][that][catch.]</span></span><br><span class="line"><span class="comment">[bird, and shun][bird,][and shun][and][shun]</span></span><br><span class="line"><span class="comment">[The frumious Bandersnatch.][The][frumious Bandersnatch.][frumious][Bandersnatch.]</span></span><br><span class="line"><span class="comment"> */</span></span><br></pre></td></tr></table></figure>

<p><strong>start()与end()</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">StartEnd</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> String input =</span><br><span class="line">            <span class="string">&quot;As long as there is injustice, whenever a\n&quot;</span> +</span><br><span class="line">                    <span class="string">&quot;Targathian baby cries out, wherever a distress\n&quot;</span> +</span><br><span class="line">                    <span class="string">&quot;signal sounds among the stars... We&#x27;ll be there.\n&quot;</span> +</span><br><span class="line">                    <span class="string">&quot;This fine ship, and this fine crew ...\n&quot;</span> +</span><br><span class="line">                    <span class="string">&quot;Never give up! Never surrender!&quot;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">Display</span> </span>&#123;</span><br><span class="line">        <span class="keyword">private</span> <span class="keyword">boolean</span> regexPrinted = <span class="keyword">false</span>;</span><br><span class="line">        <span class="keyword">private</span> String regex;</span><br><span class="line"></span><br><span class="line">        Display(String regex) &#123;</span><br><span class="line">            <span class="keyword">this</span>.regex = regex;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">void</span> <span class="title">display</span><span class="params">(String message)</span> </span>&#123;</span><br><span class="line">            <span class="keyword">if</span> (!regexPrinted) &#123;</span><br><span class="line">                System.out.println(regex);</span><br><span class="line">                regexPrinted = <span class="keyword">true</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            System.out.println(message);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">examine</span><span class="params">(String s, String regex)</span> </span>&#123;</span><br><span class="line">        Display d = <span class="keyword">new</span> Display(regex);</span><br><span class="line">        Pattern p = Pattern.compile(regex);</span><br><span class="line">        Matcher m = p.matcher(s);</span><br><span class="line">        <span class="keyword">while</span> (m.find()) &#123;</span><br><span class="line">            d.display(<span class="string">&quot;find() &#x27;&quot;</span> + m.group() + <span class="string">&quot;&#x27; start = &quot;</span></span><br><span class="line">                    + m.start() + <span class="string">&quot; end = &quot;</span> + m.end());</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (m.lookingAt()) &#123;</span><br><span class="line">            d.display(<span class="string">&quot;lookingAt() start = &quot;</span> + m.start() + <span class="string">&quot; end = &quot;</span> + m.end());</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (m.matches()) &#123;</span><br><span class="line">            d.display(<span class="string">&quot;matches() start = &quot;</span> + m.start() + <span class="string">&quot; end = &quot;</span> + m.end());</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">for</span> (String in : input.split(<span class="string">&quot;\n&quot;</span>)) &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;input : &quot;</span> + in);</span><br><span class="line">            <span class="keyword">for</span> (String regex : <span class="keyword">new</span> String[]&#123;<span class="string">&quot;\\w*ere\\w*&quot;</span>,</span><br><span class="line">                    <span class="string">&quot;\\w*ever&quot;</span>, <span class="string">&quot;T\\w+&quot;</span>, <span class="string">&quot;Never.*?!&quot;</span>&#125;) &#123;</span><br><span class="line">                examine(in, regex);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">input : As long as there is injustice, whenever a</span></span><br><span class="line"><span class="comment">\w*ere\w*</span></span><br><span class="line"><span class="comment">find() &#x27;there&#x27; start = 11 end = 16</span></span><br><span class="line"><span class="comment">\w*ever</span></span><br><span class="line"><span class="comment">find() &#x27;whenever&#x27; start = 31 end = 39</span></span><br><span class="line"><span class="comment">input : Targathian baby cries out, wherever a distress</span></span><br><span class="line"><span class="comment">\w*ere\w*</span></span><br><span class="line"><span class="comment">find() &#x27;wherever&#x27; start = 27 end = 35</span></span><br><span class="line"><span class="comment">\w*ever</span></span><br><span class="line"><span class="comment">find() &#x27;wherever&#x27; start = 27 end = 35</span></span><br><span class="line"><span class="comment">T\w+</span></span><br><span class="line"><span class="comment">find() &#x27;Targathian&#x27; start = 0 end = 10</span></span><br><span class="line"><span class="comment">lookingAt() start = 0 end = 10</span></span><br><span class="line"><span class="comment">input : signal sounds among the stars... We&#x27;ll be there.</span></span><br><span class="line"><span class="comment">\w*ere\w*</span></span><br><span class="line"><span class="comment">find() &#x27;there&#x27; start = 42 end = 47</span></span><br><span class="line"><span class="comment">input : This fine ship, and this fine crew ...</span></span><br><span class="line"><span class="comment">T\w+</span></span><br><span class="line"><span class="comment">find() &#x27;This&#x27; start = 0 end = 4</span></span><br><span class="line"><span class="comment">lookingAt() start = 0 end = 4</span></span><br><span class="line"><span class="comment">input : Never give up! Never surrender!</span></span><br><span class="line"><span class="comment">\w*ever</span></span><br><span class="line"><span class="comment">find() &#x27;Never&#x27; start = 0 end = 5</span></span><br><span class="line"><span class="comment">find() &#x27;Never&#x27; start = 15 end = 20</span></span><br><span class="line"><span class="comment">lookingAt() start = 0 end = 5</span></span><br><span class="line"><span class="comment">Never.*?!</span></span><br><span class="line"><span class="comment">find() &#x27;Never give up!&#x27; start = 0 end = 14</span></span><br><span class="line"><span class="comment">find() &#x27;Never surrender!&#x27; start = 15 end = 31</span></span><br><span class="line"><span class="comment">lookingAt() start = 0 end = 14</span></span><br><span class="line"><span class="comment">matches() start = 0 end = 31</span></span><br><span class="line"><span class="comment"> */</span></span><br></pre></td></tr></table></figure>

<p><code>find()</code>可以在输入的任意位置定位正则表达式，而<code>lookingAt()</code>和<code>matches()</code>只有在正则表达式与输入的最开始处就开始匹配时才会成功。<code>matches()</code>只有在整个输入都匹配正则表达式时才会成功，而<code>lookingAt()</code>只要输入的第一部分匹配就会成功。</p>
<p><strong>Pattern标记</strong></p>
<p><code>Pattern</code>类的<code>compile()</code>方法还有另一个版本，它接受一个标记参数，已调整匹配的行为：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Pattern Pattern.compile(String regex,<span class="keyword">int</span> flag)</span><br></pre></td></tr></table></figure>

<p>其中的<code>flag</code>来自以下<code>Pattern</code>类中的常量。</p>
<ul>
<li><code>Pattern.CANON_EQ</code>：两个字符当且仅当它们的完全规范分解相匹配时，就认为它们是匹配的。例如，如果我们指定这个标记，表达式<code>a\u030A</code>就会匹配字符串字符串<code>?</code>。在默认的情况下，匹配不考虑规范的等价性。</li>
<li><code>Pattern.CASE_INSENSITIVE(?i)</code>：默认情况下，大小写不敏感的匹配假定只有<code>US-ASCII</code>字符集中的字符才能进行。这个标记允许模式匹配不必考虑大小写（大写或小写）。通过指定<code>UNICODE_CASE</code>标记及结合此标记，基于<code>Unicode</code>的大小写不敏感的匹配就可以开启了。</li>
<li><code>Pattern.COMMENTS(?x)</code>：在这种模式下，空格符将被忽略掉，并且以<code>#</code>开始直到行末的注释也会被忽略掉。通过嵌入的标记表达式也可以开启<code>Unix</code>的行模式。</li>
<li><code>Pattern.DOTALL(?s)</code>：在<code>dotall</code>模式下，表达式“.”匹配所有字符，包括行终结符。默认情况下，“.”表达式不匹配行终结符。</li>
<li><code>Pattern.MuLTILINE(?m)</code>：在多行模式下，表达式<code>^</code>和<code>$</code>分别匹配一行的开始和结束。<code>^</code>还匹配输入字符串的开始，而<code>$</code>还匹配输入字符串的结尾。默认情况下，这些表达式仅匹配输入的完整字符串的开始和结束。</li>
<li><code>Pattern.UNICODE_CASE(?u)</code>：当指定这个标记，并且开启<code>CASE_INSENSITIVE</code>时，大小写不敏感的匹配将按照与<code>Unicode</code>标准相一致的方式进行。默认情况下，大小写不敏感的匹配假定只能在<code>US-ASCII</code>字符集中的字符才能进行。</li>
<li><code>Pattern.UNIX_LINES(?d)</code>：在这种模式下，在<code>.</code>、<code>^</code>和<code>$</code>行为中，只识别行终结符<code>\n</code>。</li>
</ul>
<p>在这些标记中，<code>Pattern.CASE_INSENSITIVE</code>、<code>Pattern.MULTILINE</code>以及<code>Pattern.COMMENTS</code>特别有用。</p>
<p>可以通过“或”(|)操作符</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ReFlags</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Pattern p = Pattern.compile(<span class="string">&quot;^java&quot;</span>, Pattern.CASE_INSENSITIVE | Pattern.MULTILINE);</span><br><span class="line">        Matcher m = p.matcher(</span><br><span class="line">                <span class="string">&quot;java has regex\nJava has regex\n&quot;</span> +</span><br><span class="line">                        <span class="string">&quot;JAVA has pretty good regular expressions\n&quot;</span> +</span><br><span class="line">                        <span class="string">&quot;Regular expressions are in Java&quot;</span></span><br><span class="line">        );</span><br><span class="line">        <span class="keyword">while</span> (m.find())&#123;</span><br><span class="line">            System.out.println(m.group());</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">java</span></span><br><span class="line"><span class="comment">Java</span></span><br><span class="line"><span class="comment">JAVA</span></span><br><span class="line"><span class="comment"> */</span></span><br></pre></td></tr></table></figure>

<h3 id="13-6-5-split"><a href="#13-6-5-split" class="headerlink" title="13.6.5 split()"></a>13.6.5 split()</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SplitDemo</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        String input = <span class="string">&quot;THis!!unusual use!!of exclamation!!points&quot;</span>;</span><br><span class="line">        System.out.println(Arrays.toString(Pattern.compile(<span class="string">&quot;!!&quot;</span>).split(input)));</span><br><span class="line">        <span class="comment">//限制将输入分割成字符串的数量</span></span><br><span class="line">        System.out.println(Arrays.toString(Pattern.compile(<span class="string">&quot;!!&quot;</span>).split(input, <span class="number">3</span>)));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">[THis, unusual use, of exclamation, points]</span></span><br><span class="line"><span class="comment">[THis, unusual use, of exclamation!!points]</span></span><br><span class="line"><span class="comment"> */</span></span><br></pre></td></tr></table></figure>

<h3 id="13-6-6-替换操作"><a href="#13-6-6-替换操作" class="headerlink" title="13.6.6 替换操作"></a>13.6.6 替换操作</h3><ul>
<li>replaceFirst(String replacement)</li>
<li>replaceAll(String replacement)：替换所有匹配成功的部分。</li>
<li>appendReplacement(StringButter sbuf,String replacement)：执行渐进式的替换，允许你调用其他方法来生成或处理<code>replacement</code>，使你能够以编程的方式将目标分割成组，从而具备更强大的替换功能。</li>
<li>appendTail(StringBuffer sbuf)：在执行了一次货多次<code>appendReplacement()</code>之后，调用此方法可以将输入字符串余下的部分复制到<code>sbuf</code>中。</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*!Here&#x27;s a block of text to use as input to</span></span><br><span class="line"><span class="comment">   the regular expression matcher. Note that we&#x27;ll</span></span><br><span class="line"><span class="comment">   first extract the block of text by looking for</span></span><br><span class="line"><span class="comment">   the special delimiters, then process the</span></span><br><span class="line"><span class="comment">   extracted block. !*/</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> net.mindview.util.TextFile;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.regex.Matcher;</span><br><span class="line"><span class="keyword">import</span> java.util.regex.Pattern;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TheReplacements</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        String s = TextFile.read(<span class="string">&quot;src/main/java/strings/TheReplacements.java&quot;</span>);</span><br><span class="line">        Matcher mInput =</span><br><span class="line">                Pattern.compile(<span class="string">&quot;/\\*!(.*)!\\*/&quot;</span>, Pattern.DOTALL)</span><br><span class="line">                        .matcher(s);</span><br><span class="line">        <span class="keyword">if</span> (mInput.find()) &#123;</span><br><span class="line">            s = mInput.group(<span class="number">1</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//将存在两个或两个以上空格的地方,缩减为一个空格,并且</span></span><br><span class="line">        s = s.replaceAll(<span class="string">&quot; &#123;2,&#125;&quot;</span>, <span class="string">&quot; &quot;</span>);</span><br><span class="line">        <span class="comment">//删除每行开头部分的所有空格</span></span><br><span class="line">        s = s.replaceAll(<span class="string">&quot;(?m)^ +&quot;</span>,<span class="string">&quot;&quot;</span>);</span><br><span class="line">        System.out.println(s);</span><br><span class="line">        <span class="comment">//replaceFirst只对找到的第一个匹配进行替换</span></span><br><span class="line">        s = s.replaceFirst(<span class="string">&quot;[aeiou]&quot;</span>, <span class="string">&quot;(VOWEL1)&quot;</span>);</span><br><span class="line">        StringBuffer sbuf = <span class="keyword">new</span> StringBuffer();</span><br><span class="line">        Pattern p = Pattern.compile(<span class="string">&quot;[aeiou]&quot;</span>);</span><br><span class="line">        Matcher m = p.matcher(s);</span><br><span class="line">        <span class="keyword">while</span> (m.find()) &#123;</span><br><span class="line">            m.appendReplacement(sbuf, m.group().toUpperCase());</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(sbuf);</span><br><span class="line">        m.appendTail(sbuf);</span><br><span class="line">        System.out.println(sbuf);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">Here&#x27;s a block of text to use as input to</span></span><br><span class="line"><span class="comment">the regular expression matcher. Note that we&#x27;ll</span></span><br><span class="line"><span class="comment">first extract the block of text by looking for</span></span><br><span class="line"><span class="comment">the special delimiters, then process the</span></span><br><span class="line"><span class="comment">extracted block.</span></span><br><span class="line"><span class="comment">H(VOWEL1)rE&#x27;s A blOck Of tExt tO UsE As InpUt tO</span></span><br><span class="line"><span class="comment">thE rEgUlAr ExprEssIOn mAtchEr. NOtE thAt wE&#x27;ll</span></span><br><span class="line"><span class="comment">fIrst ExtrAct thE blOck Of tExt by lOOkIng fOr</span></span><br><span class="line"><span class="comment">thE spEcIAl dElImItErs, thEn prOcEss thE</span></span><br><span class="line"><span class="comment">ExtrActEd blO</span></span><br><span class="line"><span class="comment">H(VOWEL1)rE&#x27;s A blOck Of tExt tO UsE As InpUt tO</span></span><br><span class="line"><span class="comment">thE rEgUlAr ExprEssIOn mAtchEr. NOtE thAt wE&#x27;ll</span></span><br><span class="line"><span class="comment">fIrst ExtrAct thE blOck Of tExt by lOOkIng fOr</span></span><br><span class="line"><span class="comment">thE spEcIAl dElImItErs, thEn prOcEss thE</span></span><br><span class="line"><span class="comment">ExtrActEd blOck. </span></span><br><span class="line"><span class="comment"> */</span></span><br></pre></td></tr></table></figure>

<h3 id="13-6-7-reset"><a href="#13-6-7-reset" class="headerlink" title="13.6.7 reset()"></a>13.6.7 reset()</h3><p>通过<code>reset()</code>方法，可以将现有的<code>Matcher</code>对象应用于一个新的字符序列：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Resetting</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Matcher m = Pattern.compile(<span class="string">&quot;[frb][aiu][gx]&quot;</span>)</span><br><span class="line">                .matcher(<span class="string">&quot;fix the rug with bags&quot;</span>);</span><br><span class="line">        <span class="keyword">while</span> (m.find()) &#123;</span><br><span class="line">            System.out.print(m.group() + <span class="string">&quot; &quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println();</span><br><span class="line">        m.reset(<span class="string">&quot;fix the rig with rags&quot;</span>);</span><br><span class="line">        <span class="keyword">while</span> (m.find()) &#123;</span><br><span class="line">            System.out.print(m.group() + <span class="string">&quot; &quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="13-6-8-正则表达式与Java-I-O"><a href="#13-6-8-正则表达式与Java-I-O" class="headerlink" title="13.6.8 正则表达式与Java I/O"></a>13.6.8 正则表达式与Java I/O</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">JGrep</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(args.length&lt;<span class="number">2</span>)&#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;Usage: java JGrep file regex&quot;</span>);</span><br><span class="line">            System.exit(<span class="number">0</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        Pattern p = Pattern.compile(args[<span class="number">1</span>]);</span><br><span class="line">        <span class="keyword">int</span> index = <span class="number">0</span>;</span><br><span class="line">        Matcher m = p.matcher(<span class="string">&quot;&quot;</span>);</span><br><span class="line">        <span class="keyword">for</span> (String line : <span class="keyword">new</span> TextFile(args[<span class="number">0</span>])) &#123;</span><br><span class="line">            m.reset(line);</span><br><span class="line">            <span class="keyword">while</span> (m.find())&#123;</span><br><span class="line">                System.out.println(index++ + <span class="string">&quot;: &quot;</span>+m.group()+<span class="string">&quot;: &quot;</span>+m.start());</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="13-7-扫描输入"><a href="#13-7-扫描输入" class="headerlink" title="13.7 扫描输入"></a>13.7 扫描输入</h2><p>从文件或标准输入读取数据时一件相当痛苦的事情。一般的解决之道就是读入一行文本，对其进行粉刺，然后使用<code>Integer</code>、<code>Double</code>等类的各种解析方法来解析数据：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SimpleRead</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> BufferedReader input = <span class="keyword">new</span> BufferedReader(<span class="keyword">new</span> StringReader(<span class="string">&quot;Sir Robin of Camelot \n22 1.61803&quot;</span>));</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;What is your name?&quot;</span>);</span><br><span class="line">            String name = input.readLine();</span><br><span class="line">            System.out.println(name);</span><br><span class="line">            System.out.println(<span class="string">&quot;How old are you? What is your favorite double?&quot;</span>);</span><br><span class="line">            System.out.println(<span class="string">&quot;(input: &lt;age&gt; &lt;double&gt;)&quot;</span>);</span><br><span class="line">            String numbers = input.readLine();</span><br><span class="line">            System.out.println(numbers);</span><br><span class="line">            String[] numArray = numbers.split(<span class="string">&quot; &quot;</span>);</span><br><span class="line">            <span class="keyword">int</span> age = Integer.parseInt(numArray[<span class="number">0</span>]);</span><br><span class="line">            <span class="keyword">double</span> favorite = Double.parseDouble(numArray[<span class="number">1</span>]);</span><br><span class="line">            System.out.format(<span class="string">&quot;Hi %s.\n&quot;</span>, name);</span><br><span class="line">            System.out.format(<span class="string">&quot;In 5 years you will be %d.\n&quot;</span>, age + <span class="number">5</span>);</span><br><span class="line">            System.out.format(<span class="string">&quot;My favorite double is %f.&quot;</span>, favorite / <span class="number">2</span>);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;I/O exception&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">What is your name?</span></span><br><span class="line"><span class="comment">Sir Robin of Camelot</span></span><br><span class="line"><span class="comment">How old are you? What is your favorite double?</span></span><br><span class="line"><span class="comment">(input: &lt;age&gt; &lt;double&gt;)</span></span><br><span class="line"><span class="comment">22 1.61803</span></span><br><span class="line"><span class="comment">Hi Sir Robin of Camelot .</span></span><br><span class="line"><span class="comment">In 5 years you will be 27.</span></span><br><span class="line"><span class="comment">My favorite double is 0.809015.</span></span><br><span class="line"><span class="comment"> */</span></span><br></pre></td></tr></table></figure>

<p><code>Java SE5</code>新增了<code>Scanner</code>类，可以大大减轻扫描输入的工作负担：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">BetterRead</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Scanner stdin = <span class="keyword">new</span> Scanner(SimpleRead.input);</span><br><span class="line">        System.out.println(<span class="string">&quot;What is your name?&quot;</span>);</span><br><span class="line">        String name = stdin.nextLine();</span><br><span class="line">        System.out.println(name);</span><br><span class="line">        System.out.println(<span class="string">&quot;How old are you? What is your favorite double?&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;input: &lt;age&gt; &lt;double&gt;&quot;</span>);</span><br><span class="line">        <span class="keyword">int</span> age = stdin.nextInt();</span><br><span class="line">        <span class="keyword">double</span> favorite = stdin.nextDouble();</span><br><span class="line">        System.out.format(<span class="string">&quot;Hi %s.\n&quot;</span>, name);</span><br><span class="line">        System.out.format(<span class="string">&quot;In 5 years you will be %d.\n&quot;</span>, age + <span class="number">5</span>);</span><br><span class="line">        System.out.format(<span class="string">&quot;My favorite double is %f.&quot;</span>, favorite / <span class="number">2</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">What is your name?</span></span><br><span class="line"><span class="comment">Sir Robin of Camelot</span></span><br><span class="line"><span class="comment">How old are you? What is your favorite double?</span></span><br><span class="line"><span class="comment">input: &lt;age&gt; &lt;double&gt;</span></span><br><span class="line"><span class="comment">Hi Sir Robin of Camelot .</span></span><br><span class="line"><span class="comment">In 5 years you will be 27.</span></span><br><span class="line"><span class="comment">My favorite double is 0.809015.</span></span><br><span class="line"><span class="comment"> */</span></span><br></pre></td></tr></table></figure>

<h3 id="7-1-Scanner定界符"><a href="#7-1-Scanner定界符" class="headerlink" title="7.1 Scanner定界符"></a>7.1 Scanner定界符</h3><p>在默认情况下，<code>Scanner</code>根据空白字符对输入进行分词，但是你可以用正则表达式指定自己所需的定界符：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ScannerDelimiter</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Scanner scanner = <span class="keyword">new</span> Scanner(<span class="string">&quot;12,42,78,99,42&quot;</span>);</span><br><span class="line">        scanner.useDelimiter(<span class="string">&quot;\\s*,\\s*&quot;</span>);</span><br><span class="line">        <span class="keyword">while</span> (scanner.hasNext())&#123;</span><br><span class="line">            System.out.println(scanner.nextInt());</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">12</span></span><br><span class="line"><span class="comment">42</span></span><br><span class="line"><span class="comment">78</span></span><br><span class="line"><span class="comment">99</span></span><br><span class="line"><span class="comment">42</span></span><br><span class="line"><span class="comment"> */</span></span><br></pre></td></tr></table></figure>

<h3 id="7-2-用正则表达式扫描"><a href="#7-2-用正则表达式扫描" class="headerlink" title="7.2 用正则表达式扫描"></a>7.2 用正则表达式扫描</h3><p>除了能够扫描基本类型之外，还可以使用自定义的正则表达式进行扫描，这在扫描复杂数据的时候非常有用。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ThreatAnalyzer</span> </span>&#123;</span><br><span class="line">    <span class="keyword">static</span> String threatData =</span><br><span class="line">            <span class="string">&quot;58.27.82.161@02/10/2005\n&quot;</span>+</span><br><span class="line">            <span class="string">&quot;204.45.234.40@02/11/2005\n&quot;</span>+</span><br><span class="line">            <span class="string">&quot;58.27.82.161@02/11/2005\n&quot;</span>+</span><br><span class="line">            <span class="string">&quot;58.27.82.161@02/12/2005\n&quot;</span>+</span><br><span class="line">            <span class="string">&quot;58.27.82.161@02/12/2005\n&quot;</span>+</span><br><span class="line">            <span class="string">&quot;[Next log section with different data format]&quot;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Scanner scanner = <span class="keyword">new</span> Scanner(threatData);</span><br><span class="line">        String pattern = <span class="string">&quot;(\\d+[.]\\d+[.]\\d+[.]\\d+)@&quot;</span> +</span><br><span class="line">                <span class="string">&quot;(\\d&#123;2&#125;/\\d&#123;2&#125;/\\d&#123;4&#125;)&quot;</span>;</span><br><span class="line">        <span class="keyword">while</span> (scanner.hasNext(pattern))&#123;</span><br><span class="line">            scanner.next(pattern);</span><br><span class="line">            MatchResult match = scanner.match();</span><br><span class="line">            String ip = match.group(<span class="number">1</span>);</span><br><span class="line">            String date = match.group(<span class="number">2</span>);</span><br><span class="line">            System.out.format(<span class="string">&quot;Threat on %s from %s\n&quot;</span>,date,ip);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">Threat on 02/10/2005 from 58.27.82.161</span></span><br><span class="line"><span class="comment">Threat on 02/11/2005 from 204.45.234.40</span></span><br><span class="line"><span class="comment">Threat on 02/11/2005 from 58.27.82.161</span></span><br><span class="line"><span class="comment">Threat on 02/12/2005 from 58.27.82.161</span></span><br><span class="line"><span class="comment">Threat on 02/12/2005 from 58.27.82.161</span></span><br><span class="line"><span class="comment"> */</span></span><br></pre></td></tr></table></figure>

<h2 id="13-8-StringTokenizer"><a href="#13-8-StringTokenizer" class="headerlink" title="13.8 StringTokenizer"></a>13.8 StringTokenizer</h2><p>在<code>Java</code>引入正则表达式和<code>Scanner</code>类之前，分割字符串的唯一方法是使用<code>StringTokenizer</code>来分词。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ReplacingStringTokenizer</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        String input = <span class="string">&quot;But I&#x27;m not dead yet! I feel happy!&quot;</span>;</span><br><span class="line">        StringTokenizer stoke = <span class="keyword">new</span> StringTokenizer(input);</span><br><span class="line">        <span class="keyword">while</span> (stoke.hasMoreElements())&#123;</span><br><span class="line">            System.out.print(stoke.nextToken()+<span class="string">&quot; &quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println();</span><br><span class="line">        System.out.println(Arrays.toString(input.split(<span class="string">&quot; &quot;</span>)));</span><br><span class="line">        Scanner scanner = <span class="keyword">new</span> Scanner(input);</span><br><span class="line">        <span class="keyword">while</span> (scanner.hasNext())&#123;</span><br><span class="line">            System.out.print(scanner.next()+<span class="string">&quot; &quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">But I&#x27;m not dead yet! I feel happy!</span></span><br><span class="line"><span class="comment">[But, I&#x27;m, not, dead, yet!, I, feel, happy!]</span></span><br><span class="line"><span class="comment">But I&#x27;m not dead yet! I feel happy!</span></span><br><span class="line"><span class="comment"> */</span></span><br></pre></td></tr></table></figure>

<h2 id="延伸阅读"><a href="#延伸阅读" class="headerlink" title="延伸阅读"></a>延伸阅读</h2><ul>
<li><a target="_blank" rel="noopener" href="https://deerchao.net/tutorials/regex/regex.htm">正则表达式30分钟入门教程</a></li>
</ul>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="mailto:undefined">马林康</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="https://malinkang.cn/2016/06/04/strings/">https://malinkang.cn/2016/06/04/strings/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="https://malinkang.cn" target="_blank">马林康的博客</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/Java/">Java</a><a class="post-meta__tags" href="/tags/%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/">读书笔记</a></div><div class="post_share"><div class="social-share" data-image="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/img/default.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js/dist/css/share.min.css"><script src="https://cdn.jsdelivr.net/npm/social-share.js/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/2016/06/11/type-information/"><img class="prev-cover" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/img/default.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">《Java编程思想》读书笔记第14章类型信息</div></div></a></div><div class="next-post pull-right"><a href="/2016/05/28/error-handling-with-exceptions/"><img class="next-cover" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/img/default.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">《Java编程思想》读书笔记第12章通过异常处理错误</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span> 相关推荐</span></div><div class="relatedPosts-list"><div><a href="/2016/01/02/creating-and-destroying-objects/" title="《Effective Java》读书笔记第2章对于所有对象都通用的方法"><img class="cover" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/img/default.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2016-01-02</div><div class="title">《Effective Java》读书笔记第2章对于所有对象都通用的方法</div></div></a></div><div><a href="/2016/01/09/methods-common-to-all-objects/" title="《Effective Java》读书笔记第3章创建和销毁对象"><img class="cover" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/img/default.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2016-01-09</div><div class="title">《Effective Java》读书笔记第3章创建和销毁对象</div></div></a></div><div><a href="/2016/01/16/classes-and-interfaces/" title="《Effective Java》读书笔记第4章类和接口"><img class="cover" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/img/default.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2016-01-16</div><div class="title">《Effective Java》读书笔记第4章类和接口</div></div></a></div><div><a href="/2016/01/30/enums-and-annotations/" title="《Effective Java》读书笔记第6章枚举和注解"><img class="cover" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/img/default.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2016-01-30</div><div class="title">《Effective Java》读书笔记第6章枚举和注解</div></div></a></div><div><a href="/2016/02/27/exceptions/" title="《Effective Java》读书笔记第10章异常"><img class="cover" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/img/default.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2016-02-27</div><div class="title">《Effective Java》读书笔记第10章异常</div></div></a></div><div><a href="/2016/02/06/lambdas-and-streams/" title="《Effective Java》读书笔记第7章lambda表达式和流"><img class="cover" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/img/default.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2016-02-06</div><div class="title">《Effective Java》读书笔记第7章lambda表达式和流</div></div></a></div></div></div><hr/><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i><span> 评论</span></div></div><div class="comment-wrap"><div><div id="disqus_thread"></div></div></div></div></div><div class="aside_content" id="aside_content"><div class="card-widget card-info"><div class="card-content"><div class="card-info-avatar is-center"><img class="avatar-img" src="/img/avatar.jpeg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/><div class="author-info__name">马林康</div><div class="author-info__description"></div></div><div class="card-info-data"><div class="card-info-data-item is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">43</div></a></div><div class="card-info-data-item is-center"><a href="/tags/"><div class="headline">标签</div><div class="length-num">3</div></a></div></div><a class="button--animated" id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/xxxxxx"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons is-center"><a class="social-icon" href="https://github.com/malinkang" target="_blank" title="Github"><i class="fab fa-github"></i></a><a class="social-icon" href="https://twitter.com/maliinkang" target="_blank" title="Twitter"><i class="fab fa-twitter"></i></a><a class="social-icon" href="https://weibo.com/maliinkang" target="_blank" title="Weibo"><i class="fab fa-weibo"></i></a><a class="social-icon" href="https://instagram.com/maliinkang" target="_blank" title="Instagram"><i class="fab fa-instagram"></i></a></div></div></div><div class="card-widget card-announcement"><div class="card-content"><div class="item-headline"><i class="fas fa-bullhorn card-announcement-animation"></i><span>公告</span></div><div class="announcement_content">This is my Blog</div></div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="card-content"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%AC%AC13%E7%AB%A0-%E5%AD%97%E7%AC%A6%E4%B8%B2"><span class="toc-number">1.</span> <span class="toc-text">第13章 字符串</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#13-1-%E4%B8%8D%E5%8F%AF%E5%8F%98String"><span class="toc-number">1.1.</span> <span class="toc-text">13.1 不可变String</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#13-2-%E9%87%8D%E8%BD%BD%E2%80%9C-%E2%80%9D%E4%B8%8EStringBuilder"><span class="toc-number">1.2.</span> <span class="toc-text">13.2 重载“+”与StringBuilder</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#13-3-%E6%97%A0%E6%84%8F%E8%AF%86%E7%9A%84%E9%80%92%E5%BD%92"><span class="toc-number">1.3.</span> <span class="toc-text">13.3 无意识的递归</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#13-4-String%E4%B8%8A%E7%9A%84%E6%93%8D%E4%BD%9C"><span class="toc-number">1.4.</span> <span class="toc-text">13.4 String上的操作</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#13-5-%E6%A0%BC%E5%BC%8F%E5%8C%96%E8%BE%93%E5%87%BA"><span class="toc-number">1.5.</span> <span class="toc-text">13.5 格式化输出</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#13-5-1-printf"><span class="toc-number">1.5.1.</span> <span class="toc-text">13.5.1 printf()</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#13-5-2-System-out-format"><span class="toc-number">1.5.2.</span> <span class="toc-text">13.5.2 System.out.format()</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#13-5-3-Formatter%E7%B1%BB"><span class="toc-number">1.5.3.</span> <span class="toc-text">13.5.3 Formatter类</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#13-5-4-%E6%A0%BC%E5%BC%8F%E5%8C%96%E8%AF%B4%E6%98%8E%E7%AC%A6"><span class="toc-number">1.5.4.</span> <span class="toc-text">13.5.4 格式化说明符</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#13-5-5-Formatter%E8%BD%AC%E6%8D%A2"><span class="toc-number">1.5.5.</span> <span class="toc-text">13.5.5 Formatter转换</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-6-String-format"><span class="toc-number">1.5.6.</span> <span class="toc-text">5.6 String.format()</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#13-6-%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F"><span class="toc-number">1.6.</span> <span class="toc-text">13.6 正则表达式</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#13-6-1-%E5%9F%BA%E7%A1%80"><span class="toc-number">1.6.1.</span> <span class="toc-text">13.6.1 基础</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#13-6-2-%E5%88%9B%E5%BB%BA%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F"><span class="toc-number">1.6.2.</span> <span class="toc-text">13.6.2 创建正则表达式</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#13-6-3-%E9%87%8F%E8%AF%8D"><span class="toc-number">1.6.3.</span> <span class="toc-text">13.6.3 量词</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#13-6-4-Pattern%E5%92%8CMatcher"><span class="toc-number">1.6.4.</span> <span class="toc-text">13.6.4 Pattern和Matcher</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#find"><span class="toc-number">1.6.4.1.</span> <span class="toc-text">find()</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%BB%84%EF%BC%88Groups%EF%BC%89"><span class="toc-number">1.6.4.2.</span> <span class="toc-text">组（Groups）</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#13-6-5-split"><span class="toc-number">1.6.5.</span> <span class="toc-text">13.6.5 split()</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#13-6-6-%E6%9B%BF%E6%8D%A2%E6%93%8D%E4%BD%9C"><span class="toc-number">1.6.6.</span> <span class="toc-text">13.6.6 替换操作</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#13-6-7-reset"><span class="toc-number">1.6.7.</span> <span class="toc-text">13.6.7 reset()</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#13-6-8-%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F%E4%B8%8EJava-I-O"><span class="toc-number">1.6.8.</span> <span class="toc-text">13.6.8 正则表达式与Java I&#x2F;O</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#13-7-%E6%89%AB%E6%8F%8F%E8%BE%93%E5%85%A5"><span class="toc-number">1.7.</span> <span class="toc-text">13.7 扫描输入</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#7-1-Scanner%E5%AE%9A%E7%95%8C%E7%AC%A6"><span class="toc-number">1.7.1.</span> <span class="toc-text">7.1 Scanner定界符</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-2-%E7%94%A8%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F%E6%89%AB%E6%8F%8F"><span class="toc-number">1.7.2.</span> <span class="toc-text">7.2 用正则表达式扫描</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#13-8-StringTokenizer"><span class="toc-number">1.8.</span> <span class="toc-text">13.8 StringTokenizer</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%BB%B6%E4%BC%B8%E9%98%85%E8%AF%BB"><span class="toc-number">1.9.</span> <span class="toc-text">延伸阅读</span></a></li></ol></li></ol></div></div></div><div class="card-widget card-recent-post"><div class="card-content"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2020/12/14/bound-services/" title="绑定服务"><img src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/img/default.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="绑定服务"/></a><div class="content"><a class="title" href="/2020/12/14/bound-services/" title="绑定服务">绑定服务</a><time datetime="2020-12-14T11:18:41.000Z" title="发表于 2020-12-14 19:18:41">2020-12-14</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2020/12/07/workmanager-source-analysis/" title="WorkManager源码分析"><img src="https://malinkang-1253444926.cos.ap-beijing.myqcloud.com/blog/images/cover/指环王.JPG" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="WorkManager源码分析"/></a><div class="content"><a class="title" href="/2020/12/07/workmanager-source-analysis/" title="WorkManager源码分析">WorkManager源码分析</a><time datetime="2020-12-07T12:40:56.000Z" title="发表于 2020-12-07 20:40:56">2020-12-07</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2020/12/02/butterknife-source-analysis/" title="ButterKnife源码分析"><img src="https://malinkang-1253444926.cos.ap-beijing.myqcloud.com/blog/images/cover/疯狂动物城.JPG" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="ButterKnife源码分析"/></a><div class="content"><a class="title" href="/2020/12/02/butterknife-source-analysis/" title="ButterKnife源码分析">ButterKnife源码分析</a><time datetime="2020-12-02T08:37:06.000Z" title="发表于 2020-12-02 16:37:06">2020-12-02</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2020/11/27/rxjava-source-analysis/" title="RxJava源码分析"><img src="https://malinkang-1253444926.cos.ap-beijing.myqcloud.com/blog/images/cover/罗马假日.JPG" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="RxJava源码分析"/></a><div class="content"><a class="title" href="/2020/11/27/rxjava-source-analysis/" title="RxJava源码分析">RxJava源码分析</a><time datetime="2020-11-27T15:47:34.000Z" title="发表于 2020-11-27 23:47:34">2020-11-27</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2020/11/25/leakcanary-source-analysis/" title="Leakcanary源码分析"><img src="https://malinkang-1253444926.cos.ap-beijing.myqcloud.com/blog/images/cover/千与千寻.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Leakcanary源码分析"/></a><div class="content"><a class="title" href="/2020/11/25/leakcanary-source-analysis/" title="Leakcanary源码分析">Leakcanary源码分析</a><time datetime="2020-11-25T12:10:28.000Z" title="发表于 2020-11-25 20:10:28">2020-11-25</time></div></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2014 - 2020 By 马林康</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><a id="to_comment" href="#post-comment" title="直达评论"><i class="fas fa-comments"></i></a><button id="go-up" type="button" title="回到顶部"><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><div class="js-pjax"><script>function loadDisqus () {
  var disqus_config = function () {
    this.page.url = 'https://malinkang.cn/2016/06/04/strings/'
    this.page.identifier = '2016/06/04/strings/'
    this.page.title = '《Java编程思想》读书笔记第13章字符串'
  };

  window.disqusReset = () => {
    DISQUS.reset({
      reload: true,
      config: disqus_config
    })
  }

  if (window.DISQUS) disqusReset()
  else {
    (function() { 
      var d = document, s = d.createElement('script');
      s.src = 'https://malinkang.disqus.com/embed.js';
      s.setAttribute('data-timestamp', +new Date());
      (d.head || d.body).appendChild(s);
    })();
  }
}

if ('Disqus' === 'Disqus' || !false) {
  if (false) btf.loadComment(document.getElementById('disqus_thread'), loadDisqus)
  else loadDisqus()
} else {
  function loadOtherComment () {
    loadDisqus()
  }
}
</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></div></body></html>