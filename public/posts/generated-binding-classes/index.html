<!DOCTYPE html>
<html><head>
<title>生成绑定类</title>

<meta charset="utf-8">
<meta name="X-UA-Compatible" content="IE=edge">
<meta name="google-site-verification" content="">
<meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport">
<meta content="telephone=no" name="format-detection">
<meta name="description" content="">
<meta name="renderer" content="webkit">
<meta name="theme-color" content="#ffffff">




<script src="/vendor/js/jquery.min.js" ></script>
<script src="/vendor/js/popper.min.js" ></script>
<script src="/vendor/js/bootstrap.min.js" ></script>
<script src="/vendor/js/smooth-scroll.polyfills.min.js" ></script>
<link type="text/css" rel="stylesheet" href="/vendor/css/bootstrap.min.css">
<script src="/vendor/js/vue.min.js" ></script>




<link rel="stylesheet" href="https://malinkang.cn/scss/journal.min.56b67b8b01d7cd1015ed14414fd2fc33ebfb2e8413dcbc47c5cd734544c92cd7.css" integrity="sha256-VrZ7iwHXzRAV7RRBT9L8M&#43;v7LoQT3LxHxc1zRUTJLNc=" media="screen">



<link rel="stylesheet" href="https://malinkang.cn/scss/dark-mode.min.5a2bbd1758c83affd639a91fbfd5cc681b1a5574df99442825c444dd40504b13.css" integrity="sha256-Wiu9F1jIOv/WOakfv9XMaBsaVXTfmUQoJcRE3UBQSxM=" media="screen">


<script src="https://malinkang.cn//js/loadCSS.js"></script>
<script>
  loadCSS("https://fonts.googleapis.com/css?family=Lora|Montserrat|Fira+Mono|Noto+Serif+SC|Material+Icons");
</script>

<script src="https://malinkang.cn//js/table.js"></script>




<script src="https://malinkang.cn//js/toc.js"></script>



<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.css">
<script src="https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.min.js"></script>
<script src="/vendor/js/md5.min.js"></script>
<script>
  var gitalk = new Gitalk({
  clientID: 'd84786eae9edb9e6521b',
  clientSecret: 'a30a17b679a15e85b8f257eec4231d5b286e1b58',
  repo: 'malinkang.github.io',
  owner: 'malinkang',
  admin: ['malinkang'],
  id: md5(location.pathname),
  distractionFreeMode: 'false'
  });
  window.onload = function () {
        gitalk.render('gitalk-container')
  }
</script>






</head><body>
    	<div id="app"><div ref="sideContainer" class="side-container">
    
    <a class="a-block nav-head false" href="https://malinkang.cn/">
    
        <div class="nav-title">
            Malinkang‘s Blog
        </div>
        
        <div class="nav-subtitle">
            人生最可悲的事情，莫过于胸怀大志，却又虚度光阴。
        </div>
        
    </a>

    <div class="nav-link-list">
        
        
            
            
            
                
            
            
            
            <a class="a-block nav-link-item active" href="/posts">
                Archive
            </a>
            
        
            
            
            
            
            
            <a class="a-block nav-link-item false" href="https://android.malinkang.cn">
                Android笔记
            </a>
            
        
            
            
            
            
            
            <a class="a-block nav-link-item false" href="https://kotlin.malinkang.cn">
                Kotlin笔记
            </a>
            
        
            
            
            
            
            
            <a class="a-block nav-link-item false" href="/index.xml">
                RSS Feed
            </a>
            
        
    </div>

    

    <div class="nav-footer">
        
Hugo Theme <a href="https://github.com/amazingrise/hugo-theme-diary">Diary</a> by <a href="https://amazingrise.net">Rise</a>
<br>
Ported from <a href="https://mak1t0.cc/" target="_blank" rel="noreferrer noopener">Makito</a>'s <a href="https://github.com/SumiMakito/hexo-theme-journal/" target="_blank" rel="noreferrer noopener">Journal.</a> <br>
<br>

&copy;
	
	This is a customized copyright.
	
    </div>
    
</div><div ref="extraContainer" class="extra-container">
    
    
    <div class="toc animated-visibility" :class="{ invisible: scrollY <= 140 }">


	<div class="toc-content">
	
		
		
		
		<center>- CATALOG -</center>
			
				
				
					
						
						
							<ul>
						
							<ul>
						
						
								<li>
				 					<a href="#%e5%88%9b%e5%bb%ba%e4%b8%80%e4%b8%aa%e7%bb%91%e5%ae%9a%e5%af%b9%e8%b1%a1" v-on:click="closeDrawer" id="创建一个绑定对象-nav">
										 创建一个绑定对象
									</a>
								</li>
						
							</ul>
						
							</ul>
						
					
				
			
				
				
					
						
						
							<ul>
						
							<ul>
						
						
								<li>
				 					<a href="#%e5%b8%a6id%e7%9a%84view" v-on:click="closeDrawer" id="带id的view-nav">
										 带Id的View
									</a>
								</li>
						
							</ul>
						
							</ul>
						
					
				
			
				
				
					
						
						
							<ul>
						
							<ul>
						
						
								<li>
				 					<a href="#%e5%8f%98%e9%87%8f" v-on:click="closeDrawer" id="变量-nav">
										 变量
									</a>
								</li>
						
							</ul>
						
							</ul>
						
					
				
			
				
				
					
						
						
							<ul>
						
							<ul>
						
						
								<li>
				 					<a href="#viewstubs" v-on:click="closeDrawer" id="viewstubs-nav">
										 ViewStubs
									</a>
								</li>
						
							</ul>
						
							</ul>
						
					
				
			
				
				
					
						
						
							<ul>
						
							<ul>
						
						
								<li>
				 					<a href="#%e7%ab%8b%e5%8d%b3%e7%bb%91%e5%ae%9a" v-on:click="closeDrawer" id="立即绑定-nav">
										 立即绑定
									</a>
								</li>
						
							</ul>
						
							</ul>
						
					
				
			
				
				
					
						
						
							<ul>
						
							<ul>
						
						
								<li>
				 					<a href="#%e9%ab%98%e7%ba%a7%e7%bb%91%e5%ae%9a" v-on:click="closeDrawer" id="高级绑定-nav">
										 高级绑定
									</a>
								</li>
						
							</ul>
						
							</ul>
						
					
				
			
				
				
					
						
						
							<ul>
						
							<ul>
						
							<ul>
						
						
								<li>
				 					<a href="#%e5%8a%a8%e6%80%81%e5%8f%98%e9%87%8f" v-on:click="closeDrawer" id="动态变量-nav">
										 动态变量
									</a>
								</li>
						
							</ul>
						
							</ul>
						
							</ul>
						
					
				
			
				
				
					
						
						
							<ul>
						
							<ul>
						
						
								<li>
				 					<a href="#%e5%90%8e%e5%8f%b0%e7%ba%bf%e7%a8%8b" v-on:click="closeDrawer" id="后台线程-nav">
										 后台线程
									</a>
								</li>
						
							</ul>
						
							</ul>
						
					
				
			
				
				
					
						
						
							<ul>
						
							<ul>
						
						
								<li>
				 					<a href="#%e8%87%aa%e5%ae%9a%e4%b9%89%e7%bb%91%e5%ae%9a%e7%b1%bb%e5%90%8d%e5%ad%97" v-on:click="closeDrawer" id="自定义绑定类名字-nav">
										 自定义绑定类名字
									</a>
								</li>
						
							</ul>
						
							</ul>
						
					
				
			
	</div>

</div>
    
    <div class="pagination">
        <a id="globalBackToTop" class="pagination-action animated-visibility" href="#top" :class="{ invisible: scrollY == 0 }">
            <i class="material-icons pagination-action-icon">
                keyboard_arrow_up
            </i>
        </a>
        
        <a class="pagination-action" v-on:click="toggleDarkMode">
            <i class="material-icons pagination-action-icon" v-if="isDarkMode">
                brightness_4
            </i>
            <i class="material-icons pagination-action-icon" v-else="isDarkMode">
                brightness_7
            </i>
        </a>
        
        
    </div>
</div><div class="single-column-drawer-container" ref="drawer"
     v-bind:class="{ 'single-column-drawer-container-active': isDrawerOpen }">
    <div class="drawer-content">
        <div class="drawer-menu">
            
            
            
                
                
                
                    
                
                
                
                <a class="a-block drawer-menu-item active" href="/posts">
                    Archive
                </a>
                
            
                
                
                
                
                
                <a class="a-block drawer-menu-item false" href="https://android.malinkang.cn">
                    Android笔记
                </a>
                
            
                
                
                
                
                
                <a class="a-block drawer-menu-item false" href="https://kotlin.malinkang.cn">
                    Kotlin笔记
                </a>
                
            
                
                
                
                
                
                <a class="a-block drawer-menu-item false" href="/index.xml">
                    RSS Feed
                </a>
                
            
            
            <div class="toc">


	<div class="toc-content">
	
		
		
		
		<center>- CATALOG -</center>
			
				
				
					
						
						
							<ul>
						
							<ul>
						
						
								<li>
				 					<a href="#%e5%88%9b%e5%bb%ba%e4%b8%80%e4%b8%aa%e7%bb%91%e5%ae%9a%e5%af%b9%e8%b1%a1" v-on:click="closeDrawer" id="创建一个绑定对象-nav">
										 创建一个绑定对象
									</a>
								</li>
						
							</ul>
						
							</ul>
						
					
				
			
				
				
					
						
						
							<ul>
						
							<ul>
						
						
								<li>
				 					<a href="#%e5%b8%a6id%e7%9a%84view" v-on:click="closeDrawer" id="带id的view-nav">
										 带Id的View
									</a>
								</li>
						
							</ul>
						
							</ul>
						
					
				
			
				
				
					
						
						
							<ul>
						
							<ul>
						
						
								<li>
				 					<a href="#%e5%8f%98%e9%87%8f" v-on:click="closeDrawer" id="变量-nav">
										 变量
									</a>
								</li>
						
							</ul>
						
							</ul>
						
					
				
			
				
				
					
						
						
							<ul>
						
							<ul>
						
						
								<li>
				 					<a href="#viewstubs" v-on:click="closeDrawer" id="viewstubs-nav">
										 ViewStubs
									</a>
								</li>
						
							</ul>
						
							</ul>
						
					
				
			
				
				
					
						
						
							<ul>
						
							<ul>
						
						
								<li>
				 					<a href="#%e7%ab%8b%e5%8d%b3%e7%bb%91%e5%ae%9a" v-on:click="closeDrawer" id="立即绑定-nav">
										 立即绑定
									</a>
								</li>
						
							</ul>
						
							</ul>
						
					
				
			
				
				
					
						
						
							<ul>
						
							<ul>
						
						
								<li>
				 					<a href="#%e9%ab%98%e7%ba%a7%e7%bb%91%e5%ae%9a" v-on:click="closeDrawer" id="高级绑定-nav">
										 高级绑定
									</a>
								</li>
						
							</ul>
						
							</ul>
						
					
				
			
				
				
					
						
						
							<ul>
						
							<ul>
						
							<ul>
						
						
								<li>
				 					<a href="#%e5%8a%a8%e6%80%81%e5%8f%98%e9%87%8f" v-on:click="closeDrawer" id="动态变量-nav">
										 动态变量
									</a>
								</li>
						
							</ul>
						
							</ul>
						
							</ul>
						
					
				
			
				
				
					
						
						
							<ul>
						
							<ul>
						
						
								<li>
				 					<a href="#%e5%90%8e%e5%8f%b0%e7%ba%bf%e7%a8%8b" v-on:click="closeDrawer" id="后台线程-nav">
										 后台线程
									</a>
								</li>
						
							</ul>
						
							</ul>
						
					
				
			
				
				
					
						
						
							<ul>
						
							<ul>
						
						
								<li>
				 					<a href="#%e8%87%aa%e5%ae%9a%e4%b9%89%e7%bb%91%e5%ae%9a%e7%b1%bb%e5%90%8d%e5%ad%97" v-on:click="closeDrawer" id="自定义绑定类名字-nav">
										 自定义绑定类名字
									</a>
								</li>
						
							</ul>
						
							</ul>
						
					
				
			
	</div>

</div>
            
        </div>
    </div>
</div>
<transition name="fade">
    <div v-bind:class="{ 'single-column-drawer-mask': mounted }" v-if="isDrawerOpen" v-on:click="toggleDrawer"></div>
</transition>
<nav ref="navBar" class="navbar sticky-top navbar-light single-column-nav-container">
    <div ref="navBackground" class="nav-background"></div>
    <div class="container container-narrow nav-content">
        <button id="nav_dropdown_btn" class="nav-dropdown-toggle" type="button" v-on:click="toggleDrawer">
            <i class="material-icons">
                menu
            </i>
        </button>
        <a ref="navTitle" class="navbar-brand" href="https://malinkang.cn/">
            Malinkang‘s Blog
        </a>
        
        <button type="button" class="nav-darkmode-toggle" v-on:click="toggleDarkMode">
            <i class="material-icons" v-if="isDarkMode">
                brightness_4
            </i>
            <i class="material-icons" v-else="isDarkMode">
                brightness_7
            </i>
        </button>
        
    </div>
</nav>
<div class="single-column-header-container" ref="pageHead"
     v-bind:style="{ transform: 'translateZ(0px) translateY('+.3*scrollY+'px)', opacity: 1-navOpacity }">
    <a href="https://malinkang.cn/">
        <div class="single-column-header-title">Malinkang‘s Blog</div>
        
        <div class="single-column-header-subtitle">人生最可悲的事情，莫过于胸怀大志，却又虚度光阴。</div>
        

    </a>
</div>
            <div id="content">
<div ref="streamContainer" class="stream-container">
    <div class="post-list-container post-list-container-shadow">
        <div class="post">
            
            
            

            <div class="post-head-wrapper-text-only"
                
            >
                <div class="post-title">
                    生成绑定类
                    
                    <div class="post-meta">
                        
                        <time itemprop="datePublished">
                            2017-06-19 20:01
                        </time>
                        

                        

                        
                            <i class="material-icons" style="">label</i>
                            
                                <a href="/tags/android">android</a>
                                &nbsp;
                            
                                <a href="/tags/databinding">databinding</a>
                                &nbsp;
                            
                        
                        
                    </div>
                </div>
            </div>
            
            <div class="post-body-wrapper">
                <div class="post-body">
                    <p>数据绑定库生成用于访问布局的变量和视图的绑定类。生成的绑定类将布局变量与布局中的视图链接起来。绑定类的名称和包可以自定义。所有生成的绑定类都继承自<code>ViewDataBinding</code>类。</p>
<p>为每个布局文件生成绑定类。默认情况下，类的名称基于布局文件的名称，将其转换为<code>Pascal</code>大小写并向其添加<code>Binding</code>后缀。布局文件名是<code>activity_main.xml</code>，因此相应的生成类是<code>ActivityMainBinding</code>。此类包含布局属性（例如，用户变量）到布局视图的所有绑定，并知道如何为绑定表达式指定值。</p>
<h2 id="创建一个绑定对象">创建一个绑定对象</h2>
<p>在对布局进行<code>inflate</code>之后，应该很快创建绑定对象，以确保在使用布局中的表达式绑定到视图之前不会修改视图层次结构。将对象绑定到布局的最常用方法是使用绑定类上的静态方法。您可以通过使用绑定类的<code>inflate()</code>方法来扩展视图层次结构并将对象绑定到该层次结构，如以下示例所示：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#a6e22e">@Override</span>
<span style="color:#66d9ef">protected</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">onCreate</span><span style="color:#f92672">(</span>Bundle savedInstanceState<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
  <span style="color:#66d9ef">super</span><span style="color:#f92672">.</span><span style="color:#a6e22e">onCreate</span><span style="color:#f92672">(</span>savedInstanceState<span style="color:#f92672">);</span>
  MyLayoutBinding binding <span style="color:#f92672">=</span> MyLayoutBinding<span style="color:#f92672">.</span><span style="color:#a6e22e">inflate</span><span style="color:#f92672">(</span>getLayoutInflater<span style="color:#f92672">());</span>
<span style="color:#f92672">}</span>
</code></pre></div><p>还有另外一个版本的<code>inflate()</code>方法，它除了<code>LayoutInflater</code>对象之外，还接受一个<code>ViewGroup</code>对象，如下例所示：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java">MyLayoutBinding binding <span style="color:#f92672">=</span> MyLayoutBinding<span style="color:#f92672">.</span><span style="color:#a6e22e">inflate</span><span style="color:#f92672">(</span>getLayoutInflater<span style="color:#f92672">(),</span> viewGroup<span style="color:#f92672">,</span> <span style="color:#66d9ef">false</span><span style="color:#f92672">);</span>
</code></pre></div><p>如果使用不同的机制对布局进行了<code>inflate</code>，则可以单独绑定，如下所示：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java">MyLayoutBinding binding <span style="color:#f92672">=</span> MyLayoutBinding<span style="color:#f92672">.</span><span style="color:#a6e22e">bind</span><span style="color:#f92672">(</span>viewRoot<span style="color:#f92672">);</span>
</code></pre></div><p>有时不能事先知道绑定类型。在这种情况下，可以使用<code>DataBindingUtil</code>类创建绑定，如以下代码段所示：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java">View viewRoot <span style="color:#f92672">=</span> LayoutInflater<span style="color:#f92672">.</span><span style="color:#a6e22e">from</span><span style="color:#f92672">(</span><span style="color:#66d9ef">this</span><span style="color:#f92672">).</span><span style="color:#a6e22e">inflate</span><span style="color:#f92672">(</span>layoutId<span style="color:#f92672">,</span> parent<span style="color:#f92672">,</span> attachToParent<span style="color:#f92672">);</span>
ViewDataBinding binding <span style="color:#f92672">=</span> DataBindingUtil<span style="color:#f92672">.</span><span style="color:#a6e22e">bind</span><span style="color:#f92672">(</span>viewRoot<span style="color:#f92672">);</span>
</code></pre></div><p>如果在<code>Fragment</code>，<code>ListView</code>或<code>RecyclerView</code>适配器中使用数据绑定项，则可能更喜欢使用绑定类或<code>DataBindingUtil</code>类的<code>inflate()</code>方法，如以下代码示例所示：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java">ListItemBinding binding <span style="color:#f92672">=</span> ListItemBinding<span style="color:#f92672">.</span><span style="color:#a6e22e">inflate</span><span style="color:#f92672">(</span>layoutInflater<span style="color:#f92672">,</span> viewGroup<span style="color:#f92672">,</span> <span style="color:#66d9ef">false</span><span style="color:#f92672">);</span>
<span style="color:#75715e">// or
</span><span style="color:#75715e"></span>ListItemBinding binding <span style="color:#f92672">=</span> DataBindingUtil<span style="color:#f92672">.</span><span style="color:#a6e22e">inflate</span><span style="color:#f92672">(</span>layoutInflater<span style="color:#f92672">,</span> R<span style="color:#f92672">.</span><span style="color:#a6e22e">layout</span><span style="color:#f92672">.</span><span style="color:#a6e22e">list_item</span><span style="color:#f92672">,</span> viewGroup<span style="color:#f92672">,</span> <span style="color:#66d9ef">false</span><span style="color:#f92672">);</span>
</code></pre></div><h2 id="带id的view">带Id的View</h2>
<p>数据绑定库在绑定类中为每个在布局中具有ID的视图创建不可变字段。例如，数据绑定库从以下布局创建类型为<code>TextView</code>的<code>firstName</code>和<code>lastName</code>字段。</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-xml" data-lang="xml"><span style="color:#f92672">&lt;layout</span> <span style="color:#a6e22e">xmlns:android=</span><span style="color:#e6db74">&#34;http://schemas.android.com/apk/res/android&#34;</span><span style="color:#f92672">&gt;</span>
 <span style="color:#f92672">&lt;data&gt;</span>
   <span style="color:#f92672">&lt;variable</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;user&#34;</span> <span style="color:#a6e22e">type=</span><span style="color:#e6db74">&#34;com.example.User&#34;</span><span style="color:#f92672">/&gt;</span>
 <span style="color:#f92672">&lt;/data&gt;</span>
 <span style="color:#f92672">&lt;LinearLayout</span>
   <span style="color:#a6e22e">android:orientation=</span><span style="color:#e6db74">&#34;vertical&#34;</span>
   <span style="color:#a6e22e">android:layout_width=</span><span style="color:#e6db74">&#34;match_parent&#34;</span>
   <span style="color:#a6e22e">android:layout_height=</span><span style="color:#e6db74">&#34;match_parent&#34;</span><span style="color:#f92672">&gt;</span>
   <span style="color:#f92672">&lt;TextView</span> <span style="color:#a6e22e">android:layout_width=</span><span style="color:#e6db74">&#34;wrap_content&#34;</span>
     <span style="color:#a6e22e">android:layout_height=</span><span style="color:#e6db74">&#34;wrap_content&#34;</span>
     <span style="color:#a6e22e">android:text=</span><span style="color:#e6db74">&#34;@{user.firstName}&#34;</span>
     <span style="color:#a6e22e">android:id=</span><span style="color:#e6db74">&#34;@+id/firstName&#34;</span><span style="color:#f92672">/&gt;</span>
   <span style="color:#f92672">&lt;TextView</span> <span style="color:#a6e22e">android:layout_width=</span><span style="color:#e6db74">&#34;wrap_content&#34;</span>
     <span style="color:#a6e22e">android:layout_height=</span><span style="color:#e6db74">&#34;wrap_content&#34;</span>
     <span style="color:#a6e22e">android:text=</span><span style="color:#e6db74">&#34;@{user.lastName}&#34;</span>
     <span style="color:#a6e22e">android:id=</span><span style="color:#e6db74">&#34;@+id/lastName&#34;</span><span style="color:#f92672">/&gt;</span>
 <span style="color:#f92672">&lt;/LinearLayout&gt;</span>
<span style="color:#f92672">&lt;/layout&gt;</span>
</code></pre></div><p>该库在一次传递中从视图层次结构中提取包括ID的视图。此机制比为布局中的每个视图调用<code>findViewById()</code>方法更快。</p>
<p>ID没有必要，因为它们没有数据绑定，但仍有一些情况需要从代码访问视图。</p>
<h2 id="变量">变量</h2>
<p>数据绑定库为布局中声明的每个变量生成访问器方法。例如，以下布局在绑定类中为变量<code>user</code>，<code>image</code>和注<code>image</code>的生成<code>setter</code>和<code>getter</code>方法：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-xml" data-lang="xml"><span style="color:#f92672">&lt;data&gt;</span>
 <span style="color:#f92672">&lt;import</span> <span style="color:#a6e22e">type=</span><span style="color:#e6db74">&#34;android.graphics.drawable.Drawable&#34;</span><span style="color:#f92672">/&gt;</span>
 <span style="color:#f92672">&lt;variable</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;user&#34;</span> <span style="color:#a6e22e">type=</span><span style="color:#e6db74">&#34;com.example.User&#34;</span><span style="color:#f92672">/&gt;</span>
 <span style="color:#f92672">&lt;variable</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;image&#34;</span> <span style="color:#a6e22e">type=</span><span style="color:#e6db74">&#34;Drawable&#34;</span><span style="color:#f92672">/&gt;</span>
 <span style="color:#f92672">&lt;variable</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;note&#34;</span> <span style="color:#a6e22e">type=</span><span style="color:#e6db74">&#34;String&#34;</span><span style="color:#f92672">/&gt;</span>
<span style="color:#f92672">&lt;/data&gt;</span>
</code></pre></div><h2 id="viewstubs">ViewStubs</h2>
<p>与普通<code>View</code>不同，<code>ViewStub</code>对象从一个不可见的视图开始。当它们被显示或被明确告知要<code>inflate</code>时，它们会通过<code>inflate</code>另一个布局来替换自己的布局。</p>
<p>由于<code>ViewStub</code>从视图层次结构中消失，因此绑定对象中的视图也必须消失以允许垃圾回收声明。因为视图是最终的，所以<code>ViewStubProxy</code>对象取代了生成的绑定类中的<code>ViewStub</code>，使您可以在<code>ViewStub</code>存在时访问它，并在<code>ViewStub</code> <code>inflate</code>时访问<code>inflate</code>的视图层次结构。</p>
<p>在<code>inflate</code>另一个布局时，必须为新布局建立绑定。因此，<code>ViewStubProxy</code>必须监听<code>ViewStub OnInflateListener</code>并在需要时建立绑定。由于在给定时间只能存在一个侦听器，因此<code>ViewStubProxy</code>允许您设置<code>OnInflateListener</code>，它在建立绑定后调用它。</p>
<h2 id="立即绑定">立即绑定</h2>
<p>当变量或可观察对象发生更改时，绑定计划在下一帧之前更改。但是，有时必须立即执行绑定。要强制执行，请使用<code>executePendingBindings()</code>方法。</p>
<h2 id="高级绑定">高级绑定</h2>
<h3 id="动态变量">动态变量</h3>
<p>有时，特定的绑定类是未知的。例如，针对任意布局操作的<code>RecyclerView.Adapter</code>不知道特定的绑定类。它仍然必须在调用<code>onBindViewHolde()</code>方法期间分配绑定值。</p>
<p>在下面的例子中，<code>RecyclerView</code>绑定的所有布局都有一个<code>item</code>变量。 <code>BindingHolder</code>对象有一个<code>getBinding()</code>方法返回<code>ViewDataBinding</code>基类。</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">onBindViewHolder</span><span style="color:#f92672">(</span>BindingHolder holder<span style="color:#f92672">,</span> <span style="color:#66d9ef">int</span> position<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
  <span style="color:#66d9ef">final</span> T item <span style="color:#f92672">=</span> items<span style="color:#f92672">.</span><span style="color:#a6e22e">get</span><span style="color:#f92672">(</span>position<span style="color:#f92672">);</span>
  holder<span style="color:#f92672">.</span><span style="color:#a6e22e">getBinding</span><span style="color:#f92672">().</span><span style="color:#a6e22e">setVariable</span><span style="color:#f92672">(</span>BR<span style="color:#f92672">.</span><span style="color:#a6e22e">item</span><span style="color:#f92672">,</span> item<span style="color:#f92672">);</span>
  holder<span style="color:#f92672">.</span><span style="color:#a6e22e">getBinding</span><span style="color:#f92672">().</span><span style="color:#a6e22e">executePendingBindings</span><span style="color:#f92672">();</span>
<span style="color:#f92672">}</span>
</code></pre></div><blockquote>
<p>注意：数据绑定库在模块包中生成一个名为BR的类，其中包含用于数据绑定的资源的ID。在上面的示例中，库自动生成BR.item变量。</p>
</blockquote>
<h2 id="后台线程">后台线程</h2>
<p>您可以在后台线程中更改数据模型，只要它不是集合即可。数据绑定在评估期间本地化每个变量/字段以避免任何并发问题。</p>
<h2 id="自定义绑定类名字">自定义绑定类名字</h2>
<p>默认情况下，将根据布局文件的名称生成绑定类，以大写字母开头，删除下划线（_），大写以下字母，并为单词<code>Binding</code>添加后缀。该类放在模块包下的数据绑定包中。例如，布局文件<code>contact_item.xml</code>生成<code>ContactItemBinding</code>类。如果模块包是<code>com.example.my.app</code>，则绑定类放在<code>com.example.my.app.databinding</code>包中。</p>
<p>通过调整数据元素的class属性，可以重命名绑定类或将绑定类放在不同的包中。例如，以下布局在当前模块的数据绑定包中生成<code>ContactItem</code>绑定类：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-xml" data-lang="xml"><span style="color:#f92672">&lt;data</span> <span style="color:#a6e22e">class=</span><span style="color:#e6db74">&#34;ContactItem&#34;</span><span style="color:#f92672">&gt;</span>
  …
<span style="color:#f92672">&lt;/data&gt;</span>
</code></pre></div><p>您可以通过在类名前加一个句点来为不同的包生成绑定类。以下示例在模块包中生成绑定类：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-xml" data-lang="xml"><span style="color:#f92672">&lt;data</span> <span style="color:#a6e22e">class=</span><span style="color:#e6db74">&#34;.ContactItem&#34;</span><span style="color:#f92672">&gt;</span>
  …
<span style="color:#f92672">&lt;/data&gt;</span>
</code></pre></div><p>您还可以使用要在其中生成绑定类的完整包名称。以下示例在<code>com.example</code>包中创建<code>ContactItem</code>绑定类：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-xml" data-lang="xml"><span style="color:#f92672">&lt;data</span> <span style="color:#a6e22e">class=</span><span style="color:#e6db74">&#34;com.example.ContactItem&#34;</span><span style="color:#f92672">&gt;</span>
  …
<span style="color:#f92672">&lt;/data&gt;</span>
</code></pre></div>
                    
                    <HR width="100%" id="EOF">
                    <p style="color:#777;">Last modified on 2017-06-19</p>
                    
                </div>
            </div>
            
            
            <nav class="post-pagination">

                
                <a class="newer-posts" href="https://malinkang.cn/posts/goodbye-xiao-hua/">
                    Next<br>小花，再见
                </a>
                
                
                
                <a class="older-posts" href="https://malinkang.cn/posts/binding-adapters/">
                    Previous<br>绑定适配器使用
                </a>
                
            </nav>
            <div class="post-comment-wrapper">
                


<div id="gitalk-container"></div>





            </div>
        </div>
    </div>
</div>

            </div><div id="single-column-footer">
Hugo Theme <a href="https://github.com/amazingrise/hugo-theme-diary">Diary</a> by <a href="https://amazingrise.net">Rise</a>
<br>
Ported from <a href="https://mak1t0.cc/" target="_blank" rel="noreferrer noopener">Makito</a>'s <a href="https://github.com/SumiMakito/hexo-theme-journal/" target="_blank" rel="noreferrer noopener">Journal.</a> <br>
<br>

&copy;
	
	This is a customized copyright.
	</div>
    	</div>
    <script src="https://malinkang.cn//js/journal.js"></script>
    </body>
</html>
