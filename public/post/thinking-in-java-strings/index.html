<!DOCTYPE html>
<html lang="zh-cn">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <title>《Java编程思想》第13章字符串 - 人生最可悲的事情，莫过于胸怀大志，却又虚度光阴。</title>
  <meta name="renderer" content="webkit" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>

<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />

<meta name="theme-color" content="#f8f5ec" />
<meta name="msapplication-navbutton-color" content="#f8f5ec">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="#f8f5ec">


<meta name="author" content="malinkang" /><meta name="description" content="第13章 字符串 13.1 不可变String 1 2 3 4 5 6 7 8 9 10 11 12 13 public class Immutable { public static String upcase(String s){ return s.toUpperCase(); } public static void main(String[] args) { String q = &amp;#34;howdy&amp;#34;; System.out.println(q); String qq = upcase(q); System.out.println(qq); System.out.println(q); } } 当把q传给upca" /><meta name="keywords" content="Hugo, theme, even" />






<meta name="generator" content="Hugo 0.80.0 with theme even" />


<link rel="canonical" href="https://malinkang.cn/post/thinking-in-java-strings/" />
<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="manifest" href="/manifest.json">
<link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">



<link href="/sass/main.min.c12ac5d6e912b28ec1fcd71d47773cc8112a03296d4ff03660135b54f0923299.css" rel="stylesheet">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.1.20/dist/jquery.fancybox.min.css" integrity="sha256-7TyXnr2YU040zfSP+rEcz29ggW4j56/ujTPwjMzyqFY=" crossorigin="anonymous">


<meta property="og:title" content="《Java编程思想》第13章字符串" />
<meta property="og:description" content="第13章 字符串 13.1 不可变String 1 2 3 4 5 6 7 8 9 10 11 12 13 public class Immutable { public static String upcase(String s){ return s.toUpperCase(); } public static void main(String[] args) { String q = &#34;howdy&#34;; System.out.println(q); String qq = upcase(q); System.out.println(qq); System.out.println(q); } } 当把q传给upca" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://malinkang.cn/post/thinking-in-java-strings/" />
<meta property="article:published_time" content="2013-06-04T13:39:36+00:00" />
<meta property="article:modified_time" content="2013-06-04T13:39:36+00:00" />
<meta itemprop="name" content="《Java编程思想》第13章字符串">
<meta itemprop="description" content="第13章 字符串 13.1 不可变String 1 2 3 4 5 6 7 8 9 10 11 12 13 public class Immutable { public static String upcase(String s){ return s.toUpperCase(); } public static void main(String[] args) { String q = &#34;howdy&#34;; System.out.println(q); String qq = upcase(q); System.out.println(qq); System.out.println(q); } } 当把q传给upca">
<meta itemprop="datePublished" content="2013-06-04T13:39:36+00:00" />
<meta itemprop="dateModified" content="2013-06-04T13:39:36+00:00" />
<meta itemprop="wordCount" content="9501">



<meta itemprop="keywords" content="Thinking in Java," />
<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="《Java编程思想》第13章字符串"/>
<meta name="twitter:description" content="第13章 字符串 13.1 不可变String 1 2 3 4 5 6 7 8 9 10 11 12 13 public class Immutable { public static String upcase(String s){ return s.toUpperCase(); } public static void main(String[] args) { String q = &#34;howdy&#34;; System.out.println(q); String qq = upcase(q); System.out.println(qq); System.out.println(q); } } 当把q传给upca"/>

<!--[if lte IE 9]>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/classlist/1.1.20170427/classList.min.js"></script>
<![endif]-->

<!--[if lt IE 9]>
  <script src="https://cdn.jsdelivr.net/npm/html5shiv@3.7.3/dist/html5shiv.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/respond.js@1.4.2/dest/respond.min.js"></script>
<![endif]-->

</head>
<body>
  <div id="mobile-navbar" class="mobile-navbar">
  <div class="mobile-header-logo">
    <a href="/" class="logo">Malinkang&#39;s Blog</a>
  </div>
  <div class="mobile-navbar-icon">
    <span></span>
    <span></span>
    <span></span>
  </div>
</div>
<nav id="mobile-menu" class="mobile-menu slideout-menu">
  <ul class="mobile-menu-list">
    <a href="/">
        <li class="mobile-menu-item">首页</li>
      </a><a href="/post/">
        <li class="mobile-menu-item">归档</li>
      </a><a href="/tags/">
        <li class="mobile-menu-item">标签</li>
      </a>
  </ul>
</nav>
  <div class="container" id="mobile-panel">
    <header id="header" class="header">
        <div class="logo-wrapper">
  <a href="/" class="logo">Malinkang&#39;s Blog</a>
</div>

<nav class="site-navbar">
  <ul id="menu" class="menu">
    <li class="menu-item">
        <a class="menu-item-link" href="/">首页</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/post/">归档</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/tags/">标签</a>
      </li>
  </ul>
</nav>
    </header>

    <main id="main" class="main">
      <div class="content-wrapper">
        <div id="content" class="content">
          <article class="post">
    
    <header class="post-header">
      <h1 class="post-title">《Java编程思想》第13章字符串</h1>

      <div class="post-meta">
        <span class="post-time"> 2013-06-04 </span>
        
        
      </div>
    </header>

    <div class="post-toc" id="post-toc">
  <h2 class="post-toc-title">文章目录</h2>
  <div class="post-toc-content always-active">
    <nav id="TableOfContents">
  <ul>
    <li><a href="#131-不可变string">13.1 不可变String</a></li>
    <li><a href="#132-重载与stringbuilder">13.2 重载“+”与StringBuilder</a></li>
    <li><a href="#133-无意识的递归">13.3 无意识的递归</a></li>
    <li><a href="#134-string上的操作">13.4 String上的操作</a></li>
    <li><a href="#135-格式化输出">13.5 格式化输出</a>
      <ul>
        <li><a href="#1351-printf">13.5.1 printf()</a></li>
        <li><a href="#1352-systemoutformat">13.5.2 System.out.format()</a></li>
        <li><a href="#1353-formatter类">13.5.3 Formatter类</a></li>
        <li><a href="#1354-格式化说明符">13.5.4 格式化说明符</a></li>
        <li><a href="#1355-formatter转换">13.5.5 Formatter转换</a></li>
        <li><a href="#56-stringformat">5.6 String.format()</a></li>
      </ul>
    </li>
    <li><a href="#136-正则表达式">13.6 正则表达式</a>
      <ul>
        <li><a href="#1361-基础">13.6.1 基础</a></li>
        <li><a href="#1362-创建正则表达式">13.6.2 创建正则表达式</a></li>
        <li><a href="#1363-量词">13.6.3 量词</a></li>
        <li><a href="#1364-pattern和matcher">13.6.4 Pattern和Matcher</a></li>
        <li><a href="#1365-split">13.6.5 split()</a></li>
        <li><a href="#1366-替换操作">13.6.6 替换操作</a></li>
        <li><a href="#1367-reset">13.6.7 reset()</a></li>
        <li><a href="#1368-正则表达式与java-io">13.6.8 正则表达式与Java I/O</a></li>
      </ul>
    </li>
    <li><a href="#137-扫描输入">13.7 扫描输入</a>
      <ul>
        <li><a href="#71-scanner定界符">7.1 Scanner定界符</a></li>
        <li><a href="#72-用正则表达式扫描">7.2 用正则表达式扫描</a></li>
      </ul>
    </li>
    <li><a href="#138-stringtokenizer">13.8 StringTokenizer</a></li>
    <li><a href="#string相关面试题">String相关面试题</a></li>
    <li><a href="#参考">参考</a></li>
  </ul>
</nav>
  </div>
</div>
    <div class="post-content">
      <h1 id="第13章-字符串">第13章 字符串</h1>
<h2 id="131-不可变string">13.1 不可变String</h2>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Immutable</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="n">String</span> <span class="nf">upcase</span><span class="o">(</span><span class="n">String</span> <span class="n">s</span><span class="o">){</span>
        <span class="k">return</span> <span class="n">s</span><span class="o">.</span><span class="na">toUpperCase</span><span class="o">();</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">String</span> <span class="n">q</span> <span class="o">=</span> <span class="s">&#34;howdy&#34;</span><span class="o">;</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">q</span><span class="o">);</span>
        <span class="n">String</span> <span class="n">qq</span> <span class="o">=</span> <span class="n">upcase</span><span class="o">(</span><span class="n">q</span><span class="o">);</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">qq</span><span class="o">);</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">q</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></td></tr></table>
</div>
</div><p>当把<code>q</code>传给<code>upcase()</code>方法时，实际传递的是引用的一份拷贝。其实，<strong>每当把</strong><code>String</code><strong>对象作为方法的参数时，都会复制一份引用</strong>，而该引用所指的对象其实一直待在单一的物理位置上，从未动过。</p>
<p>回到<code>upcase()</code>的定义，传入其中的引用有了名字<code>s</code>,只有<code>upcase()</code>运行的时候，局部引用<code>s</code>才存在。一旦<code>upcase()</code>运行结束，<code>s</code>就消失了。当然了，<code>upcase()</code>的返回值，其实只是最终结果的引用。这足以说明，<code>upcase()</code>返回的引用已经指向了一个新的对象，而原本的<code>q</code>则还在原地。</p>
<h2 id="132-重载与stringbuilder">13.2 重载“+”与StringBuilder</h2>
<p>操作符“+”可以用来连接<code>String</code>。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Concatenation</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">String</span> <span class="n">mango</span> <span class="o">=</span>  <span class="s">&#34;mango&#34;</span><span class="o">;</span>
        <span class="n">String</span> <span class="n">s</span> <span class="o">=</span> <span class="s">&#34;abc&#34;</span><span class="o">+</span><span class="n">mango</span><span class="o">+</span><span class="s">&#34;def&#34;</span><span class="o">+</span><span class="n">47</span><span class="o">;</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">s</span><span class="o">);</span><span class="c1">//abcmangodef47
</span><span class="c1"></span>    <span class="o">}</span>
<span class="o">}</span>
</code></pre></td></tr></table>
</div>
</div><p>用<code>JDK</code>自带的工具<code>javap</code>来反编译以上代码。命令如下</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-text" data-lang="text">javap -c Concatenation
</code></pre></td></tr></table>
</div>
</div><p><code>-c</code>标志表示将生成<code>JVM</code>字节码。剔除不感兴趣的部分，有了以下的字节码。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">java</span><span class="o">.</span><span class="na">lang</span><span class="o">.</span><span class="na">String</span><span class="o">[]);</span>
<span class="nl">Code:</span>
   <span class="n">0</span><span class="o">:</span> <span class="n">ldc</span>           <span class="err">#</span><span class="n">2</span>                  <span class="c1">// String mango
</span><span class="c1"></span>   <span class="n">2</span><span class="o">:</span> <span class="n">astore_1</span>
   <span class="n">3</span><span class="o">:</span> <span class="k">new</span>           <span class="err">#</span><span class="n">3</span>                  <span class="c1">// class java/lang/StringBuilder
</span><span class="c1"></span>   <span class="n">6</span><span class="o">:</span> <span class="n">dup</span>
   <span class="n">7</span><span class="o">:</span> <span class="n">invokespecial</span> <span class="err">#</span><span class="n">4</span>                  <span class="c1">// Method java/lang/StringBuilder.&#34;&lt;init&gt;&#34;:()V
</span><span class="c1"></span>  <span class="n">10</span><span class="o">:</span> <span class="n">ldc</span>           <span class="err">#</span><span class="n">5</span>                  <span class="c1">// String abc
</span><span class="c1"></span>  <span class="n">12</span><span class="o">:</span> <span class="n">invokevirtual</span> <span class="err">#</span><span class="n">6</span>                  <span class="c1">// Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
</span><span class="c1"></span>  <span class="n">15</span><span class="o">:</span> <span class="n">aload_1</span>
  <span class="n">16</span><span class="o">:</span> <span class="n">invokevirtual</span> <span class="err">#</span><span class="n">6</span>                  <span class="c1">// Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
</span><span class="c1"></span>  <span class="n">19</span><span class="o">:</span> <span class="n">ldc</span>           <span class="err">#</span><span class="n">7</span>                  <span class="c1">// String def
</span><span class="c1"></span>  <span class="n">21</span><span class="o">:</span> <span class="n">invokevirtual</span> <span class="err">#</span><span class="n">6</span>                  <span class="c1">// Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
</span><span class="c1"></span>  <span class="n">24</span><span class="o">:</span> <span class="n">bipush</span>        <span class="n">47</span>
  <span class="n">26</span><span class="o">:</span> <span class="n">invokevirtual</span> <span class="err">#</span><span class="n">8</span>                  <span class="c1">// Method java/lang/StringBuilder.append:(I)Ljava/lang/StringBuilder;
</span><span class="c1"></span>  <span class="n">29</span><span class="o">:</span> <span class="n">invokevirtual</span> <span class="err">#</span><span class="n">9</span>                  <span class="c1">// Method java/lang/StringBuilder.toString:()Ljava/lang/String;
</span><span class="c1"></span>  <span class="n">32</span><span class="o">:</span> <span class="n">astore_2</span>
  <span class="n">33</span><span class="o">:</span> <span class="n">getstatic</span>     <span class="err">#</span><span class="n">10</span>                 <span class="c1">// Field java/lang/System.out:Ljava/io/PrintStream;
</span><span class="c1"></span>  <span class="n">36</span><span class="o">:</span> <span class="n">aload_2</span>
  <span class="n">37</span><span class="o">:</span> <span class="n">invokevirtual</span> <span class="err">#</span><span class="n">11</span>                 <span class="c1">// Method java/io/PrintStream.println:(Ljava/lang/String;)V
</span><span class="c1"></span>  <span class="n">40</span><span class="o">:</span> <span class="k">return</span>
</code></pre></td></tr></table>
</div>
</div><p><code>dup</code>与<code>invokevirtual</code>语句相当于<code>Java</code>虚拟机上的汇编语句。</p>
<p>在这个例子中，编译器创建了一个<code>StringBuilder</code>对象，用以构建最终的<code>String</code>，并为每个字符串调用一次<code>StringBuilder</code>的<code>append()</code>方法，总计四次。最后调用<code>toString()</code>生成结果，并存为<code>s</code>。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">WhitherStringBuilder</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="n">String</span> <span class="nf">implicit</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">fields</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">String</span> <span class="n">result</span> <span class="o">=</span> <span class="s">&#34;&#34;</span><span class="o">;</span>
        <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="n">0</span><span class="o">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">fields</span><span class="o">.</span><span class="na">length</span><span class="o">;</span> <span class="n">i</span><span class="o">++)</span> <span class="o">{</span>
            <span class="n">result</span> <span class="o">+=</span> <span class="n">fields</span><span class="o">[</span><span class="n">i</span><span class="o">];</span>
        <span class="o">}</span>
        <span class="k">return</span> <span class="n">result</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="n">String</span> <span class="nf">explicit</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">fields</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">StringBuilder</span> <span class="n">result</span> <span class="o">=</span> <span class="k">new</span> <span class="n">StringBuilder</span><span class="o">();</span>
        <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="n">0</span><span class="o">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">fields</span><span class="o">.</span><span class="na">length</span><span class="o">;</span> <span class="n">i</span><span class="o">++)</span> <span class="o">{</span>
            <span class="n">result</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="n">fields</span><span class="o">[</span><span class="n">i</span><span class="o">]);</span>
        <span class="o">}</span>
        <span class="k">return</span> <span class="n">result</span><span class="o">.</span><span class="na">toString</span><span class="o">();</span>
    <span class="o">}</span>

<span class="o">}</span>
</code></pre></td></tr></table>
</div>
</div><p>运行<code>javap -c WhitherStringBuilder</code>。</p>
<p><code>implicit()</code>方法对应的字节码：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="kd">public</span> <span class="n">java</span><span class="o">.</span><span class="na">lang</span><span class="o">.</span><span class="na">String</span> <span class="nf">implicit</span><span class="o">(</span><span class="n">java</span><span class="o">.</span><span class="na">lang</span><span class="o">.</span><span class="na">String</span><span class="o">[]);</span>
<span class="nl">Code:</span>
   <span class="n">0</span><span class="o">:</span> <span class="n">ldc</span>           <span class="err">#</span><span class="n">2</span>                  <span class="c1">// String
</span><span class="c1"></span>   <span class="n">2</span><span class="o">:</span> <span class="n">astore_2</span>
   <span class="n">3</span><span class="o">:</span> <span class="n">iconst_0</span>
   <span class="n">4</span><span class="o">:</span> <span class="n">istore_3</span>
   <span class="n">5</span><span class="o">:</span> <span class="n">iload_3</span>
   <span class="n">6</span><span class="o">:</span> <span class="n">aload_1</span>
   <span class="n">7</span><span class="o">:</span> <span class="n">arraylength</span>
   <span class="n">8</span><span class="o">:</span> <span class="n">if_icmpge</span>     <span class="n">38</span>
  <span class="n">11</span><span class="o">:</span> <span class="k">new</span>           <span class="err">#</span><span class="n">3</span>                  <span class="c1">// class java/lang/StringBuilder
</span><span class="c1"></span>  <span class="n">14</span><span class="o">:</span> <span class="n">dup</span>
  <span class="n">15</span><span class="o">:</span> <span class="n">invokespecial</span> <span class="err">#</span><span class="n">4</span>                  <span class="c1">// Method java/lang/StringBuilder.&#34;&lt;init&gt;&#34;:()V
</span><span class="c1"></span>  <span class="n">18</span><span class="o">:</span> <span class="n">aload_2</span>
  <span class="n">19</span><span class="o">:</span> <span class="n">invokevirtual</span> <span class="err">#</span><span class="n">5</span>                  <span class="c1">// Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
</span><span class="c1"></span>  <span class="n">22</span><span class="o">:</span> <span class="n">aload_1</span>
  <span class="n">23</span><span class="o">:</span> <span class="n">iload_3</span>
  <span class="n">24</span><span class="o">:</span> <span class="n">aaload</span>
  <span class="n">25</span><span class="o">:</span> <span class="n">invokevirtual</span> <span class="err">#</span><span class="n">5</span>                  <span class="c1">// Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
</span><span class="c1"></span>  <span class="n">28</span><span class="o">:</span> <span class="n">invokevirtual</span> <span class="err">#</span><span class="n">6</span>                  <span class="c1">// Method java/lang/StringBuilder.toString:()Ljava/lang/String;
</span><span class="c1"></span>  <span class="n">31</span><span class="o">:</span> <span class="n">astore_2</span>
  <span class="n">32</span><span class="o">:</span> <span class="n">iinc</span>          <span class="n">3</span><span class="o">,</span> <span class="n">1</span>
  <span class="n">35</span><span class="o">:</span> <span class="k">goto</span>          <span class="n">5</span>
  <span class="n">38</span><span class="o">:</span> <span class="n">aload_2</span>
  <span class="n">39</span><span class="o">:</span> <span class="n">areturn</span>
</code></pre></td></tr></table>
</div>
</div><p>从第8行到第35行构成了一个循环体。第8行：对堆栈中的操作数进行“大于或等于的整数比较运算”，循环结束时跳到第38行。第35行：返回循环体的起始点第5行。要注意的重点是：<code>StringBuilder</code>是在循环之内构造的，这意味着每经过循环一次，就会创建一个新的<code>StringBuilder</code>对象。</p>
<p><code>explicit()</code>方法对应的字节码：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="kd">public</span> <span class="n">java</span><span class="o">.</span><span class="na">lang</span><span class="o">.</span><span class="na">String</span> <span class="nf">explicit</span><span class="o">(</span><span class="n">java</span><span class="o">.</span><span class="na">lang</span><span class="o">.</span><span class="na">String</span><span class="o">[]);</span>
<span class="nl">Code:</span>
   <span class="n">0</span><span class="o">:</span> <span class="k">new</span>           <span class="err">#</span><span class="n">3</span>                  <span class="c1">// class java/lang/StringBuilder
</span><span class="c1"></span>   <span class="n">3</span><span class="o">:</span> <span class="n">dup</span>
   <span class="n">4</span><span class="o">:</span> <span class="n">invokespecial</span> <span class="err">#</span><span class="n">4</span>                  <span class="c1">// Method java/lang/StringBuilder.&#34;&lt;init&gt;&#34;:()V
</span><span class="c1"></span>   <span class="n">7</span><span class="o">:</span> <span class="n">astore_2</span>
   <span class="n">8</span><span class="o">:</span> <span class="n">iconst_0</span>
   <span class="n">9</span><span class="o">:</span> <span class="n">istore_3</span>
  <span class="n">10</span><span class="o">:</span> <span class="n">iload_3</span>
  <span class="n">11</span><span class="o">:</span> <span class="n">aload_1</span>
  <span class="n">12</span><span class="o">:</span> <span class="n">arraylength</span>
  <span class="n">13</span><span class="o">:</span> <span class="n">if_icmpge</span>     <span class="n">30</span>
  <span class="n">16</span><span class="o">:</span> <span class="n">aload_2</span>
  <span class="n">17</span><span class="o">:</span> <span class="n">aload_1</span>
  <span class="n">18</span><span class="o">:</span> <span class="n">iload_3</span>
  <span class="n">19</span><span class="o">:</span> <span class="n">aaload</span>
  <span class="n">20</span><span class="o">:</span> <span class="n">invokevirtual</span> <span class="err">#</span><span class="n">5</span>                  <span class="c1">// Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
</span><span class="c1"></span>  <span class="n">23</span><span class="o">:</span> <span class="n">pop</span>
  <span class="n">24</span><span class="o">:</span> <span class="n">iinc</span>          <span class="n">3</span><span class="o">,</span> <span class="n">1</span>
  <span class="n">27</span><span class="o">:</span> <span class="k">goto</span>          <span class="n">10</span>
  <span class="n">30</span><span class="o">:</span> <span class="n">aload_2</span>
  <span class="n">31</span><span class="o">:</span> <span class="n">invokevirtual</span> <span class="err">#</span><span class="n">6</span>                  <span class="c1">// Method java/lang/StringBuilder.toString:()Ljava/lang/String;
</span><span class="c1"></span>  <span class="n">34</span><span class="o">:</span> <span class="n">areturn</span>
</code></pre></td></tr></table>
</div>
</div><p>可以看到，不仅循环部分的代码更简短、更简单，并且它只生成了一个<code>StringBuilder</code>对象。显式地创建<code>StringBuilder</code>还允许你预先指定<code>StringBuilder</code>的大小，避免多次重新分配缓存。</p>
<p>因此，当为一个类编写<code>toString()</code>方法时，如果字符串操作比较简单，那就可以信赖编译器，他会为你合理地构造最终的字符串结果。但是，如果你要在<code>toString()</code>方法中使用循环，那么最好自己创建一个<code>StringBuilder</code>对象，用它来构造最终的结果。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">UsingStringBuilder</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="n">Random</span> <span class="n">rand</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Random</span><span class="o">(</span><span class="n">47</span><span class="o">);</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="n">String</span> <span class="nf">toString</span><span class="o">()</span> <span class="o">{</span>
        <span class="n">StringBuilder</span> <span class="n">result</span> <span class="o">=</span> <span class="k">new</span> <span class="n">StringBuilder</span><span class="o">(</span><span class="s">&#34;[&#34;</span><span class="o">);</span>
        <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="n">0</span><span class="o">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">25</span><span class="o">;</span> <span class="n">i</span><span class="o">++)</span> <span class="o">{</span>
            <span class="n">result</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="n">rand</span><span class="o">.</span><span class="na">nextInt</span><span class="o">(</span><span class="n">100</span><span class="o">));</span>
            <span class="n">result</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="s">&#34;, &#34;</span><span class="o">);</span>
        <span class="o">}</span>
        <span class="n">result</span><span class="o">.</span><span class="na">delete</span><span class="o">(</span><span class="n">result</span><span class="o">.</span><span class="na">length</span><span class="o">()</span> <span class="o">-</span> <span class="n">2</span><span class="o">,</span> <span class="n">result</span><span class="o">.</span><span class="na">length</span><span class="o">());</span>
        <span class="n">result</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="s">&#34;]&#34;</span><span class="o">);</span>
        <span class="k">return</span> <span class="n">result</span><span class="o">.</span><span class="na">toString</span><span class="o">();</span>
    <span class="o">}</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">UsingStringBuilder</span> <span class="n">usb</span> <span class="o">=</span> <span class="k">new</span> <span class="n">UsingStringBuilder</span><span class="o">();</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">usb</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>
<span class="cm">/*
</span><span class="cm">[58, 55, 93, 61, 61, 29, 68, 0, 22, 7, 88, 28, 51, 89, 
</span><span class="cm">9, 78, 98, 61, 20, 58, 16, 40, 11, 22, 4]
</span><span class="cm"> */</span>
</code></pre></td></tr></table>
</div>
</div><h2 id="133-无意识的递归">13.3 无意识的递归</h2>
<p><code>Java</code>中的每个类从根本上都是继承自<code>Object</code>，标准容器类自然也不例外。因此容器类都有<code>toString()</code>方法，覆写了该方法，使得它生成的<code>String</code>结果能够表达容器自身，以及容器所包含的对象。例如<code>ArrayList.toString()</code>，它会遍历<code>ArrayList</code>中包含的所有对象，调用每个元素上的<code>toString()</code>方法：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">ArrayListDisplay</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">ArrayList</span><span class="o">&lt;</span><span class="n">Coffee</span><span class="o">&gt;</span> <span class="n">coffees</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ArrayList</span><span class="o">&lt;</span><span class="n">Coffee</span><span class="o">&gt;();</span>
        <span class="k">for</span> <span class="o">(</span><span class="n">Coffee</span> <span class="n">coffee</span> <span class="o">:</span> <span class="k">new</span> <span class="n">CoffeeGenerator</span><span class="o">(</span><span class="n">10</span><span class="o">))</span> <span class="o">{</span>
            <span class="n">coffees</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">coffee</span><span class="o">);</span>
        <span class="o">}</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">coffees</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>
<span class="cm">/*
</span><span class="cm">[Americano 0, Latte 1, Americano 2, Mocha 3, Mocha 4, Breve 5,
</span><span class="cm">Americano 6, Latte 7, Cappuccino 8, Cappuccino 9]
</span><span class="cm"> */</span>
</code></pre></td></tr></table>
</div>
</div><p>如果希望<code>toString()</code>方法打印出对象的内存地址，也许会考虑使用<code>this</code>关键字：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">InfiniteRecursion</span> <span class="o">{</span>
    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="n">String</span> <span class="nf">toString</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="s">&#34;InfiniteRecursion address: &#34;</span> <span class="o">+</span> <span class="k">this</span> <span class="o">+</span> <span class="s">&#34;\n&#34;</span><span class="o">;</span>
    <span class="o">}</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">List</span><span class="o">&lt;</span><span class="n">InfiniteRecursion</span><span class="o">&gt;</span> <span class="n">v</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ArrayList</span><span class="o">&lt;</span><span class="n">InfiniteRecursion</span><span class="o">&gt;();</span>
        <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="n">0</span><span class="o">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">10</span><span class="o">;</span> <span class="n">i</span><span class="o">++)</span> <span class="o">{</span>
            <span class="n">v</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="k">new</span> <span class="n">InfiniteRecursion</span><span class="o">());</span>
        <span class="o">}</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">v</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></td></tr></table>
</div>
</div><p>执行代码会得到一串非常长的异常。这里发生了自动类型转换，由<code>InfiniteRecursion</code>类型转换成<code>String</code>类型。因为编译器看到一个<code>String</code>对象后面跟着一个“+”，而在后面的对象不是<code>String</code>，于是编译器试着将<code>this</code>转换成一个<code>String</code>。调用<code>this</code>上的<code>toString()</code>方法进行转换，于是就发生了递归调用。所以不该使用<code>this</code>，而是应该调用<code>super.toString()</code>方法。</p>
<h2 id="134-string上的操作">13.4 String上的操作</h2>
<h2 id="135-格式化输出">13.5 格式化输出</h2>
<h3 id="1351-printf">13.5.1 printf()</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">printf</span><span class="o">(</span><span class="s">&#34;Row 1:[%d %f] \n&#34;</span><span class="o">,</span><span class="n">10</span><span class="o">,</span><span class="n">2</span><span class="o">.</span><span class="na">5</span><span class="o">);</span><span class="c1">// Row 1:[10 2.500000]
</span></code></pre></td></tr></table>
</div>
</div><h3 id="1352-systemoutformat">13.5.2 System.out.format()</h3>
<p><code>Java SE5</code>引入的<code>format</code>方法可用于<code>PrintStream</code>或<code>PrintWriter</code>对象，其中也包括<code>System.out</code>对象。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">SimpleFormat</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="kt">int</span> <span class="n">x</span> <span class="o">=</span> <span class="n">5</span><span class="o">;</span>
        <span class="kt">double</span> <span class="n">y</span> <span class="o">=</span> <span class="n">5</span><span class="o">.</span><span class="na">332542</span><span class="o">;</span>
        <span class="c1">// The old way:
</span><span class="c1"></span>        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;Row 1: [&#34;</span> <span class="o">+</span> <span class="n">x</span> <span class="o">+</span> <span class="s">&#34; &#34;</span> <span class="o">+</span> <span class="n">y</span> <span class="o">+</span> <span class="s">&#34;]&#34;</span><span class="o">);</span>
        <span class="c1">// The new way:
</span><span class="c1"></span>        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">format</span><span class="o">(</span><span class="s">&#34;Row 1: [%d %f]\n&#34;</span><span class="o">,</span> <span class="n">x</span><span class="o">,</span> <span class="n">y</span><span class="o">);</span>
        <span class="c1">// OR
</span><span class="c1"></span>        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">printf</span><span class="o">(</span><span class="s">&#34;Row 1: [%d %f]\n&#34;</span><span class="o">,</span> <span class="n">x</span><span class="o">,</span> <span class="n">y</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>
<span class="cm">/*
</span><span class="cm">Row 1: [5 5.332542]
</span><span class="cm">Row 1: [5 5.332542]
</span><span class="cm">Row 1: [5 5.332542]
</span><span class="cm"> */</span>
</code></pre></td></tr></table>
</div>
</div><p>可以看到，<code>format()</code>与<code>printf()</code>是等价的。</p>
<h3 id="1353-formatter类">13.5.3 Formatter类</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Turtle</span> <span class="o">{</span>
    <span class="kd">private</span> <span class="n">String</span> <span class="n">name</span><span class="o">;</span>
    <span class="kd">private</span> <span class="n">Formatter</span> <span class="n">f</span><span class="o">;</span>

    <span class="kd">public</span> <span class="nf">Turtle</span><span class="o">(</span><span class="n">String</span> <span class="n">name</span><span class="o">,</span> <span class="n">Formatter</span> <span class="n">f</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">name</span> <span class="o">=</span> <span class="n">name</span><span class="o">;</span>
        <span class="k">this</span><span class="o">.</span><span class="na">f</span> <span class="o">=</span> <span class="n">f</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">move</span><span class="o">(</span><span class="kt">int</span> <span class="n">x</span><span class="o">,</span> <span class="kt">int</span> <span class="n">y</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">f</span><span class="o">.</span><span class="na">format</span><span class="o">(</span><span class="s">&#34;%s The Turtle is at (%d,%d)\n&#34;</span><span class="o">,</span> <span class="n">name</span><span class="o">,</span> <span class="n">x</span><span class="o">,</span> <span class="n">y</span><span class="o">);</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">PrintStream</span> <span class="n">outAlias</span> <span class="o">=</span><span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">;</span>
        <span class="n">Turtle</span> <span class="n">tommy</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Turtle</span><span class="o">(</span><span class="s">&#34;Tommy&#34;</span><span class="o">,</span><span class="k">new</span> <span class="n">Formatter</span><span class="o">(</span><span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">));</span>
        <span class="n">Turtle</span> <span class="n">terry</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Turtle</span><span class="o">(</span><span class="s">&#34;Terry&#34;</span><span class="o">,</span><span class="k">new</span> <span class="n">Formatter</span><span class="o">(</span><span class="n">outAlias</span><span class="o">));</span>
        <span class="n">tommy</span><span class="o">.</span><span class="na">move</span><span class="o">(</span><span class="n">0</span><span class="o">,</span><span class="n">0</span><span class="o">);</span>
        <span class="n">terry</span><span class="o">.</span><span class="na">move</span><span class="o">(</span><span class="n">4</span><span class="o">,</span><span class="n">8</span><span class="o">);</span>
        <span class="n">tommy</span><span class="o">.</span><span class="na">move</span><span class="o">(</span><span class="n">3</span><span class="o">,</span><span class="n">4</span><span class="o">);</span>
        <span class="n">terry</span><span class="o">.</span><span class="na">move</span><span class="o">(</span><span class="n">2</span><span class="o">,</span><span class="n">5</span><span class="o">);</span>
        <span class="n">tommy</span><span class="o">.</span><span class="na">move</span><span class="o">(</span><span class="n">3</span><span class="o">,</span><span class="n">3</span><span class="o">);</span>
        <span class="n">terry</span><span class="o">.</span><span class="na">move</span><span class="o">(</span><span class="n">3</span><span class="o">,</span><span class="n">3</span><span class="o">);</span>
    <span class="o">}</span>

<span class="o">}</span>
<span class="cm">/*
</span><span class="cm">Tommy The Turtle is at (0,0)
</span><span class="cm">Terry The Turtle is at (4,8)
</span><span class="cm">Tommy The Turtle is at (3,4)
</span><span class="cm">Terry The Turtle is at (2,5)
</span><span class="cm">Tommy The Turtle is at (3,3)
</span><span class="cm">Terry The Turtle is at (3,3)
</span><span class="cm"> */</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="1354-格式化说明符">13.5.4 格式化说明符</h3>
<p>在插入数据时，如果想要控制空格与对齐，你需要更精细复杂的格式修饰符，一下是其抽象的语法：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-text" data-lang="text">%[argument_index$][flags][width][precision]conversion
</code></pre></td></tr></table>
</div>
</div><p>通过指定<code>width</code>来实现控制一个域的最小尺寸。<code>Formatter</code>对象通过在必要时添加空格，来确保一个域至少达到某个长度。在默认情况下，数据时右对齐，不过可以通过使用“-”标志来改变对齐方向。</p>
<p>与<code>width</code>相对的是<code>precision</code>,它用来指明最大尺寸。<code>width</code>可以用用于各种类型的数据转换，并且其行为方式都一样。<code>precision</code>则不然，不是所有类型的数据都能使用<code>precision</code>，而且，应用于不同类型的数据转换时，<code>precision</code>的意义也不同。在将<code>precision</code>应用于<code>String</code>时，它表示打印<code>String</code>时输出字符的最大数量。而在将<code>precision</code>应用于浮点数时，它表示小数部分要显示出来的位数（默认是6位小数），如果小数位过多则舍入，太少则在尾部补零。由于整数没有小数部分，所以<code>precision</code>无法应用于整数，如果你对整数应用<code>precision</code>，则会触发异常。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Receipt</span> <span class="o">{</span>
    <span class="kd">private</span> <span class="kt">double</span> <span class="n">total</span> <span class="o">=</span> <span class="n">0</span><span class="o">;</span>
    <span class="kd">private</span> <span class="n">Formatter</span> <span class="n">f</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Formatter</span><span class="o">(</span><span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">);</span>

    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">printTitle</span><span class="o">()</span> <span class="o">{</span>
        <span class="n">f</span><span class="o">.</span><span class="na">format</span><span class="o">(</span><span class="s">&#34;%-15s %5s %10s \n&#34;</span><span class="o">,</span> <span class="s">&#34;Item&#34;</span><span class="o">,</span> <span class="s">&#34;Qty&#34;</span><span class="o">,</span> <span class="s">&#34;Price&#34;</span><span class="o">);</span>
        <span class="n">f</span><span class="o">.</span><span class="na">format</span><span class="o">(</span><span class="s">&#34;%-15s %5s %10s \n&#34;</span><span class="o">,</span> <span class="s">&#34;----&#34;</span><span class="o">,</span> <span class="s">&#34;---&#34;</span><span class="o">,</span> <span class="s">&#34;-----&#34;</span><span class="o">);</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">print</span><span class="o">(</span><span class="n">String</span> <span class="n">name</span><span class="o">,</span> <span class="kt">int</span> <span class="n">qty</span><span class="o">,</span> <span class="kt">double</span> <span class="n">price</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">f</span><span class="o">.</span><span class="na">format</span><span class="o">(</span><span class="s">&#34;%-15.15s %5d %10.2f \n&#34;</span><span class="o">,</span> <span class="n">name</span><span class="o">,</span> <span class="n">qty</span><span class="o">,</span> <span class="n">price</span><span class="o">);</span>
        <span class="n">total</span> <span class="o">+=</span> <span class="n">price</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">printTotal</span><span class="o">()</span> <span class="o">{</span>
        <span class="n">f</span><span class="o">.</span><span class="na">format</span><span class="o">(</span><span class="s">&#34;%-15s %5s %10.2f \n&#34;</span><span class="o">,</span> <span class="s">&#34;Tax&#34;</span><span class="o">,</span> <span class="s">&#34;&#34;</span><span class="o">,</span> <span class="n">total</span> <span class="o">*</span> <span class="n">0</span><span class="o">.</span><span class="na">06</span><span class="o">);</span>
        <span class="n">f</span><span class="o">.</span><span class="na">format</span><span class="o">(</span><span class="s">&#34;%-15s %5s %10s \n&#34;</span><span class="o">,</span> <span class="s">&#34;Tax&#34;</span><span class="o">,</span> <span class="s">&#34;&#34;</span><span class="o">,</span> <span class="s">&#34;-----&#34;</span><span class="o">);</span>
        <span class="n">f</span><span class="o">.</span><span class="na">format</span><span class="o">(</span><span class="s">&#34;%-15s %5s %10.2f \n&#34;</span><span class="o">,</span> <span class="s">&#34;Total&#34;</span><span class="o">,</span> <span class="s">&#34;&#34;</span><span class="o">,</span> <span class="n">total</span> <span class="o">*</span> <span class="n">1</span><span class="o">.</span><span class="na">06</span><span class="o">);</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">Receipt</span> <span class="n">receipt</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Receipt</span><span class="o">();</span>
        <span class="n">receipt</span><span class="o">.</span><span class="na">printTitle</span><span class="o">();</span>
        <span class="n">receipt</span><span class="o">.</span><span class="na">print</span><span class="o">(</span><span class="s">&#34;Jack&#39;s Magic Beans&#34;</span><span class="o">,</span><span class="n">4</span><span class="o">,</span><span class="n">4</span><span class="o">.</span><span class="na">25</span><span class="o">);</span>
        <span class="n">receipt</span><span class="o">.</span><span class="na">print</span><span class="o">(</span><span class="s">&#34;Princess Peas&#34;</span><span class="o">,</span><span class="n">3</span><span class="o">,</span><span class="n">5</span><span class="o">.</span><span class="na">1</span><span class="o">);</span>
        <span class="n">receipt</span><span class="o">.</span><span class="na">print</span><span class="o">(</span><span class="s">&#34;Three Bears Porridge&#34;</span><span class="o">,</span><span class="n">1</span><span class="o">,</span><span class="n">14</span><span class="o">.</span><span class="na">29</span><span class="o">);</span>
        <span class="n">receipt</span><span class="o">.</span><span class="na">printTotal</span><span class="o">();</span>
    <span class="o">}</span>
<span class="o">}</span>
<span class="cm">/*
</span><span class="cm">Item              Qty      Price
</span><span class="cm">----              ---      -----
</span><span class="cm">Jack&#39;s Magic Be     4       4.25
</span><span class="cm">Princess Peas       3       5.10
</span><span class="cm">Three Bears Por     1      14.29
</span><span class="cm">Tax                         1.42
</span><span class="cm">Tax                        -----
</span><span class="cm">Total                      25.06
</span><span class="cm">
</span><span class="cm"> */</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="1355-formatter转换">13.5.5 Formatter转换</h3>
<p>类型转换字符：</p>
<ul>
<li>d 整数型（十进制）</li>
<li>c Unicode字符</li>
<li>b Boolean值</li>
<li>s String</li>
<li>f 浮点数（十进制）</li>
<li>e 浮点数（科学计数）</li>
<li>x 整数（十六进制）</li>
<li>h 散列码（十六进制）</li>
<li>% 字符&quot;%&quot;</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span><span class="lnt">53
</span><span class="lnt">54
</span><span class="lnt">55
</span><span class="lnt">56
</span><span class="lnt">57
</span><span class="lnt">58
</span><span class="lnt">59
</span><span class="lnt">60
</span><span class="lnt">61
</span><span class="lnt">62
</span><span class="lnt">63
</span><span class="lnt">64
</span><span class="lnt">65
</span><span class="lnt">66
</span><span class="lnt">67
</span><span class="lnt">68
</span><span class="lnt">69
</span><span class="lnt">70
</span><span class="lnt">71
</span><span class="lnt">72
</span><span class="lnt">73
</span><span class="lnt">74
</span><span class="lnt">75
</span><span class="lnt">76
</span><span class="lnt">77
</span><span class="lnt">78
</span><span class="lnt">79
</span><span class="lnt">80
</span><span class="lnt">81
</span><span class="lnt">82
</span><span class="lnt">83
</span><span class="lnt">84
</span><span class="lnt">85
</span><span class="lnt">86
</span><span class="lnt">87
</span><span class="lnt">88
</span><span class="lnt">89
</span><span class="lnt">90
</span><span class="lnt">91
</span><span class="lnt">92
</span><span class="lnt">93
</span><span class="lnt">94
</span><span class="lnt">95
</span><span class="lnt">96
</span><span class="lnt">97
</span><span class="lnt">98
</span><span class="lnt">99
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Conversion</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">Formatter</span> <span class="n">f</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Formatter</span><span class="o">(</span><span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">);</span>
        <span class="kt">char</span> <span class="n">u</span> <span class="o">=</span> <span class="sc">&#39;a&#39;</span><span class="o">;</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;u = &#39;a&#39;&#34;</span><span class="o">);</span>
        <span class="n">f</span><span class="o">.</span><span class="na">format</span><span class="o">(</span><span class="s">&#34;s: %s\n&#34;</span><span class="o">,</span> <span class="n">u</span><span class="o">);</span>
<span class="c1">//        f.format(&#34;d: %d\n&#34;, u);
</span><span class="c1"></span>        <span class="n">f</span><span class="o">.</span><span class="na">format</span><span class="o">(</span><span class="s">&#34;c: %c\n&#34;</span><span class="o">,</span> <span class="n">u</span><span class="o">);</span>
        <span class="n">f</span><span class="o">.</span><span class="na">format</span><span class="o">(</span><span class="s">&#34;b: %b\n&#34;</span><span class="o">,</span> <span class="n">u</span><span class="o">);</span>
<span class="c1">//        f.format(&#34;f: %f\n&#34;, u);
</span><span class="c1">//        f.format(&#34;e: %e\n&#34;, u);
</span><span class="c1">//        f.format(&#34;x: %x\n&#34;, u);
</span><span class="c1">//        f.format(&#34;h: %h\n&#34;, u);
</span><span class="c1"></span>        <span class="kt">int</span> <span class="n">v</span> <span class="o">=</span> <span class="n">121</span><span class="o">;</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;v = 121&#34;</span><span class="o">);</span>
        <span class="n">f</span><span class="o">.</span><span class="na">format</span><span class="o">(</span><span class="s">&#34;d: %d\n&#34;</span><span class="o">,</span> <span class="n">v</span><span class="o">);</span>
        <span class="n">f</span><span class="o">.</span><span class="na">format</span><span class="o">(</span><span class="s">&#34;c: %c\n&#34;</span><span class="o">,</span> <span class="n">v</span><span class="o">);</span>
        <span class="n">f</span><span class="o">.</span><span class="na">format</span><span class="o">(</span><span class="s">&#34;b: %b\n&#34;</span><span class="o">,</span> <span class="n">v</span><span class="o">);</span>
        <span class="n">f</span><span class="o">.</span><span class="na">format</span><span class="o">(</span><span class="s">&#34;s: %s\n&#34;</span><span class="o">,</span> <span class="n">v</span><span class="o">);</span>
<span class="c1">//        f.format(&#34;f: %f\n&#34;, v);
</span><span class="c1">//        f.format(&#34;e: %e\n&#34;, v);
</span><span class="c1"></span>        <span class="n">f</span><span class="o">.</span><span class="na">format</span><span class="o">(</span><span class="s">&#34;x: %x\n&#34;</span><span class="o">,</span> <span class="n">v</span><span class="o">);</span>
        <span class="n">f</span><span class="o">.</span><span class="na">format</span><span class="o">(</span><span class="s">&#34;h: %h\n&#34;</span><span class="o">,</span> <span class="n">v</span><span class="o">);</span>
        <span class="n">BigInteger</span> <span class="n">w</span> <span class="o">=</span> <span class="k">new</span> <span class="n">BigInteger</span><span class="o">(</span><span class="s">&#34;50000000000000&#34;</span><span class="o">);</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;w = new BigInteger(\&#34;50000000000000\&#34;)&#34;</span><span class="o">);</span>
        <span class="n">f</span><span class="o">.</span><span class="na">format</span><span class="o">(</span><span class="s">&#34;d: %d\n&#34;</span><span class="o">,</span> <span class="n">w</span><span class="o">);</span>
       <span class="c1">// f.format(&#34;c: %c\n&#34;, w);
</span><span class="c1"></span>        <span class="n">f</span><span class="o">.</span><span class="na">format</span><span class="o">(</span><span class="s">&#34;b: %b\n&#34;</span><span class="o">,</span> <span class="n">w</span><span class="o">);</span>
        <span class="n">f</span><span class="o">.</span><span class="na">format</span><span class="o">(</span><span class="s">&#34;s: %s\n&#34;</span><span class="o">,</span> <span class="n">w</span><span class="o">);</span>
<span class="c1">//        f.format(&#34;f: %f\n&#34;, w);
</span><span class="c1">//        f.format(&#34;e: %e\n&#34;, w);
</span><span class="c1"></span>        <span class="n">f</span><span class="o">.</span><span class="na">format</span><span class="o">(</span><span class="s">&#34;x: %x\n&#34;</span><span class="o">,</span> <span class="n">w</span><span class="o">);</span>
        <span class="n">f</span><span class="o">.</span><span class="na">format</span><span class="o">(</span><span class="s">&#34;h: %h\n&#34;</span><span class="o">,</span> <span class="n">w</span><span class="o">);</span>
        <span class="kt">double</span> <span class="n">x</span> <span class="o">=</span> <span class="n">179</span><span class="o">.</span><span class="na">543</span><span class="o">;</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;x = 179.543&#34;</span><span class="o">);</span>
<span class="c1">//        f.format(&#34;d: %d\n&#34;, x);
</span><span class="c1">//        f.format(&#34;c: %c\n&#34;, x);
</span><span class="c1"></span>        <span class="n">f</span><span class="o">.</span><span class="na">format</span><span class="o">(</span><span class="s">&#34;b: %b\n&#34;</span><span class="o">,</span> <span class="n">x</span><span class="o">);</span>
        <span class="n">f</span><span class="o">.</span><span class="na">format</span><span class="o">(</span><span class="s">&#34;s: %s\n&#34;</span><span class="o">,</span> <span class="n">x</span><span class="o">);</span>
        <span class="n">f</span><span class="o">.</span><span class="na">format</span><span class="o">(</span><span class="s">&#34;f: %f\n&#34;</span><span class="o">,</span> <span class="n">x</span><span class="o">);</span>
        <span class="n">f</span><span class="o">.</span><span class="na">format</span><span class="o">(</span><span class="s">&#34;e: %e\n&#34;</span><span class="o">,</span> <span class="n">x</span><span class="o">);</span>
<span class="c1">//        f.format(&#34;x: %x\n&#34;, x);
</span><span class="c1"></span>        <span class="n">f</span><span class="o">.</span><span class="na">format</span><span class="o">(</span><span class="s">&#34;h: %h\n&#34;</span><span class="o">,</span> <span class="n">x</span><span class="o">);</span>
        <span class="n">Conversion</span> <span class="n">y</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Conversion</span><span class="o">();</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;y = new Conversion()&#34;</span><span class="o">);</span>
<span class="c1">//        f.format(&#34;d: %d\n&#34;, y);
</span><span class="c1">//        f.format(&#34;c: %c\n&#34;, y);
</span><span class="c1"></span>        <span class="n">f</span><span class="o">.</span><span class="na">format</span><span class="o">(</span><span class="s">&#34;b: %b\n&#34;</span><span class="o">,</span> <span class="n">y</span><span class="o">);</span>
        <span class="n">f</span><span class="o">.</span><span class="na">format</span><span class="o">(</span><span class="s">&#34;s: %s\n&#34;</span><span class="o">,</span> <span class="n">y</span><span class="o">);</span>
<span class="c1">//        f.format(&#34;f: %f\n&#34;, y);
</span><span class="c1">//        f.format(&#34;e: %e\n&#34;, y);
</span><span class="c1">//        f.format(&#34;x: %x\n&#34;, y);
</span><span class="c1"></span>        <span class="n">f</span><span class="o">.</span><span class="na">format</span><span class="o">(</span><span class="s">&#34;h: %h\n&#34;</span><span class="o">,</span> <span class="n">y</span><span class="o">);</span>
        <span class="kt">boolean</span> <span class="n">z</span> <span class="o">=</span> <span class="kc">false</span><span class="o">;</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;z = false&#34;</span><span class="o">);</span>

<span class="c1">//        f.format(&#34;d: %d\n&#34;, z);
</span><span class="c1">//        f.format(&#34;c: %c\n&#34;, z);
</span><span class="c1"></span>        <span class="n">f</span><span class="o">.</span><span class="na">format</span><span class="o">(</span><span class="s">&#34;b: %b\n&#34;</span><span class="o">,</span> <span class="n">z</span><span class="o">);</span>
        <span class="n">f</span><span class="o">.</span><span class="na">format</span><span class="o">(</span><span class="s">&#34;s: %s\n&#34;</span><span class="o">,</span> <span class="n">z</span><span class="o">);</span>
<span class="c1">//        f.format(&#34;f: %f\n&#34;, z);
</span><span class="c1">//        f.format(&#34;e: %e\n&#34;, z);
</span><span class="c1">//        f.format(&#34;x: %x\n&#34;, z);
</span><span class="c1"></span>        <span class="n">f</span><span class="o">.</span><span class="na">format</span><span class="o">(</span><span class="s">&#34;h: %h\n&#34;</span><span class="o">,</span> <span class="n">z</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>
<span class="cm">/*
</span><span class="cm">u = &#39;a&#39;
</span><span class="cm">s: a
</span><span class="cm">c: a
</span><span class="cm">b: true
</span><span class="cm">v = 121
</span><span class="cm">d: 121
</span><span class="cm">c: y
</span><span class="cm">b: true
</span><span class="cm">s: 121
</span><span class="cm">x: 79
</span><span class="cm">h: 79
</span><span class="cm">w = new BigInteger(&#34;50000000000000&#34;)
</span><span class="cm">d: 50000000000000
</span><span class="cm">b: true
</span><span class="cm">s: 50000000000000
</span><span class="cm">x: 2d79883d2000
</span><span class="cm">h: 8842a1a7
</span><span class="cm">x = 179.543
</span><span class="cm">b: true
</span><span class="cm">s: 179.543
</span><span class="cm">f: 179.543000
</span><span class="cm">e: 1.795430e+02
</span><span class="cm">h: 1ef462c
</span><span class="cm">y = new Conversion()
</span><span class="cm">b: true
</span><span class="cm">s: strings.Conversion@7440e464
</span><span class="cm">h: 7440e464
</span><span class="cm">z = false
</span><span class="cm">b: false
</span><span class="cm">s: false
</span><span class="cm">h: 4d5
</span><span class="cm"> */</span>
</code></pre></td></tr></table>
</div>
</div><p>程序中的每个变量都用到了<code>b</code>转换。虽然它对各种类型都是合法的，但其行为却不一定与你想象的一致。对于<code>boolean</code>基本类型或<code>Boolean</code>对象，其转换结果是对应的<code>true</code>或<code>false</code>。但是，对其他类型的参数，只要该参数不为<code>null</code>，那转换的结果就永远都是<code>true</code>。即使是数字0，转换结果依然是<code>true</code>，而这在其他语言中，往往转换为<code>false</code>。</p>
<h3 id="56-stringformat">5.6 String.format()</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">DatabaseException</span> <span class="kd">extends</span> <span class="n">Exception</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="nf">DatabaseException</span><span class="o">(</span><span class="kt">int</span> <span class="n">transactionID</span><span class="o">,</span><span class="kt">int</span> <span class="n">queryID</span><span class="o">,</span><span class="n">String</span> <span class="n">message</span><span class="o">){</span>
        <span class="kd">super</span><span class="o">(</span><span class="n">String</span><span class="o">.</span><span class="na">format</span><span class="o">(</span><span class="s">&#34;(t%d, q%d) %s&#34;</span><span class="o">,</span><span class="n">transactionID</span><span class="o">,</span><span class="n">queryID</span><span class="o">,</span><span class="n">message</span><span class="o">));</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">try</span><span class="o">{</span>
            <span class="k">throw</span> <span class="k">new</span> <span class="n">DatabaseException</span><span class="o">(</span><span class="n">3</span><span class="o">,</span><span class="n">7</span><span class="o">,</span><span class="s">&#34;Write failed&#34;</span><span class="o">);</span>
        <span class="o">}</span><span class="k">catch</span> <span class="o">(</span><span class="n">Exception</span> <span class="n">e</span><span class="o">){</span>
            <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">e</span><span class="o">);</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span>
<span class="cm">/*
</span><span class="cm">strings.DatabaseException: (t3, q7) Write failed
</span><span class="cm">
</span><span class="cm"> */</span>
</code></pre></td></tr></table>
</div>
</div><p><strong>一个十六进制转储（dump）工具</strong></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Hex</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="n">String</span> <span class="nf">format</span><span class="o">(</span><span class="kt">byte</span><span class="o">[]</span> <span class="n">data</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">StringBuilder</span> <span class="n">result</span> <span class="o">=</span> <span class="k">new</span> <span class="n">StringBuilder</span><span class="o">();</span>
        <span class="kt">int</span> <span class="n">n</span> <span class="o">=</span> <span class="n">0</span><span class="o">;</span>
        <span class="k">for</span> <span class="o">(</span><span class="kt">byte</span> <span class="n">b</span> <span class="o">:</span> <span class="n">data</span><span class="o">)</span> <span class="o">{</span>
            <span class="k">if</span> <span class="o">(</span><span class="n">n</span> <span class="o">%</span> <span class="n">16</span> <span class="o">==</span> <span class="n">0</span><span class="o">)</span> <span class="o">{</span>
                <span class="n">result</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="n">String</span><span class="o">.</span><span class="na">format</span><span class="o">(</span><span class="s">&#34;%05X: &#34;</span><span class="o">,</span> <span class="n">n</span><span class="o">));</span>
            <span class="o">}</span>
            <span class="n">result</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="n">String</span><span class="o">.</span><span class="na">format</span><span class="o">(</span><span class="s">&#34;%02X&#34;</span><span class="o">,</span> <span class="n">b</span><span class="o">));</span>
            <span class="n">n</span><span class="o">++;</span>
            <span class="k">if</span> <span class="o">(</span><span class="n">n</span> <span class="o">%</span> <span class="n">16</span> <span class="o">==</span> <span class="n">0</span><span class="o">)</span> <span class="o">{</span>
                <span class="n">result</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="s">&#34;\n&#34;</span><span class="o">);</span>
            <span class="o">}</span>
        <span class="o">}</span>
        <span class="n">result</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="s">&#34;\n&#34;</span><span class="o">);</span>
        <span class="k">return</span> <span class="n">result</span><span class="o">.</span><span class="na">toString</span><span class="o">();</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">Exception</span> <span class="o">{</span>
        <span class="k">if</span><span class="o">(</span><span class="n">args</span><span class="o">.</span><span class="na">length</span><span class="o">==</span><span class="n">0</span><span class="o">){</span>
            <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">format</span><span class="o">(</span><span class="n">BinaryFile</span><span class="o">.</span><span class="na">read</span><span class="o">(</span><span class="s">&#34;Hex.class&#34;</span><span class="o">)));</span>
        <span class="o">}</span><span class="k">else</span><span class="o">{</span>
            <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">BinaryFile</span><span class="o">.</span><span class="na">read</span><span class="o">(</span><span class="k">new</span> <span class="n">File</span><span class="o">(</span><span class="n">args</span><span class="o">[</span><span class="n">0</span><span class="o">])));</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></td></tr></table>
</div>
</div><h2 id="136-正则表达式">13.6 正则表达式</h2>
<h3 id="1361-基础">13.6.1 基础</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Splitting</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="n">String</span> <span class="n">knights</span> <span class="o">=</span>
            <span class="s">&#34;Then, when you have found the shrubbery, you must &#34;</span> <span class="o">+</span>
                    <span class="s">&#34;cut down the mightiest tree in the forest... &#34;</span> <span class="o">+</span>
                    <span class="s">&#34;with... a herring!&#34;</span><span class="o">;</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">split</span><span class="o">(</span><span class="n">String</span> <span class="n">regex</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">Arrays</span><span class="o">.</span><span class="na">toString</span><span class="o">(</span><span class="n">knights</span><span class="o">.</span><span class="na">split</span><span class="o">(</span><span class="n">regex</span><span class="o">)));</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">split</span><span class="o">(</span><span class="s">&#34; &#34;</span><span class="o">);</span>
        <span class="n">split</span><span class="o">(</span><span class="s">&#34;\\W+&#34;</span><span class="o">);</span> <span class="c1">//非单词字符
</span><span class="c1"></span>        <span class="n">split</span><span class="o">(</span><span class="s">&#34;n\\W+&#34;</span><span class="o">);</span> <span class="c1">//n后面跟着一个或多个非单词字符
</span><span class="c1"></span>    <span class="o">}</span>
<span class="o">}</span>
<span class="cm">/*
</span><span class="cm">[Then,, when, you, have, found, the, shrubbery,, you, must, cut, down,
</span><span class="cm">the, mightiest, tree, in, the, forest..., with..., a, herring!]
</span><span class="cm">[Then, when, you, have, found, the, shrubbery, you, must, cut, down,
</span><span class="cm">the, mightiest, tree, in, the, forest, with, a, herring]
</span><span class="cm">[The, whe, you have found the shrubbery, you must cut dow,
</span><span class="cm"> the mightiest tree i, the forest... with... a herring!]
</span><span class="cm">
</span><span class="cm"> */</span>
</code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Replacing</span> <span class="o">{</span>
    <span class="kd">static</span> <span class="n">String</span> <span class="n">s</span> <span class="o">=</span> <span class="n">Splitting</span><span class="o">.</span><span class="na">knights</span><span class="o">;</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">s</span><span class="o">.</span><span class="na">replaceFirst</span><span class="o">(</span><span class="s">&#34;f\\w+&#34;</span><span class="o">,</span><span class="s">&#34;located&#34;</span><span class="o">));</span><span class="c1">//以f开头后面跟一个或多个字母
</span><span class="c1"></span>        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">s</span><span class="o">.</span><span class="na">replaceAll</span><span class="o">(</span><span class="s">&#34;shrubbery|tree|herring&#34;</span><span class="o">,</span><span class="s">&#34;banana&#34;</span><span class="o">));</span><span class="c1">//匹配三个单词中的任意一个
</span><span class="c1"></span>    <span class="o">}</span>
<span class="o">}</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="1362-创建正则表达式">13.6.2 创建正则表达式</h3>
<p>字符类（character classes）:</p>
<ul>
<li>· ：任意字符</li>
<li>[abc]：包含a、b和c的任何字符</li>
<li>：除了a、b和c之外的任何字符</li>
<li>[a-zA-Z]：从a到z或从A到Z的任何字符</li>
<li>[abc[hij]]：任意a、b、c、h、i和j</li>
<li>[a-z&amp;&amp;[hij]]：任意h、i或j</li>
<li>\s：空白符</li>
<li>\S：非空白符</li>
<li>\d：数字[0-9]</li>
<li>\D：非数字</li>
<li>\w：词字符[a-zA-Z0-9]</li>
<li>\W：非词字符</li>
</ul>
<p>逻辑操作符：</p>
<ul>
<li>XY：Y跟在X后面</li>
<li>X|Y：X或Y</li>
<li>(X): 捕获组，可以在表达式中用\i引用第i个捕获组</li>
</ul>
<p>边界匹配符</p>
<ul>
<li>^：一行的开始</li>
<li>$：一行的结束</li>
<li>\b：词的边界</li>
<li>\B：非词的边界</li>
<li>\G：前一个匹配的结束</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Rudolph</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">for</span> <span class="o">(</span><span class="n">String</span> <span class="n">pattern</span> <span class="o">:</span> <span class="k">new</span> <span class="n">String</span><span class="o">[]{</span><span class="s">&#34;Rudolph&#34;</span><span class="o">,</span> <span class="s">&#34;[rR]udolph&#34;</span><span class="o">,</span>
                <span class="s">&#34;[rR][aeiou][a-z]ol.*&#34;</span><span class="o">,</span> <span class="s">&#34;R.*&#34;</span><span class="o">})</span> <span class="o">{</span>
            <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;Rudolph&#34;</span><span class="o">.</span><span class="na">matches</span><span class="o">(</span><span class="n">pattern</span><span class="o">));</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span>
<span class="cm">/*
</span><span class="cm">true
</span><span class="cm">true
</span><span class="cm">true
</span><span class="cm">true
</span><span class="cm"> */</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="1363-量词">13.6.3 量词</h3>
<p>量词描述了一个模式吸收输入文本的方式：</p>
<ul>
<li><code>贪婪型</code>：量词总是贪婪的，除非有其他的选项被设置。贪婪表达式会为所有可能的模式发现尽可能多的匹配。导致此问题的一个典型理由就是假定我们的模式仅能匹配第一个可能的字符组，如果它是贪婪的，那么它就会继续往下匹配。</li>
<li><code>勉强型</code>：用问好来指定，这个量词匹配满足模式所需要的最少字符数。因此也称作懒惰的、最少匹配的、非贪婪的、或不贪婪的。</li>
<li><code>占有型</code>：目前，这种类型的量词只有在<code>Java</code>语言中才可用（在其他语言中不可用），并且也更高级，因此我们大概不会立刻用到它。当正则表达式被应用于字符串时，它会产生相当多的状态，以便在匹配失败时可以回溯。而“占有的”量词并不保存这些中间状态，因此它们可以防止回溯。它们常常用于防止正则表达式失控，因此可以使正则表达式执行起来更有效。</li>
</ul>
<h3 id="1364-pattern和matcher">13.6.4 Pattern和Matcher</h3>
<p>比起功能有限的<code>String</code>类。我们更愿意构建功能强大的正则表达式对象。用<code>Pattern.compile()</code>方法来编译你的正则表达式。它会根据你的<code>String</code>类型的正则表达式生成一个<code>Pattern</code>对象。接下来，把你想要检索的字符串传入<code>Pattern</code>对象的<code>matcher()</code>方法。<code>matcher()</code>方法会生成一个<code>Matcher</code>对象。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">TestRegularExpression</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">args</span><span class="o">.</span><span class="na">length</span> <span class="o">&lt;</span> <span class="n">2</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;Usage:\njava TestRegularExpression characterSequence regularExpression+&#34;</span><span class="o">);</span>
            <span class="n">System</span><span class="o">.</span><span class="na">exit</span><span class="o">(</span><span class="n">0</span><span class="o">);</span>
        <span class="o">}</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;Input: \&#34;&#34;</span> <span class="o">+</span> <span class="n">args</span><span class="o">[</span><span class="n">0</span><span class="o">]</span> <span class="o">+</span> <span class="s">&#34;\&#34;&#34;</span><span class="o">);</span>
        <span class="k">for</span> <span class="o">(</span><span class="n">String</span> <span class="n">arg</span> <span class="o">:</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;Regular expression: \&#34;&#34;</span> <span class="o">+</span> <span class="n">arg</span> <span class="o">+</span> <span class="s">&#34;\&#34;&#34;</span><span class="o">);</span>
            <span class="n">Pattern</span> <span class="n">p</span> <span class="o">=</span> <span class="n">Pattern</span><span class="o">.</span><span class="na">compile</span><span class="o">(</span><span class="n">arg</span><span class="o">);</span>
            <span class="n">Matcher</span> <span class="n">m</span> <span class="o">=</span> <span class="n">p</span><span class="o">.</span><span class="na">matcher</span><span class="o">(</span><span class="n">args</span><span class="o">[</span><span class="n">0</span><span class="o">]);</span>
            <span class="k">while</span> <span class="o">(</span><span class="n">m</span><span class="o">.</span><span class="na">find</span><span class="o">())</span> <span class="o">{</span>
                <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;Match \&#34;&#34;</span> <span class="o">+</span> <span class="n">m</span><span class="o">.</span><span class="na">group</span><span class="o">()</span> <span class="o">+</span> <span class="s">&#34;\&#34; at positions &#34;</span> <span class="o">+</span> <span class="n">m</span><span class="o">.</span><span class="na">start</span><span class="o">()</span> <span class="o">+</span> <span class="s">&#34;-&#34;</span> <span class="o">+</span> <span class="o">(</span><span class="n">m</span><span class="o">.</span><span class="na">end</span><span class="o">()</span> <span class="o">-</span> <span class="n">1</span><span class="o">));</span>
            <span class="o">}</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-text" data-lang="text">java strings.TestRegularExpression &#34;abcabcabcdefabc&#34; &#34;abc+&#34; &#34;(abc)+&#34; &#34;(abc){2,}&#34;
</code></pre></td></tr></table>
</div>
</div><p>输出：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="nl">Input:</span> <span class="s">&#34;abcabcabcdefabc&#34;</span>
<span class="n">Regular</span> <span class="n">expression</span><span class="o">:</span> <span class="s">&#34;abcabcabcdefabc&#34;</span>
<span class="n">Match</span> <span class="s">&#34;abcabcabcdefabc&#34;</span> <span class="n">at</span> <span class="n">positions</span> <span class="n">0</span><span class="o">-</span><span class="n">14</span>
<span class="n">Regular</span> <span class="n">expression</span><span class="o">:</span> <span class="s">&#34;abc+&#34;</span>
<span class="n">Match</span> <span class="s">&#34;abc&#34;</span> <span class="n">at</span> <span class="n">positions</span> <span class="n">0</span><span class="o">-</span><span class="n">2</span>
<span class="n">Match</span> <span class="s">&#34;abc&#34;</span> <span class="n">at</span> <span class="n">positions</span> <span class="n">3</span><span class="o">-</span><span class="n">5</span>
<span class="n">Match</span> <span class="s">&#34;abc&#34;</span> <span class="n">at</span> <span class="n">positions</span> <span class="n">6</span><span class="o">-</span><span class="n">8</span>
<span class="n">Match</span> <span class="s">&#34;abc&#34;</span> <span class="n">at</span> <span class="n">positions</span> <span class="n">12</span><span class="o">-</span><span class="n">14</span>
<span class="n">Regular</span> <span class="n">expression</span><span class="o">:</span> <span class="s">&#34;(abc)+&#34;</span>
<span class="n">Match</span> <span class="s">&#34;abcabcabc&#34;</span> <span class="n">at</span> <span class="n">positions</span> <span class="n">0</span><span class="o">-</span><span class="n">8</span>
<span class="n">Match</span> <span class="s">&#34;abc&#34;</span> <span class="n">at</span> <span class="n">positions</span> <span class="n">12</span><span class="o">-</span><span class="n">14</span>
<span class="n">Regular</span> <span class="n">expression</span><span class="o">:</span> <span class="s">&#34;(abc){2,}&#34;</span>
<span class="n">Match</span> <span class="s">&#34;abcabcabc&#34;</span> <span class="n">at</span> <span class="n">positions</span> <span class="n">0</span><span class="o">-</span><span class="n">8</span>
</code></pre></td></tr></table>
</div>
</div><p><code>Pattern</code>对象表示编译后的正则表达式。从例子中可以看到，使用已编译的<code>Pattern</code>对象上的<code>matcher()</code>方法，加上一个输入字符串，从而共同构造了一个<code>Matcher</code>对象。同时，<code>Pattern</code>类还提供了<code>static</code>方法。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="kd">static</span> <span class="kt">boolean</span> <span class="nf">matches</span><span class="o">(</span><span class="n">String</span> <span class="n">regex</span><span class="o">,</span><span class="n">CharSequence</span> <span class="n">input</span><span class="o">)</span>
</code></pre></td></tr></table>
</div>
</div><p>该方法用以检查<code>regex</code>是否匹配整个<code>CharSequence</code>类型的<code>input</code>参数。编译后的<code>Pattern</code>对象还提供了<code>split()</code>方法，它从匹配了<code>regex</code>的地方分割输入字符串，返回分割后的字符串<code>String</code>数组。</p>
<p>通过调用<code>Pattern.matcher()</code>方法，并传入一个字符串参数，我们得到了一个<code>Matcher</code>对象。使用<code>Matcher</code>上的方法，我们将能够判断各种不同类型的匹配是否成功：</p>
<ul>
<li>boolean matches()</li>
<li>boolean lookingAt()</li>
<li>boolean find()</li>
<li>boolean find(int start)</li>
</ul>
<p>其中<code>matches()</code>方法用来判断整个输入字符串是否匹配正则表达式模式，而<code>lookingAt()</code>则用来判断该字符串（不必是整个字符串）的始部分是否能够匹配模式。</p>
<h4 id="find">find()</h4>
<p><code>Matcher.find()</code>方法可用来在<code>CharSequence</code>中查找多个匹配。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Finding</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">Matcher</span> <span class="n">m</span> <span class="o">=</span> <span class="n">Pattern</span><span class="o">.</span><span class="na">compile</span><span class="o">(</span><span class="s">&#34;\\w+&#34;</span><span class="o">).</span><span class="na">matcher</span><span class="o">(</span><span class="s">&#34;Evening is full of the linnet&#39;s wings&#34;</span><span class="o">);</span>
        <span class="k">while</span> <span class="o">(</span><span class="n">m</span><span class="o">.</span><span class="na">find</span><span class="o">())</span> <span class="o">{</span>
            <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">print</span><span class="o">(</span><span class="n">m</span><span class="o">.</span><span class="na">group</span><span class="o">()</span> <span class="o">+</span> <span class="s">&#34;, &#34;</span><span class="o">);</span>
        <span class="o">}</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">();</span>
        <span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="n">0</span><span class="o">;</span>
        <span class="k">while</span> <span class="o">(</span><span class="n">m</span><span class="o">.</span><span class="na">find</span><span class="o">(</span><span class="n">i</span><span class="o">))</span> <span class="o">{</span><span class="c1">//不断重新设定搜索的起始位置
</span><span class="c1"></span>            <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">print</span><span class="o">(</span><span class="n">m</span><span class="o">.</span><span class="na">group</span><span class="o">()</span> <span class="o">+</span> <span class="s">&#34;, &#34;</span><span class="o">);</span>
            <span class="n">i</span><span class="o">++;</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span>
<span class="cm">/*
</span><span class="cm">
</span><span class="cm">Evening, is, full, of, the, linnet, s, wings, 
</span><span class="cm">
</span><span class="cm">Evening, vening, ening, ning, ing, ng, g, is, is, s, full, full, ull, ll, l, of, of, f, 
</span><span class="cm">the, the, he, e, linnet, linnet, innet, nnet, net, et, t, s, s, wings, wings, ings, ngs, gs, s, 
</span><span class="cm">
</span><span class="cm"> */</span>
</code></pre></td></tr></table>
</div>
</div><h4 id="组groups">组（Groups）</h4>
<p>组是用括号划分的正则表达式，可以根据组的编号来引用某个组。组号为0表示整个表达式，组号1表示被第一对括号括起来的组，依次类推。因此，在下面这个表达式,</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-text" data-lang="text">A(B(C))D
</code></pre></td></tr></table>
</div>
</div><p>中有三个组：组0是ABCD，组1是BC，组2是C。</p>
<p><code>Matcher</code>对象提供了一系列方法，用以获取与组相关的信息：</p>
<ul>
<li>groupCount()：返回该匹配器的模式中的分组数目，第0组不包括在内。</li>
<li>group()：返回前一次匹配操作（例如find())的第0组（整个匹配）。</li>
<li>group(int i)：返回前一次匹配操作的第i组。指定的组没有匹配输入字符串的任何部分，则将会返回<code>null</code>。</li>
<li>start(int group)：返回在前一次匹配操作中寻找到的组的起始索引。</li>
<li>end(int group)：返回在前一次匹配操作中寻找到的组的最后一个字符索引加一的值。</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Groups</span> <span class="o">{</span>
    <span class="kd">static</span> <span class="kd">public</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">POEM</span> <span class="o">=</span>
            <span class="s">&#34;Twas brillig, and the slithy toves\n&#34;</span> <span class="o">+</span>
                    <span class="s">&#34;Did gyre and gimble in the wabe.\n&#34;</span> <span class="o">+</span>
                    <span class="s">&#34;All mimsy were the borogoves,\n&#34;</span> <span class="o">+</span>
                    <span class="s">&#34;And the mome raths outgrabe.\n\n&#34;</span> <span class="o">+</span>
                    <span class="s">&#34;Beware the Jabberwock, my son,\n&#34;</span> <span class="o">+</span>
                    <span class="s">&#34;The jaws that bite, the claws that catch.\n&#34;</span> <span class="o">+</span>
                    <span class="s">&#34;Beware the Jubjub bird, and shun\n&#34;</span> <span class="o">+</span>
                    <span class="s">&#34;The frumious Bandersnatch.&#34;</span><span class="o">;</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">Matcher</span> <span class="n">m</span> <span class="o">=</span> <span class="n">Pattern</span><span class="o">.</span><span class="na">compile</span><span class="o">(</span><span class="s">&#34;(?m)(\\S+)\\s+((\\S+)\\s+(\\S+))$&#34;</span><span class="o">).</span><span class="na">matcher</span><span class="o">(</span><span class="n">POEM</span><span class="o">);</span>
        <span class="k">while</span> <span class="o">(</span><span class="n">m</span><span class="o">.</span><span class="na">find</span><span class="o">())</span> <span class="o">{</span>
            <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="n">0</span><span class="o">;</span> <span class="n">i</span> <span class="o">&lt;=</span> <span class="n">m</span><span class="o">.</span><span class="na">groupCount</span><span class="o">();</span> <span class="n">i</span><span class="o">++)</span> <span class="o">{</span>
                <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">print</span><span class="o">(</span><span class="s">&#34;[&#34;</span> <span class="o">+</span> <span class="n">m</span><span class="o">.</span><span class="na">group</span><span class="o">(</span><span class="n">i</span><span class="o">)</span> <span class="o">+</span> <span class="s">&#34;]&#34;</span><span class="o">);</span>
            <span class="o">}</span>
            <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">();</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span>
<span class="cm">/*
</span><span class="cm">[the slithy toves][the][slithy toves][slithy][toves]
</span><span class="cm">[in the wabe.][in][the wabe.][the][wabe.]
</span><span class="cm">[were the borogoves,][were][the borogoves,][the][borogoves,]
</span><span class="cm">[mome raths outgrabe.][mome][raths outgrabe.][raths][outgrabe.]
</span><span class="cm">[Jabberwock, my son,][Jabberwock,][my son,][my][son,]
</span><span class="cm">[claws that catch.][claws][that catch.][that][catch.]
</span><span class="cm">[bird, and shun][bird,][and shun][and][shun]
</span><span class="cm">[The frumious Bandersnatch.][The][frumious Bandersnatch.][frumious][Bandersnatch.]
</span><span class="cm"> */</span>
</code></pre></td></tr></table>
</div>
</div><p><strong>start()与end()</strong></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span><span class="lnt">53
</span><span class="lnt">54
</span><span class="lnt">55
</span><span class="lnt">56
</span><span class="lnt">57
</span><span class="lnt">58
</span><span class="lnt">59
</span><span class="lnt">60
</span><span class="lnt">61
</span><span class="lnt">62
</span><span class="lnt">63
</span><span class="lnt">64
</span><span class="lnt">65
</span><span class="lnt">66
</span><span class="lnt">67
</span><span class="lnt">68
</span><span class="lnt">69
</span><span class="lnt">70
</span><span class="lnt">71
</span><span class="lnt">72
</span><span class="lnt">73
</span><span class="lnt">74
</span><span class="lnt">75
</span><span class="lnt">76
</span><span class="lnt">77
</span><span class="lnt">78
</span><span class="lnt">79
</span><span class="lnt">80
</span><span class="lnt">81
</span><span class="lnt">82
</span><span class="lnt">83
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">StartEnd</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="n">String</span> <span class="n">input</span> <span class="o">=</span>
            <span class="s">&#34;As long as there is injustice, whenever a\n&#34;</span> <span class="o">+</span>
                    <span class="s">&#34;Targathian baby cries out, wherever a distress\n&#34;</span> <span class="o">+</span>
                    <span class="s">&#34;signal sounds among the stars... We&#39;ll be there.\n&#34;</span> <span class="o">+</span>
                    <span class="s">&#34;This fine ship, and this fine crew ...\n&#34;</span> <span class="o">+</span>
                    <span class="s">&#34;Never give up! Never surrender!&#34;</span><span class="o">;</span>

    <span class="kd">private</span> <span class="kd">static</span> <span class="kd">class</span> <span class="nc">Display</span> <span class="o">{</span>
        <span class="kd">private</span> <span class="kt">boolean</span> <span class="n">regexPrinted</span> <span class="o">=</span> <span class="kc">false</span><span class="o">;</span>
        <span class="kd">private</span> <span class="n">String</span> <span class="n">regex</span><span class="o">;</span>

        <span class="n">Display</span><span class="o">(</span><span class="n">String</span> <span class="n">regex</span><span class="o">)</span> <span class="o">{</span>
            <span class="k">this</span><span class="o">.</span><span class="na">regex</span> <span class="o">=</span> <span class="n">regex</span><span class="o">;</span>
        <span class="o">}</span>

        <span class="kt">void</span> <span class="nf">display</span><span class="o">(</span><span class="n">String</span> <span class="n">message</span><span class="o">)</span> <span class="o">{</span>
            <span class="k">if</span> <span class="o">(!</span><span class="n">regexPrinted</span><span class="o">)</span> <span class="o">{</span>
                <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">regex</span><span class="o">);</span>
                <span class="n">regexPrinted</span> <span class="o">=</span> <span class="kc">true</span><span class="o">;</span>
            <span class="o">}</span>
            <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">message</span><span class="o">);</span>
        <span class="o">}</span>
    <span class="o">}</span>

    <span class="kd">static</span> <span class="kt">void</span> <span class="nf">examine</span><span class="o">(</span><span class="n">String</span> <span class="n">s</span><span class="o">,</span> <span class="n">String</span> <span class="n">regex</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">Display</span> <span class="n">d</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Display</span><span class="o">(</span><span class="n">regex</span><span class="o">);</span>
        <span class="n">Pattern</span> <span class="n">p</span> <span class="o">=</span> <span class="n">Pattern</span><span class="o">.</span><span class="na">compile</span><span class="o">(</span><span class="n">regex</span><span class="o">);</span>
        <span class="n">Matcher</span> <span class="n">m</span> <span class="o">=</span> <span class="n">p</span><span class="o">.</span><span class="na">matcher</span><span class="o">(</span><span class="n">s</span><span class="o">);</span>
        <span class="k">while</span> <span class="o">(</span><span class="n">m</span><span class="o">.</span><span class="na">find</span><span class="o">())</span> <span class="o">{</span>
            <span class="n">d</span><span class="o">.</span><span class="na">display</span><span class="o">(</span><span class="s">&#34;find() &#39;&#34;</span> <span class="o">+</span> <span class="n">m</span><span class="o">.</span><span class="na">group</span><span class="o">()</span> <span class="o">+</span> <span class="s">&#34;&#39; start = &#34;</span>
                    <span class="o">+</span> <span class="n">m</span><span class="o">.</span><span class="na">start</span><span class="o">()</span> <span class="o">+</span> <span class="s">&#34; end = &#34;</span> <span class="o">+</span> <span class="n">m</span><span class="o">.</span><span class="na">end</span><span class="o">());</span>
        <span class="o">}</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">m</span><span class="o">.</span><span class="na">lookingAt</span><span class="o">())</span> <span class="o">{</span>
            <span class="n">d</span><span class="o">.</span><span class="na">display</span><span class="o">(</span><span class="s">&#34;lookingAt() start = &#34;</span> <span class="o">+</span> <span class="n">m</span><span class="o">.</span><span class="na">start</span><span class="o">()</span> <span class="o">+</span> <span class="s">&#34; end = &#34;</span> <span class="o">+</span> <span class="n">m</span><span class="o">.</span><span class="na">end</span><span class="o">());</span>
        <span class="o">}</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">m</span><span class="o">.</span><span class="na">matches</span><span class="o">())</span> <span class="o">{</span>
            <span class="n">d</span><span class="o">.</span><span class="na">display</span><span class="o">(</span><span class="s">&#34;matches() start = &#34;</span> <span class="o">+</span> <span class="n">m</span><span class="o">.</span><span class="na">start</span><span class="o">()</span> <span class="o">+</span> <span class="s">&#34; end = &#34;</span> <span class="o">+</span> <span class="n">m</span><span class="o">.</span><span class="na">end</span><span class="o">());</span>
        <span class="o">}</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">for</span> <span class="o">(</span><span class="n">String</span> <span class="n">in</span> <span class="o">:</span> <span class="n">input</span><span class="o">.</span><span class="na">split</span><span class="o">(</span><span class="s">&#34;\n&#34;</span><span class="o">))</span> <span class="o">{</span>
            <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;input : &#34;</span> <span class="o">+</span> <span class="n">in</span><span class="o">);</span>
            <span class="k">for</span> <span class="o">(</span><span class="n">String</span> <span class="n">regex</span> <span class="o">:</span> <span class="k">new</span> <span class="n">String</span><span class="o">[]{</span><span class="s">&#34;\\w*ere\\w*&#34;</span><span class="o">,</span>
                    <span class="s">&#34;\\w*ever&#34;</span><span class="o">,</span> <span class="s">&#34;T\\w+&#34;</span><span class="o">,</span> <span class="s">&#34;Never.*?!&#34;</span><span class="o">})</span> <span class="o">{</span>
                <span class="n">examine</span><span class="o">(</span><span class="n">in</span><span class="o">,</span> <span class="n">regex</span><span class="o">);</span>
            <span class="o">}</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span>
<span class="cm">/*
</span><span class="cm">input : As long as there is injustice, whenever a
</span><span class="cm">\w*ere\w*
</span><span class="cm">find() &#39;there&#39; start = 11 end = 16
</span><span class="cm">\w*ever
</span><span class="cm">find() &#39;whenever&#39; start = 31 end = 39
</span><span class="cm">input : Targathian baby cries out, wherever a distress
</span><span class="cm">\w*ere\w*
</span><span class="cm">find() &#39;wherever&#39; start = 27 end = 35
</span><span class="cm">\w*ever
</span><span class="cm">find() &#39;wherever&#39; start = 27 end = 35
</span><span class="cm">T\w+
</span><span class="cm">find() &#39;Targathian&#39; start = 0 end = 10
</span><span class="cm">lookingAt() start = 0 end = 10
</span><span class="cm">input : signal sounds among the stars... We&#39;ll be there.
</span><span class="cm">\w*ere\w*
</span><span class="cm">find() &#39;there&#39; start = 42 end = 47
</span><span class="cm">input : This fine ship, and this fine crew ...
</span><span class="cm">T\w+
</span><span class="cm">find() &#39;This&#39; start = 0 end = 4
</span><span class="cm">lookingAt() start = 0 end = 4
</span><span class="cm">input : Never give up! Never surrender!
</span><span class="cm">\w*ever
</span><span class="cm">find() &#39;Never&#39; start = 0 end = 5
</span><span class="cm">find() &#39;Never&#39; start = 15 end = 20
</span><span class="cm">lookingAt() start = 0 end = 5
</span><span class="cm">Never.*?!
</span><span class="cm">find() &#39;Never give up!&#39; start = 0 end = 14
</span><span class="cm">find() &#39;Never surrender!&#39; start = 15 end = 31
</span><span class="cm">lookingAt() start = 0 end = 14
</span><span class="cm">matches() start = 0 end = 31
</span><span class="cm"> */</span>
</code></pre></td></tr></table>
</div>
</div><p><code>find()</code>可以在输入的任意位置定位正则表达式，而<code>lookingAt()</code>和<code>matches()</code>只有在正则表达式与输入的最开始处就开始匹配时才会成功。<code>matches()</code>只有在整个输入都匹配正则表达式时才会成功，而<code>lookingAt()</code>只要输入的第一部分匹配就会成功。</p>
<p><strong>Pattern标记</strong></p>
<p><code>Pattern</code>类的<code>compile()</code>方法还有另一个版本，它接受一个标记参数，已调整匹配的行为：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="n">Pattern</span> <span class="n">Pattern</span><span class="o">.</span><span class="na">compile</span><span class="o">(</span><span class="n">String</span> <span class="n">regex</span><span class="o">,</span><span class="kt">int</span> <span class="n">flag</span><span class="o">)</span>
</code></pre></td></tr></table>
</div>
</div><p>其中的<code>flag</code>来自以下<code>Pattern</code>类中的常量。</p>
<ul>
<li><code>Pattern.CANON_EQ</code>：两个字符当且仅当它们的完全规范分解相匹配时，就认为它们是匹配的。例如，如果我们指定这个标记，表达式<code>a\u030A</code>就会匹配字符串字符串<code>?</code>。在默认的情况下，匹配不考虑规范的等价性。</li>
<li><code>Pattern.CASE_INSENSITIVE(?i)</code>：默认情况下，大小写不敏感的匹配假定只有<code>US-ASCII</code>字符集中的字符才能进行。这个标记允许模式匹配不必考虑大小写（大写或小写）。通过指定<code>UNICODE_CASE</code>标记及结合此标记，基于<code>Unicode</code>的大小写不敏感的匹配就可以开启了。</li>
<li><code>Pattern.COMMENTS(?x)</code>：在这种模式下，空格符将被忽略掉，并且以<code>#</code>开始直到行末的注释也会被忽略掉。通过嵌入的标记表达式也可以开启<code>Unix</code>的行模式。</li>
<li><code>Pattern.DOTALL(?s)</code>：在<code>dotall</code>模式下，表达式“.”匹配所有字符，包括行终结符。默认情况下，“.”表达式不匹配行终结符。</li>
<li><code>Pattern.MuLTILINE(?m)</code>：在多行模式下，表达式<code>^</code>和<code>$</code>分别匹配一行的开始和结束。<code>^</code>还匹配输入字符串的开始，而<code>$</code>还匹配输入字符串的结尾。默认情况下，这些表达式仅匹配输入的完整字符串的开始和结束。</li>
<li><code>Pattern.UNICODE_CASE(?u)</code>：当指定这个标记，并且开启<code>CASE_INSENSITIVE</code>时，大小写不敏感的匹配将按照与<code>Unicode</code>标准相一致的方式进行。默认情况下，大小写不敏感的匹配假定只能在<code>US-ASCII</code>字符集中的字符才能进行。</li>
<li><code>Pattern.UNIX_LINES(?d)</code>：在这种模式下，在<code>.</code>、<code>^</code>和<code>$</code>行为中，只识别行终结符<code>\n</code>。</li>
</ul>
<p>在这些标记中，<code>Pattern.CASE_INSENSITIVE</code>、<code>Pattern.MULTILINE</code>以及<code>Pattern.COMMENTS</code>特别有用。</p>
<p>可以通过“或”(|)操作符</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">ReFlags</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">Pattern</span> <span class="n">p</span> <span class="o">=</span> <span class="n">Pattern</span><span class="o">.</span><span class="na">compile</span><span class="o">(</span><span class="s">&#34;^java&#34;</span><span class="o">,</span> <span class="n">Pattern</span><span class="o">.</span><span class="na">CASE_INSENSITIVE</span> <span class="o">|</span> <span class="n">Pattern</span><span class="o">.</span><span class="na">MULTILINE</span><span class="o">);</span>
        <span class="n">Matcher</span> <span class="n">m</span> <span class="o">=</span> <span class="n">p</span><span class="o">.</span><span class="na">matcher</span><span class="o">(</span>
                <span class="s">&#34;java has regex\nJava has regex\n&#34;</span> <span class="o">+</span>
                        <span class="s">&#34;JAVA has pretty good regular expressions\n&#34;</span> <span class="o">+</span>
                        <span class="s">&#34;Regular expressions are in Java&#34;</span>
        <span class="o">);</span>
        <span class="k">while</span> <span class="o">(</span><span class="n">m</span><span class="o">.</span><span class="na">find</span><span class="o">()){</span>
            <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">m</span><span class="o">.</span><span class="na">group</span><span class="o">());</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span>
<span class="cm">/*
</span><span class="cm">java
</span><span class="cm">Java
</span><span class="cm">JAVA
</span><span class="cm"> */</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="1365-split">13.6.5 split()</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">SplitDemo</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">String</span> <span class="n">input</span> <span class="o">=</span> <span class="s">&#34;THis!!unusual use!!of exclamation!!points&#34;</span><span class="o">;</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">Arrays</span><span class="o">.</span><span class="na">toString</span><span class="o">(</span><span class="n">Pattern</span><span class="o">.</span><span class="na">compile</span><span class="o">(</span><span class="s">&#34;!!&#34;</span><span class="o">).</span><span class="na">split</span><span class="o">(</span><span class="n">input</span><span class="o">)));</span>
        <span class="c1">//限制将输入分割成字符串的数量
</span><span class="c1"></span>        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">Arrays</span><span class="o">.</span><span class="na">toString</span><span class="o">(</span><span class="n">Pattern</span><span class="o">.</span><span class="na">compile</span><span class="o">(</span><span class="s">&#34;!!&#34;</span><span class="o">).</span><span class="na">split</span><span class="o">(</span><span class="n">input</span><span class="o">,</span> <span class="n">3</span><span class="o">)));</span>
    <span class="o">}</span>
<span class="o">}</span>
<span class="cm">/*
</span><span class="cm">[THis, unusual use, of exclamation, points]
</span><span class="cm">[THis, unusual use, of exclamation!!points]
</span><span class="cm"> */</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="1366-替换操作">13.6.6 替换操作</h3>
<ul>
<li>replaceFirst(String replacement)</li>
<li>replaceAll(String replacement)：替换所有匹配成功的部分。</li>
<li>appendReplacement(StringButter sbuf,String replacement)：执行渐进式的替换，允许你调用其他方法来生成或处理<code>replacement</code>，使你能够以编程的方式将目标分割成组，从而具备更强大的替换功能。</li>
<li>appendTail(StringBuffer sbuf)：在执行了一次货多次<code>appendReplacement()</code>之后，调用此方法可以将输入字符串余下的部分复制到<code>sbuf</code>中。</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span><span class="lnt">53
</span><span class="lnt">54
</span><span class="lnt">55
</span><span class="lnt">56
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="cm">/*!Here&#39;s a block of text to use as input to
</span><span class="cm">   the regular expression matcher. Note that we&#39;ll
</span><span class="cm">   first extract the block of text by looking for
</span><span class="cm">   the special delimiters, then process the
</span><span class="cm">   extracted block. !*/</span>


<span class="kn">import</span> <span class="nn">net.mindview.util.TextFile</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">java.util.regex.Matcher</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.regex.Pattern</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">TheReplacements</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">String</span> <span class="n">s</span> <span class="o">=</span> <span class="n">TextFile</span><span class="o">.</span><span class="na">read</span><span class="o">(</span><span class="s">&#34;src/main/java/strings/TheReplacements.java&#34;</span><span class="o">);</span>
        <span class="n">Matcher</span> <span class="n">mInput</span> <span class="o">=</span>
                <span class="n">Pattern</span><span class="o">.</span><span class="na">compile</span><span class="o">(</span><span class="s">&#34;/\\*!(.*)!\\*/&#34;</span><span class="o">,</span> <span class="n">Pattern</span><span class="o">.</span><span class="na">DOTALL</span><span class="o">)</span>
                        <span class="o">.</span><span class="na">matcher</span><span class="o">(</span><span class="n">s</span><span class="o">);</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">mInput</span><span class="o">.</span><span class="na">find</span><span class="o">())</span> <span class="o">{</span>
            <span class="n">s</span> <span class="o">=</span> <span class="n">mInput</span><span class="o">.</span><span class="na">group</span><span class="o">(</span><span class="n">1</span><span class="o">);</span>
        <span class="o">}</span>
        <span class="c1">//将存在两个或两个以上空格的地方,缩减为一个空格,并且
</span><span class="c1"></span>        <span class="n">s</span> <span class="o">=</span> <span class="n">s</span><span class="o">.</span><span class="na">replaceAll</span><span class="o">(</span><span class="s">&#34; {2,}&#34;</span><span class="o">,</span> <span class="s">&#34; &#34;</span><span class="o">);</span>
        <span class="c1">//删除每行开头部分的所有空格
</span><span class="c1"></span>        <span class="n">s</span> <span class="o">=</span> <span class="n">s</span><span class="o">.</span><span class="na">replaceAll</span><span class="o">(</span><span class="s">&#34;(?m)^ +&#34;</span><span class="o">,</span><span class="s">&#34;&#34;</span><span class="o">);</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">s</span><span class="o">);</span>
        <span class="c1">//replaceFirst只对找到的第一个匹配进行替换
</span><span class="c1"></span>        <span class="n">s</span> <span class="o">=</span> <span class="n">s</span><span class="o">.</span><span class="na">replaceFirst</span><span class="o">(</span><span class="s">&#34;[aeiou]&#34;</span><span class="o">,</span> <span class="s">&#34;(VOWEL1)&#34;</span><span class="o">);</span>
        <span class="n">StringBuffer</span> <span class="n">sbuf</span> <span class="o">=</span> <span class="k">new</span> <span class="n">StringBuffer</span><span class="o">();</span>
        <span class="n">Pattern</span> <span class="n">p</span> <span class="o">=</span> <span class="n">Pattern</span><span class="o">.</span><span class="na">compile</span><span class="o">(</span><span class="s">&#34;[aeiou]&#34;</span><span class="o">);</span>
        <span class="n">Matcher</span> <span class="n">m</span> <span class="o">=</span> <span class="n">p</span><span class="o">.</span><span class="na">matcher</span><span class="o">(</span><span class="n">s</span><span class="o">);</span>
        <span class="k">while</span> <span class="o">(</span><span class="n">m</span><span class="o">.</span><span class="na">find</span><span class="o">())</span> <span class="o">{</span>
            <span class="n">m</span><span class="o">.</span><span class="na">appendReplacement</span><span class="o">(</span><span class="n">sbuf</span><span class="o">,</span> <span class="n">m</span><span class="o">.</span><span class="na">group</span><span class="o">().</span><span class="na">toUpperCase</span><span class="o">());</span>
        <span class="o">}</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">sbuf</span><span class="o">);</span>
        <span class="n">m</span><span class="o">.</span><span class="na">appendTail</span><span class="o">(</span><span class="n">sbuf</span><span class="o">);</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">sbuf</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>
<span class="cm">/*
</span><span class="cm">Here&#39;s a block of text to use as input to
</span><span class="cm">the regular expression matcher. Note that we&#39;ll
</span><span class="cm">first extract the block of text by looking for
</span><span class="cm">the special delimiters, then process the
</span><span class="cm">extracted block.
</span><span class="cm">H(VOWEL1)rE&#39;s A blOck Of tExt tO UsE As InpUt tO
</span><span class="cm">thE rEgUlAr ExprEssIOn mAtchEr. NOtE thAt wE&#39;ll
</span><span class="cm">fIrst ExtrAct thE blOck Of tExt by lOOkIng fOr
</span><span class="cm">thE spEcIAl dElImItErs, thEn prOcEss thE
</span><span class="cm">ExtrActEd blO
</span><span class="cm">H(VOWEL1)rE&#39;s A blOck Of tExt tO UsE As InpUt tO
</span><span class="cm">thE rEgUlAr ExprEssIOn mAtchEr. NOtE thAt wE&#39;ll
</span><span class="cm">fIrst ExtrAct thE blOck Of tExt by lOOkIng fOr
</span><span class="cm">thE spEcIAl dElImItErs, thEn prOcEss thE
</span><span class="cm">ExtrActEd blOck. 
</span><span class="cm"> */</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="1367-reset">13.6.7 reset()</h3>
<p>通过<code>reset()</code>方法，可以将现有的<code>Matcher</code>对象应用于一个新的字符序列：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Resetting</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">Matcher</span> <span class="n">m</span> <span class="o">=</span> <span class="n">Pattern</span><span class="o">.</span><span class="na">compile</span><span class="o">(</span><span class="s">&#34;[frb][aiu][gx]&#34;</span><span class="o">)</span>
                <span class="o">.</span><span class="na">matcher</span><span class="o">(</span><span class="s">&#34;fix the rug with bags&#34;</span><span class="o">);</span>
        <span class="k">while</span> <span class="o">(</span><span class="n">m</span><span class="o">.</span><span class="na">find</span><span class="o">())</span> <span class="o">{</span>
            <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">print</span><span class="o">(</span><span class="n">m</span><span class="o">.</span><span class="na">group</span><span class="o">()</span> <span class="o">+</span> <span class="s">&#34; &#34;</span><span class="o">);</span>
        <span class="o">}</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">();</span>
        <span class="n">m</span><span class="o">.</span><span class="na">reset</span><span class="o">(</span><span class="s">&#34;fix the rig with rags&#34;</span><span class="o">);</span>
        <span class="k">while</span> <span class="o">(</span><span class="n">m</span><span class="o">.</span><span class="na">find</span><span class="o">())</span> <span class="o">{</span>
            <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">print</span><span class="o">(</span><span class="n">m</span><span class="o">.</span><span class="na">group</span><span class="o">()</span> <span class="o">+</span> <span class="s">&#34; &#34;</span><span class="o">);</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="1368-正则表达式与java-io">13.6.8 正则表达式与Java I/O</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">JGrep</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">if</span><span class="o">(</span><span class="n">args</span><span class="o">.</span><span class="na">length</span><span class="o">&lt;</span><span class="n">2</span><span class="o">){</span>
            <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;Usage: java JGrep file regex&#34;</span><span class="o">);</span>
            <span class="n">System</span><span class="o">.</span><span class="na">exit</span><span class="o">(</span><span class="n">0</span><span class="o">);</span>
        <span class="o">}</span>
        <span class="n">Pattern</span> <span class="n">p</span> <span class="o">=</span> <span class="n">Pattern</span><span class="o">.</span><span class="na">compile</span><span class="o">(</span><span class="n">args</span><span class="o">[</span><span class="n">1</span><span class="o">]);</span>
        <span class="kt">int</span> <span class="n">index</span> <span class="o">=</span> <span class="n">0</span><span class="o">;</span>
        <span class="n">Matcher</span> <span class="n">m</span> <span class="o">=</span> <span class="n">p</span><span class="o">.</span><span class="na">matcher</span><span class="o">(</span><span class="s">&#34;&#34;</span><span class="o">);</span>
        <span class="k">for</span> <span class="o">(</span><span class="n">String</span> <span class="n">line</span> <span class="o">:</span> <span class="k">new</span> <span class="n">TextFile</span><span class="o">(</span><span class="n">args</span><span class="o">[</span><span class="n">0</span><span class="o">]))</span> <span class="o">{</span>
            <span class="n">m</span><span class="o">.</span><span class="na">reset</span><span class="o">(</span><span class="n">line</span><span class="o">);</span>
            <span class="k">while</span> <span class="o">(</span><span class="n">m</span><span class="o">.</span><span class="na">find</span><span class="o">()){</span>
                <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">index</span><span class="o">++</span> <span class="o">+</span> <span class="s">&#34;: &#34;</span><span class="o">+</span><span class="n">m</span><span class="o">.</span><span class="na">group</span><span class="o">()+</span><span class="s">&#34;: &#34;</span><span class="o">+</span><span class="n">m</span><span class="o">.</span><span class="na">start</span><span class="o">());</span>
            <span class="o">}</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></td></tr></table>
</div>
</div><h2 id="137-扫描输入">13.7 扫描输入</h2>
<p>从文件或标准输入读取数据时一件相当痛苦的事情。一般的解决之道就是读入一行文本，对其进行粉刺，然后使用<code>Integer</code>、<code>Double</code>等类的各种解析方法来解析数据：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">SimpleRead</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="n">BufferedReader</span> <span class="n">input</span> <span class="o">=</span> <span class="k">new</span> <span class="n">BufferedReader</span><span class="o">(</span><span class="k">new</span> <span class="n">StringReader</span><span class="o">(</span><span class="s">&#34;Sir Robin of Camelot \n22 1.61803&#34;</span><span class="o">));</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">try</span> <span class="o">{</span>
            <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;What is your name?&#34;</span><span class="o">);</span>
            <span class="n">String</span> <span class="n">name</span> <span class="o">=</span> <span class="n">input</span><span class="o">.</span><span class="na">readLine</span><span class="o">();</span>
            <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">name</span><span class="o">);</span>
            <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;How old are you? What is your favorite double?&#34;</span><span class="o">);</span>
            <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;(input: &lt;age&gt; &lt;double&gt;)&#34;</span><span class="o">);</span>
            <span class="n">String</span> <span class="n">numbers</span> <span class="o">=</span> <span class="n">input</span><span class="o">.</span><span class="na">readLine</span><span class="o">();</span>
            <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">numbers</span><span class="o">);</span>
            <span class="n">String</span><span class="o">[]</span> <span class="n">numArray</span> <span class="o">=</span> <span class="n">numbers</span><span class="o">.</span><span class="na">split</span><span class="o">(</span><span class="s">&#34; &#34;</span><span class="o">);</span>
            <span class="kt">int</span> <span class="n">age</span> <span class="o">=</span> <span class="n">Integer</span><span class="o">.</span><span class="na">parseInt</span><span class="o">(</span><span class="n">numArray</span><span class="o">[</span><span class="n">0</span><span class="o">]);</span>
            <span class="kt">double</span> <span class="n">favorite</span> <span class="o">=</span> <span class="n">Double</span><span class="o">.</span><span class="na">parseDouble</span><span class="o">(</span><span class="n">numArray</span><span class="o">[</span><span class="n">1</span><span class="o">]);</span>
            <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">format</span><span class="o">(</span><span class="s">&#34;Hi %s.\n&#34;</span><span class="o">,</span> <span class="n">name</span><span class="o">);</span>
            <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">format</span><span class="o">(</span><span class="s">&#34;In 5 years you will be %d.\n&#34;</span><span class="o">,</span> <span class="n">age</span> <span class="o">+</span> <span class="n">5</span><span class="o">);</span>
            <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">format</span><span class="o">(</span><span class="s">&#34;My favorite double is %f.&#34;</span><span class="o">,</span> <span class="n">favorite</span> <span class="o">/</span> <span class="n">2</span><span class="o">);</span>
        <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">IOException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;I/O exception&#34;</span><span class="o">);</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span>
<span class="cm">/*
</span><span class="cm">What is your name?
</span><span class="cm">Sir Robin of Camelot
</span><span class="cm">How old are you? What is your favorite double?
</span><span class="cm">(input: &lt;age&gt; &lt;double&gt;)
</span><span class="cm">22 1.61803
</span><span class="cm">Hi Sir Robin of Camelot .
</span><span class="cm">In 5 years you will be 27.
</span><span class="cm">My favorite double is 0.809015.
</span><span class="cm"> */</span>
</code></pre></td></tr></table>
</div>
</div><p><code>Java SE5</code>新增了<code>Scanner</code>类，可以大大减轻扫描输入的工作负担：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">BetterRead</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">Scanner</span> <span class="n">stdin</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Scanner</span><span class="o">(</span><span class="n">SimpleRead</span><span class="o">.</span><span class="na">input</span><span class="o">);</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;What is your name?&#34;</span><span class="o">);</span>
        <span class="n">String</span> <span class="n">name</span> <span class="o">=</span> <span class="n">stdin</span><span class="o">.</span><span class="na">nextLine</span><span class="o">();</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">name</span><span class="o">);</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;How old are you? What is your favorite double?&#34;</span><span class="o">);</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;input: &lt;age&gt; &lt;double&gt;&#34;</span><span class="o">);</span>
        <span class="kt">int</span> <span class="n">age</span> <span class="o">=</span> <span class="n">stdin</span><span class="o">.</span><span class="na">nextInt</span><span class="o">();</span>
        <span class="kt">double</span> <span class="n">favorite</span> <span class="o">=</span> <span class="n">stdin</span><span class="o">.</span><span class="na">nextDouble</span><span class="o">();</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">format</span><span class="o">(</span><span class="s">&#34;Hi %s.\n&#34;</span><span class="o">,</span> <span class="n">name</span><span class="o">);</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">format</span><span class="o">(</span><span class="s">&#34;In 5 years you will be %d.\n&#34;</span><span class="o">,</span> <span class="n">age</span> <span class="o">+</span> <span class="n">5</span><span class="o">);</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">format</span><span class="o">(</span><span class="s">&#34;My favorite double is %f.&#34;</span><span class="o">,</span> <span class="n">favorite</span> <span class="o">/</span> <span class="n">2</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>
<span class="cm">/*
</span><span class="cm">What is your name?
</span><span class="cm">Sir Robin of Camelot
</span><span class="cm">How old are you? What is your favorite double?
</span><span class="cm">input: &lt;age&gt; &lt;double&gt;
</span><span class="cm">Hi Sir Robin of Camelot .
</span><span class="cm">In 5 years you will be 27.
</span><span class="cm">My favorite double is 0.809015.
</span><span class="cm"> */</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="71-scanner定界符">7.1 Scanner定界符</h3>
<p>在默认情况下，<code>Scanner</code>根据空白字符对输入进行分词，但是你可以用正则表达式指定自己所需的定界符：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">ScannerDelimiter</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">Scanner</span> <span class="n">scanner</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Scanner</span><span class="o">(</span><span class="s">&#34;12,42,78,99,42&#34;</span><span class="o">);</span>
        <span class="n">scanner</span><span class="o">.</span><span class="na">useDelimiter</span><span class="o">(</span><span class="s">&#34;\\s*,\\s*&#34;</span><span class="o">);</span>
        <span class="k">while</span> <span class="o">(</span><span class="n">scanner</span><span class="o">.</span><span class="na">hasNext</span><span class="o">()){</span>
            <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">scanner</span><span class="o">.</span><span class="na">nextInt</span><span class="o">());</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span>
<span class="cm">/*
</span><span class="cm">12
</span><span class="cm">42
</span><span class="cm">78
</span><span class="cm">99
</span><span class="cm">42
</span><span class="cm"> */</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="72-用正则表达式扫描">7.2 用正则表达式扫描</h3>
<p>除了能够扫描基本类型之外，还可以使用自定义的正则表达式进行扫描，这在扫描复杂数据的时候非常有用。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">ThreatAnalyzer</span> <span class="o">{</span>
    <span class="kd">static</span> <span class="n">String</span> <span class="n">threatData</span> <span class="o">=</span>
            <span class="s">&#34;58.27.82.161@02/10/2005\n&#34;</span><span class="o">+</span>
            <span class="s">&#34;204.45.234.40@02/11/2005\n&#34;</span><span class="o">+</span>
            <span class="s">&#34;58.27.82.161@02/11/2005\n&#34;</span><span class="o">+</span>
            <span class="s">&#34;58.27.82.161@02/12/2005\n&#34;</span><span class="o">+</span>
            <span class="s">&#34;58.27.82.161@02/12/2005\n&#34;</span><span class="o">+</span>
            <span class="s">&#34;[Next log section with different data format]&#34;</span><span class="o">;</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">Scanner</span> <span class="n">scanner</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Scanner</span><span class="o">(</span><span class="n">threatData</span><span class="o">);</span>
        <span class="n">String</span> <span class="n">pattern</span> <span class="o">=</span> <span class="s">&#34;(\\d+[.]\\d+[.]\\d+[.]\\d+)@&#34;</span> <span class="o">+</span>
                <span class="s">&#34;(\\d{2}/\\d{2}/\\d{4})&#34;</span><span class="o">;</span>
        <span class="k">while</span> <span class="o">(</span><span class="n">scanner</span><span class="o">.</span><span class="na">hasNext</span><span class="o">(</span><span class="n">pattern</span><span class="o">)){</span>
            <span class="n">scanner</span><span class="o">.</span><span class="na">next</span><span class="o">(</span><span class="n">pattern</span><span class="o">);</span>
            <span class="n">MatchResult</span> <span class="n">match</span> <span class="o">=</span> <span class="n">scanner</span><span class="o">.</span><span class="na">match</span><span class="o">();</span>
            <span class="n">String</span> <span class="n">ip</span> <span class="o">=</span> <span class="n">match</span><span class="o">.</span><span class="na">group</span><span class="o">(</span><span class="n">1</span><span class="o">);</span>
            <span class="n">String</span> <span class="n">date</span> <span class="o">=</span> <span class="n">match</span><span class="o">.</span><span class="na">group</span><span class="o">(</span><span class="n">2</span><span class="o">);</span>
            <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">format</span><span class="o">(</span><span class="s">&#34;Threat on %s from %s\n&#34;</span><span class="o">,</span><span class="n">date</span><span class="o">,</span><span class="n">ip</span><span class="o">);</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span>
<span class="cm">/*
</span><span class="cm">Threat on 02/10/2005 from 58.27.82.161
</span><span class="cm">Threat on 02/11/2005 from 204.45.234.40
</span><span class="cm">Threat on 02/11/2005 from 58.27.82.161
</span><span class="cm">Threat on 02/12/2005 from 58.27.82.161
</span><span class="cm">Threat on 02/12/2005 from 58.27.82.161
</span><span class="cm"> */</span>
</code></pre></td></tr></table>
</div>
</div><h2 id="138-stringtokenizer">13.8 StringTokenizer</h2>
<p>在<code>Java</code>引入正则表达式和<code>Scanner</code>类之前，分割字符串的唯一方法是使用<code>StringTokenizer</code>来分词。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">ReplacingStringTokenizer</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">String</span> <span class="n">input</span> <span class="o">=</span> <span class="s">&#34;But I&#39;m not dead yet! I feel happy!&#34;</span><span class="o">;</span>
        <span class="n">StringTokenizer</span> <span class="n">stoke</span> <span class="o">=</span> <span class="k">new</span> <span class="n">StringTokenizer</span><span class="o">(</span><span class="n">input</span><span class="o">);</span>
        <span class="k">while</span> <span class="o">(</span><span class="n">stoke</span><span class="o">.</span><span class="na">hasMoreElements</span><span class="o">()){</span>
            <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">print</span><span class="o">(</span><span class="n">stoke</span><span class="o">.</span><span class="na">nextToken</span><span class="o">()+</span><span class="s">&#34; &#34;</span><span class="o">);</span>
        <span class="o">}</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">();</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">Arrays</span><span class="o">.</span><span class="na">toString</span><span class="o">(</span><span class="n">input</span><span class="o">.</span><span class="na">split</span><span class="o">(</span><span class="s">&#34; &#34;</span><span class="o">)));</span>
        <span class="n">Scanner</span> <span class="n">scanner</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Scanner</span><span class="o">(</span><span class="n">input</span><span class="o">);</span>
        <span class="k">while</span> <span class="o">(</span><span class="n">scanner</span><span class="o">.</span><span class="na">hasNext</span><span class="o">()){</span>
            <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">print</span><span class="o">(</span><span class="n">scanner</span><span class="o">.</span><span class="na">next</span><span class="o">()+</span><span class="s">&#34; &#34;</span><span class="o">);</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span>
<span class="cm">/*
</span><span class="cm">But I&#39;m not dead yet! I feel happy!
</span><span class="cm">[But, I&#39;m, not, dead, yet!, I, feel, happy!]
</span><span class="cm">But I&#39;m not dead yet! I feel happy!
</span><span class="cm"> */</span>
</code></pre></td></tr></table>
</div>
</div><h2 id="string相关面试题">String相关面试题</h2>
<ul>
<li></li>
<li>String、StringBuffer、StringBuilder区别</li>
</ul>
<h2 id="参考">参考</h2>
<ul>
<li><a href="https://deerchao.net/tutorials/regex/regex.htm">正则表达式30分钟入门教程</a></li>
</ul>

    </div>

    <div class="post-copyright">
  <p class="copyright-item">
    <span class="item-title">文章作者</span>
    <span class="item-content">malinkang</span>
  </p>
  <p class="copyright-item">
    <span class="item-title">上次更新</span>
    <span class="item-content">
        2013-06-04
        
    </span>
  </p>
  
  
</div>
<footer class="post-footer">
      <div class="post-tags">
          <a href="/tags/thinking-in-java/">Thinking in Java</a>
          </div>
      <nav class="post-nav">
        <a class="prev" href="/post/thinking-in-java-type-information/">
            <i class="iconfont icon-left"></i>
            <span class="prev-text nav-default">《Java编程思想》第14章类型信息</span>
            <span class="prev-text nav-mobile">上一篇</span>
          </a>
        <a class="next" href="/post/thinking-in-java-error-handling-with-exceptions/">
            <span class="next-text nav-default">《Java编程思想》第12章通过异常处理错误</span>
            <span class="next-text nav-mobile">下一篇</span>
            <i class="iconfont icon-right"></i>
          </a>
      </nav>
    </footer>
  </article>
        </div>
        <div id="disqus_thread"></div>
    <script type="text/javascript">
    (function() {
      
      
      if (window.location.hostname === 'localhost') return;

      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      var disqus_shortname = 'malinkang-cn';
      dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
    </script>
    <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>

  

  

      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="social-links">
      <a href="https://twitter.com/malinkang" class="iconfont icon-twitter" title="twitter"></a>
      <a href="https://github.com/malinkang" class="iconfont icon-github" title="github"></a>
      <a href="https://weibo.com/malinkang" class="iconfont icon-weibo" title="weibo"></a>
  <a href="https://malinkang.cn/index.xml" type="application/rss+xml" class="iconfont icon-rss" title="rss"></a>
</div>

<div class="copyright">
  <span class="power-by">
    由 <a class="hexo-link" href="https://gohugo.io">Hugo</a> 强力驱动
  </span>
  <span class="division">|</span>
  <span class="theme-info">
    主题 - 
    <a class="theme-link" href="https://github.com/olOwOlo/hugo-theme-even">Even</a>
  </span>

  

  <span class="copyright-year">
    &copy; 
    2017 - 
    2021
    <span class="heart">
      <i class="iconfont icon-heart"></i>
    </span>
    <span class="author">malinkang</span>
  </span>
</div>
    </footer>

    <div class="back-to-top" id="back-to-top">
      <i class="iconfont icon-up"></i>
    </div>
  </div>
  
  <script src="https://cdn.jsdelivr.net/npm/jquery@3.2.1/dist/jquery.min.js" integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/slideout@1.0.1/dist/slideout.min.js" integrity="sha256-t+zJ/g8/KXIJMjSVQdnibt4dlaDxc9zXr/9oNPeWqdg=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.1.20/dist/jquery.fancybox.min.js" integrity="sha256-XVLffZaxoWfGUEbdzuLi7pwaUJv1cecsQJQqGLe7axY=" crossorigin="anonymous"></script>



<script type="text/javascript" src="/js/main.min.d7b7ada643c9c1a983026e177f141f7363b4640d619caf01d8831a6718cd44ea.js"></script>
  <script type="text/javascript">
    window.MathJax = {
      showProcessingMessages: false,
      messageStyle: 'none'
    };
  </script>
  <script async src="https://cdn.jsdelivr.net/npm/mathjax@2.7.5/MathJax.js?config=TeX-MML-AM_CHTML"  integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>








</body>
</html>
