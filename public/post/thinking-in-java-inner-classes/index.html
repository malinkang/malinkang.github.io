<!DOCTYPE html>
<html lang="zh-cn">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <title>《Java编程思想》第10章内部类 - 人生最可悲的事情，莫过于胸怀大志，却又虚度光阴。</title>
  <meta name="renderer" content="webkit" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>

<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />

<meta name="theme-color" content="#f8f5ec" />
<meta name="msapplication-navbutton-color" content="#f8f5ec">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="#f8f5ec">


<meta name="author" content="malinkang" /><meta name="description" content="1.创建内部类 创建内部类的方式就是把类的定义置于外围类的里面。 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 public class Parcel1 { class Contents" /><meta name="keywords" content="Hugo, theme, even" />






<meta name="generator" content="Hugo 0.80.0 with theme even" />


<link rel="canonical" href="https://malinkang.cn/post/thinking-in-java-inner-classes/" />
<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="manifest" href="/manifest.json">
<link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">



<link href="/sass/main.min.c12ac5d6e912b28ec1fcd71d47773cc8112a03296d4ff03660135b54f0923299.css" rel="stylesheet">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.1.20/dist/jquery.fancybox.min.css" integrity="sha256-7TyXnr2YU040zfSP+rEcz29ggW4j56/ujTPwjMzyqFY=" crossorigin="anonymous">


<meta property="og:title" content="《Java编程思想》第10章内部类" />
<meta property="og:description" content="1.创建内部类 创建内部类的方式就是把类的定义置于外围类的里面。 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 public class Parcel1 { class Contents" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://malinkang.cn/post/thinking-in-java-inner-classes/" />
<meta property="article:published_time" content="2013-05-14T13:39:36+00:00" />
<meta property="article:modified_time" content="2013-05-14T13:39:36+00:00" />
<meta itemprop="name" content="《Java编程思想》第10章内部类">
<meta itemprop="description" content="1.创建内部类 创建内部类的方式就是把类的定义置于外围类的里面。 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 public class Parcel1 { class Contents">
<meta itemprop="datePublished" content="2013-05-14T13:39:36+00:00" />
<meta itemprop="dateModified" content="2013-05-14T13:39:36+00:00" />
<meta itemprop="wordCount" content="4902">



<meta itemprop="keywords" content="Thinking in Java," />
<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="《Java编程思想》第10章内部类"/>
<meta name="twitter:description" content="1.创建内部类 创建内部类的方式就是把类的定义置于外围类的里面。 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 public class Parcel1 { class Contents"/>

<!--[if lte IE 9]>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/classlist/1.1.20170427/classList.min.js"></script>
<![endif]-->

<!--[if lt IE 9]>
  <script src="https://cdn.jsdelivr.net/npm/html5shiv@3.7.3/dist/html5shiv.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/respond.js@1.4.2/dest/respond.min.js"></script>
<![endif]-->

</head>
<body>
  <div id="mobile-navbar" class="mobile-navbar">
  <div class="mobile-header-logo">
    <a href="/" class="logo">Malinkang&#39;s Blog</a>
  </div>
  <div class="mobile-navbar-icon">
    <span></span>
    <span></span>
    <span></span>
  </div>
</div>
<nav id="mobile-menu" class="mobile-menu slideout-menu">
  <ul class="mobile-menu-list">
    <a href="/">
        <li class="mobile-menu-item">首页</li>
      </a><a href="/post/">
        <li class="mobile-menu-item">归档</li>
      </a><a href="/tags/">
        <li class="mobile-menu-item">标签</li>
      </a>
  </ul>
</nav>
  <div class="container" id="mobile-panel">
    <header id="header" class="header">
        <div class="logo-wrapper">
  <a href="/" class="logo">Malinkang&#39;s Blog</a>
</div>

<nav class="site-navbar">
  <ul id="menu" class="menu">
    <li class="menu-item">
        <a class="menu-item-link" href="/">首页</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/post/">归档</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/tags/">标签</a>
      </li>
  </ul>
</nav>
    </header>

    <main id="main" class="main">
      <div class="content-wrapper">
        <div id="content" class="content">
          <article class="post">
    
    <header class="post-header">
      <h1 class="post-title">《Java编程思想》第10章内部类</h1>

      <div class="post-meta">
        <span class="post-time"> 2013-05-14 </span>
        
        
      </div>
    </header>

    <div class="post-toc" id="post-toc">
  <h2 class="post-toc-title">文章目录</h2>
  <div class="post-toc-content always-active">
    <nav id="TableOfContents">
  <ul>
    <li><a href="#1创建内部类">1.创建内部类</a></li>
    <li><a href="#2链接到外部类">2.链接到外部类</a></li>
    <li><a href="#3使用this与new">3.使用.this与.new</a></li>
    <li><a href="#4内部类与向上转型">4.内部类与向上转型</a></li>
    <li><a href="#5在方法和作用域内的内部类">5.在方法和作用域内的内部类</a></li>
    <li><a href="#6匿名内部类">6.匿名内部类</a>
      <ul>
        <li><a href="#61-再访工厂方法">6.1 再访工厂方法</a></li>
      </ul>
    </li>
    <li><a href="#7嵌套类">7.嵌套类</a>
      <ul>
        <li><a href="#71-接口内部的类">7.1 接口内部的类</a></li>
        <li><a href="#72-从多层嵌套类中访问外部类的成员">7.2 从多层嵌套类中访问外部类的成员</a></li>
      </ul>
    </li>
    <li><a href="#8为什么需要内部类">8.为什么需要内部类</a>
      <ul>
        <li><a href="#81-闭包与回调">8.1 闭包与回调</a></li>
        <li><a href="#82-内部类与控制框架">8.2 内部类与控制框架</a></li>
      </ul>
    </li>
    <li><a href="#9内部类的集成">9.内部类的集成</a></li>
    <li><a href="#10内部类可以被覆盖吗">10.内部类可以被覆盖吗</a></li>
    <li><a href="#11局部内部类">11.局部内部类</a></li>
    <li><a href="#12内部类标识符">12.内部类标识符</a></li>
    <li><a href="#参考">参考</a></li>
  </ul>
</nav>
  </div>
</div>
    <div class="post-content">
      <h2 id="1创建内部类">1.创建内部类</h2>
<p>创建内部类的方式就是把类的定义置于外围类的里面。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Parcel1</span> <span class="o">{</span>
    <span class="kd">class</span> <span class="nc">Contents</span> <span class="o">{</span>
        <span class="kd">private</span> <span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="n">11</span><span class="o">;</span>

        <span class="kd">public</span> <span class="kt">int</span> <span class="nf">value</span><span class="o">()</span> <span class="o">{</span>
            <span class="k">return</span> <span class="n">i</span><span class="o">;</span>
        <span class="o">}</span>
    <span class="o">}</span>
    <span class="kd">class</span> <span class="nc">Destination</span> <span class="o">{</span>
        <span class="kd">private</span> <span class="n">String</span> <span class="n">label</span><span class="o">;</span>

        <span class="n">Destination</span><span class="o">(</span><span class="n">String</span> <span class="n">whereTo</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">label</span> <span class="o">=</span> <span class="n">whereTo</span><span class="o">;</span>
        <span class="o">}</span>

        <span class="n">String</span> <span class="nf">readLabel</span><span class="o">()</span> <span class="o">{</span>
            <span class="k">return</span> <span class="n">label</span><span class="o">;</span>
        <span class="o">}</span>
    <span class="o">}</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">ship</span><span class="o">(</span><span class="n">String</span> <span class="n">dest</span><span class="o">){</span>
        <span class="n">Contents</span> <span class="n">c</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Contents</span><span class="o">();</span>
        <span class="n">Destination</span> <span class="n">d</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Destination</span><span class="o">(</span><span class="n">dest</span><span class="o">);</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">d</span><span class="o">.</span><span class="na">readLabel</span><span class="o">());</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">Parcel1</span> <span class="n">p</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Parcel1</span><span class="o">();</span>
        <span class="n">p</span><span class="o">.</span><span class="na">ship</span><span class="o">(</span><span class="s">&#34;Tasmania&#34;</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>
<span class="cm">/**
</span><span class="cm"> * 输出Tasmania
</span><span class="cm"> */</span>
</code></pre></td></tr></table>
</div>
</div><p>更常见的情况是，外部类将有一个方法，该方法返回一个指向内部类的引用，就像下面的<code>to()</code>和<code>content()</code>方法。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Parcel2</span> <span class="o">{</span>
    <span class="kd">class</span> <span class="nc">Contents</span> <span class="o">{</span>
        <span class="kd">private</span> <span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="n">11</span><span class="o">;</span>

        <span class="kd">public</span> <span class="kt">int</span> <span class="nf">value</span><span class="o">()</span> <span class="o">{</span>
            <span class="k">return</span> <span class="n">i</span><span class="o">;</span>
        <span class="o">}</span>
    <span class="o">}</span>
    <span class="kd">class</span> <span class="nc">Destination</span> <span class="o">{</span>
        <span class="kd">private</span> <span class="n">String</span> <span class="n">label</span><span class="o">;</span>

        <span class="n">Destination</span><span class="o">(</span><span class="n">String</span> <span class="n">whereTo</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">label</span> <span class="o">=</span> <span class="n">whereTo</span><span class="o">;</span>
        <span class="o">}</span>

        <span class="n">String</span> <span class="nf">readLabel</span><span class="o">()</span> <span class="o">{</span>
            <span class="k">return</span> <span class="n">label</span><span class="o">;</span>
        <span class="o">}</span>
    <span class="o">}</span>
    <span class="kd">public</span> <span class="n">Destination</span> <span class="nf">to</span><span class="o">(</span><span class="n">String</span> <span class="n">s</span><span class="o">){</span>
        <span class="k">return</span> <span class="k">new</span> <span class="n">Destination</span><span class="o">(</span><span class="n">s</span><span class="o">);</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="n">Contents</span> <span class="nf">contents</span><span class="o">(){</span>
        <span class="k">return</span> <span class="k">new</span> <span class="n">Contents</span><span class="o">();</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">ship</span><span class="o">(</span><span class="n">String</span> <span class="n">dest</span><span class="o">){</span>
        <span class="n">Contents</span> <span class="n">c</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Contents</span><span class="o">();</span>
        <span class="n">Destination</span> <span class="n">d</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Destination</span><span class="o">(</span><span class="n">dest</span><span class="o">);</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">d</span><span class="o">.</span><span class="na">readLabel</span><span class="o">());</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">Parcel2</span> <span class="n">p</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Parcel2</span><span class="o">();</span>
        <span class="n">p</span><span class="o">.</span><span class="na">ship</span><span class="o">(</span><span class="s">&#34;Tasmania&#34;</span><span class="o">);</span>
        <span class="n">Parcel2</span> <span class="n">q</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Parcel2</span><span class="o">();</span>
        <span class="c1">//如果想从外部类的非静态方法之外的任意位置创建某个内部类的对象
</span><span class="c1"></span>        <span class="c1">//必须具体地指定这个对象的类型OuterClassName.InnerClassName
</span><span class="c1"></span>        <span class="n">Parcel2</span><span class="o">.</span><span class="na">Contents</span> <span class="n">c</span> <span class="o">=</span> <span class="n">q</span><span class="o">.</span><span class="na">contents</span><span class="o">();</span>
        <span class="n">Parcel2</span><span class="o">.</span><span class="na">Destination</span> <span class="n">d</span> <span class="o">=</span> <span class="n">q</span><span class="o">.</span><span class="na">to</span><span class="o">(</span><span class="s">&#34;Borneo&#34;</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>
<span class="cm">/**
</span><span class="cm"> * 输出Tasmania
</span><span class="cm"> */</span>
</code></pre></td></tr></table>
</div>
</div><h2 id="2链接到外部类">2.链接到外部类</h2>
<p>当某个外围类的对象创建了一个内部类对象时，此内部类对象必定会秘密地捕获一个指向那个外围类对象的引用。然后，在你访问此外围类的成员时，就是用那个引用来选择外围类的成员。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span><span class="lnt">53
</span><span class="lnt">54
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="kd">public</span> <span class="kd">interface</span> <span class="nc">Selector</span> <span class="o">{</span>
    <span class="kt">boolean</span> <span class="nf">end</span><span class="o">();</span>
    <span class="n">Object</span> <span class="nf">current</span><span class="o">();</span>
    <span class="kt">void</span> <span class="nf">next</span><span class="o">();</span>
<span class="o">}</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Sequence</span> <span class="o">{</span>
    <span class="kd">private</span> <span class="n">Object</span><span class="o">[]</span> <span class="n">items</span><span class="o">;</span>
    <span class="kd">private</span> <span class="kt">int</span> <span class="n">next</span><span class="o">;</span>

    <span class="kd">public</span> <span class="nf">Sequence</span><span class="o">(</span><span class="kt">int</span> <span class="n">size</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">items</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Object</span><span class="o">[</span><span class="n">size</span><span class="o">];</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">add</span><span class="o">(</span><span class="n">Object</span> <span class="n">x</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">next</span> <span class="o">&lt;</span> <span class="n">items</span><span class="o">.</span><span class="na">length</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">items</span><span class="o">[</span><span class="n">next</span><span class="o">++]</span> <span class="o">=</span> <span class="n">x</span><span class="o">;</span>
        <span class="o">}</span>
    <span class="o">}</span>

    <span class="kd">private</span> <span class="kd">class</span> <span class="nc">SequenceSelector</span> <span class="kd">implements</span> <span class="n">Selector</span> <span class="o">{</span>
        <span class="kd">private</span> <span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="n">0</span><span class="o">;</span>

        <span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">end</span><span class="o">()</span> <span class="o">{</span>
            <span class="k">return</span> <span class="n">i</span> <span class="o">==</span> <span class="n">items</span><span class="o">.</span><span class="na">length</span><span class="o">;</span>
        <span class="o">}</span>

        <span class="kd">public</span> <span class="n">Object</span> <span class="nf">current</span><span class="o">()</span> <span class="o">{</span>
            <span class="k">return</span> <span class="n">items</span><span class="o">[</span><span class="n">i</span><span class="o">];</span> <span class="c1">//访问外围类的items
</span><span class="c1"></span>        <span class="o">}</span>

        <span class="kd">public</span> <span class="kt">void</span> <span class="nf">next</span><span class="o">()</span> <span class="o">{</span>
            <span class="k">if</span> <span class="o">(</span><span class="n">i</span> <span class="o">&lt;</span> <span class="n">items</span><span class="o">.</span><span class="na">length</span><span class="o">)</span> <span class="o">{</span>
                <span class="n">i</span><span class="o">++;</span>
            <span class="o">}</span>
        <span class="o">}</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="n">Selector</span> <span class="nf">selector</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="k">new</span> <span class="n">SequenceSelector</span><span class="o">();</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">Sequence</span> <span class="n">sequence</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Sequence</span><span class="o">(</span><span class="n">10</span><span class="o">);</span>
        <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="n">0</span><span class="o">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">10</span><span class="o">;</span> <span class="n">i</span><span class="o">++)</span> <span class="o">{</span>
            <span class="n">sequence</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">Integer</span><span class="o">.</span><span class="na">toString</span><span class="o">(</span><span class="n">i</span><span class="o">));</span>
        <span class="o">}</span>
        <span class="n">Selector</span> <span class="n">selector</span> <span class="o">=</span> <span class="n">sequence</span><span class="o">.</span><span class="na">selector</span><span class="o">();</span>
        <span class="k">while</span> <span class="o">(!</span><span class="n">selector</span><span class="o">.</span><span class="na">end</span><span class="o">())</span> <span class="o">{</span>
            <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">selector</span><span class="o">.</span><span class="na">current</span><span class="o">()</span> <span class="o">+</span> <span class="s">&#34; &#34;</span><span class="o">);</span>
            <span class="n">selector</span><span class="o">.</span><span class="na">next</span><span class="o">();</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></td></tr></table>
</div>
</div><h2 id="3使用this与new">3.使用.this与.new</h2>
<p>如果需要生成对外部类对象的引用，可以使用外部类的名字后面紧跟圆点和<code>this</code>。这样产生的引用自动地具有正确的类型，这一点在编译期酒杯知晓并接受检查，因此没有任何运行时的开销。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">DotThis</span> <span class="o">{</span>
    <span class="kt">void</span> <span class="nf">f</span><span class="o">(){</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;DotThis.f()&#34;</span><span class="o">);</span>
    <span class="o">}</span>
    <span class="kd">public</span> <span class="kd">class</span> <span class="nc">Inner</span><span class="o">{</span>
        <span class="kd">public</span> <span class="n">DotThis</span> <span class="nf">outer</span><span class="o">(){</span>
            <span class="k">return</span> <span class="n">DotThis</span><span class="o">.</span><span class="na">this</span><span class="o">;</span>
        <span class="o">}</span>
    <span class="o">}</span>
    <span class="kd">public</span> <span class="n">Inner</span> <span class="nf">inner</span><span class="o">(){</span>
        <span class="k">return</span> <span class="k">new</span> <span class="n">Inner</span><span class="o">();</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">DotThis</span> <span class="n">dt</span> <span class="o">=</span> <span class="k">new</span> <span class="n">DotThis</span><span class="o">();</span>
        <span class="n">DotThis</span><span class="o">.</span><span class="na">Inner</span> <span class="n">dti</span> <span class="o">=</span> <span class="n">dt</span><span class="o">.</span><span class="na">inner</span><span class="o">();</span>
        <span class="n">dti</span><span class="o">.</span><span class="na">outer</span><span class="o">().</span><span class="na">f</span><span class="o">();</span>
    <span class="o">}</span>

<span class="o">}</span>
<span class="cm">/*
</span><span class="cm">输出DotThis.f()
</span><span class="cm"> */</span>
</code></pre></td></tr></table>
</div>
</div><p>要想直接创建内部类的对象，你不能按照你想象的方式，去引用外部类的名字，而是必须使用外部类的对象来创建内部类对象。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">DotNew</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="kd">class</span> <span class="nc">Inner</span><span class="o">{}</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">DotNew</span> <span class="n">dn</span> <span class="o">=</span> <span class="k">new</span> <span class="n">DotNew</span><span class="o">();</span>
        <span class="n">DotNew</span><span class="o">.</span><span class="na">Inner</span> <span class="n">dni</span> <span class="o">=</span> <span class="n">dn</span><span class="o">.</span><span class="na">new</span> <span class="nf">Inner</span><span class="o">();</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></td></tr></table>
</div>
</div><p>这也解决了内部类名字作用域的问题，因此你不必声明<code>dn.new DotNew.Inner()</code>。</p>
<p><code>.new</code>应用于<code>Parcel</code>示例。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Parcel3</span> <span class="o">{</span>
    <span class="kd">class</span> <span class="nc">Contents</span><span class="o">{</span>
        <span class="kd">private</span> <span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="n">11</span><span class="o">;</span>
        <span class="kd">public</span> <span class="kt">int</span> <span class="nf">value</span><span class="o">(){</span>
            <span class="k">return</span> <span class="n">i</span><span class="o">;</span>
        <span class="o">}</span>
    <span class="o">}</span>
    <span class="kd">class</span> <span class="nc">Destination</span><span class="o">{</span>
        <span class="kd">private</span> <span class="n">String</span> <span class="n">label</span><span class="o">;</span>
        <span class="n">Destination</span><span class="o">(</span><span class="n">String</span> <span class="n">whereTo</span><span class="o">){</span>
            <span class="n">label</span> <span class="o">=</span> <span class="n">whereTo</span><span class="o">;</span>
        <span class="o">}</span>
        <span class="n">String</span> <span class="nf">readLabel</span><span class="o">(){</span>
            <span class="k">return</span> <span class="n">label</span><span class="o">;</span>
        <span class="o">}</span>


    <span class="o">}</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">Parcel3</span> <span class="n">p</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Parcel3</span><span class="o">();</span>
        <span class="n">Parcel3</span><span class="o">.</span><span class="na">Contents</span> <span class="n">c</span> <span class="o">=</span> <span class="n">p</span><span class="o">.</span><span class="na">new</span> <span class="nf">Contents</span><span class="o">();</span>
        <span class="n">Parcel3</span><span class="o">.</span><span class="na">Destination</span> <span class="n">d</span> <span class="o">=</span> <span class="n">p</span><span class="o">.</span><span class="na">new</span> <span class="nf">Destination</span><span class="o">(</span><span class="s">&#34;Tasmania&#34;</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></td></tr></table>
</div>
</div><h2 id="4内部类与向上转型">4.内部类与向上转型</h2>
<p>当将内部类向上转型为其基类，尤其是转型为一个接口的时候，内部类某个接口的实现能够完全不可见，并且不可用。所得到的只是指向基类或接口的引用，所以能够很方便地隐藏实现细节。</p>
<p>创建前一个示例的接口：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="kd">public</span> <span class="kd">interface</span> <span class="nc">Destination</span> <span class="o">{</span>
    <span class="n">String</span> <span class="nf">readLabel</span><span class="o">();</span>
<span class="o">}</span>
<span class="kd">public</span> <span class="kd">interface</span> <span class="nc">Contents</span> <span class="o">{</span>
    <span class="kt">int</span> <span class="nf">value</span><span class="o">();</span>
<span class="o">}</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Parcel4</span> <span class="o">{</span>
    <span class="kd">private</span> <span class="kd">class</span> <span class="nc">PContents</span> <span class="kd">implements</span> <span class="n">Contents</span><span class="o">{</span>
        <span class="kd">private</span> <span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="n">11</span><span class="o">;</span>
        <span class="kd">public</span> <span class="kt">int</span> <span class="nf">value</span><span class="o">()</span> <span class="o">{</span>
            <span class="k">return</span> <span class="n">i</span><span class="o">;</span>
        <span class="o">}</span>
    <span class="o">}</span>
    <span class="kd">protected</span> <span class="kd">class</span> <span class="nc">PDestination</span> <span class="kd">implements</span> <span class="n">Destination</span><span class="o">{</span>
        <span class="kd">private</span> <span class="n">String</span> <span class="n">label</span><span class="o">;</span>

        <span class="kd">private</span> <span class="nf">PDestination</span><span class="o">(</span><span class="n">String</span> <span class="n">whereTo</span><span class="o">){</span>
            <span class="n">label</span> <span class="o">=</span> <span class="n">whereTo</span><span class="o">;</span>
        <span class="o">}</span>

        <span class="kd">public</span> <span class="n">String</span> <span class="nf">readLabel</span><span class="o">()</span> <span class="o">{</span>
            <span class="k">return</span> <span class="n">label</span><span class="o">;</span>
        <span class="o">}</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="n">Destination</span> <span class="nf">destination</span><span class="o">(</span><span class="n">String</span> <span class="n">s</span><span class="o">){</span>
        <span class="k">return</span> <span class="k">new</span> <span class="n">PDestination</span><span class="o">(</span><span class="n">s</span><span class="o">);</span>
    <span class="o">}</span>
    <span class="kd">public</span> <span class="n">Contents</span> <span class="nf">contents</span><span class="o">(){</span>
        <span class="k">return</span> <span class="k">new</span> <span class="n">PContents</span><span class="o">();</span>
    <span class="o">}</span>

<span class="o">}</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">TestParcel</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">Parcel4</span> <span class="n">p</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Parcel4</span><span class="o">();</span>
        <span class="n">Contents</span> <span class="n">c</span> <span class="o">=</span> <span class="n">p</span><span class="o">.</span><span class="na">contents</span><span class="o">();</span>
        <span class="n">Destination</span> <span class="n">d</span> <span class="o">=</span> <span class="n">p</span><span class="o">.</span><span class="na">destination</span><span class="o">(</span><span class="s">&#34;Tasmania&#34;</span><span class="o">);</span>

    <span class="o">}</span>
<span class="o">}</span>
</code></pre></td></tr></table>
</div>
</div><h2 id="5在方法和作用域内的内部类">5.在方法和作用域内的内部类</h2>
<p>到目前为止，看到的都是内部类的典型用途。内部类的语法覆盖了大量其他的更加难以理解的技术。例如，可以在一个方法里面或者任意的作用域内定义内部类。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Parcel5</span> <span class="o">{</span>
    <span class="c1">//PDestination类是destination方法的一部分
</span><span class="c1"></span>    <span class="kd">public</span> <span class="n">Destination</span> <span class="nf">destination</span><span class="o">(</span><span class="n">String</span> <span class="n">s</span><span class="o">)</span> <span class="o">{</span>
        <span class="kd">class</span> <span class="nc">PDestination</span> <span class="kd">implements</span> <span class="n">Destination</span> <span class="o">{</span>
            <span class="kd">private</span> <span class="n">String</span> <span class="n">label</span><span class="o">;</span>

            <span class="kd">public</span> <span class="nf">PDestination</span><span class="o">(</span><span class="n">String</span> <span class="n">whereTo</span><span class="o">)</span> <span class="o">{</span>
                <span class="n">label</span> <span class="o">=</span> <span class="n">whereTo</span><span class="o">;</span>
            <span class="o">}</span>

            <span class="kd">public</span> <span class="n">String</span> <span class="nf">readLabel</span><span class="o">()</span> <span class="o">{</span>
                <span class="k">return</span> <span class="n">label</span><span class="o">;</span>
            <span class="o">}</span>
        <span class="o">}</span>
        <span class="k">return</span> <span class="k">new</span> <span class="n">PDestination</span><span class="o">(</span><span class="s">&#34;Tasmania&#34;</span><span class="o">);</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">Parcel5</span> <span class="n">p</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Parcel5</span><span class="o">();</span>
        <span class="n">Destination</span> <span class="n">d</span> <span class="o">=</span> <span class="n">p</span><span class="o">.</span><span class="na">destination</span><span class="o">(</span><span class="s">&#34;Tasmania&#34;</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></td></tr></table>
</div>
</div><p>下面的例子展示了如何在任意的作用域内嵌套一个内部类</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Parcel6</span> <span class="o">{</span>
    <span class="kd">private</span> <span class="kt">void</span> <span class="nf">internalTracking</span><span class="o">(</span><span class="kt">boolean</span> <span class="n">b</span><span class="o">){</span>
        <span class="k">if</span><span class="o">(</span><span class="n">b</span><span class="o">){</span>
            <span class="kd">class</span> <span class="nc">TrackingSlip</span><span class="o">{</span>
                <span class="kd">private</span> <span class="n">String</span> <span class="n">id</span><span class="o">;</span>
                <span class="n">TrackingSlip</span><span class="o">(</span><span class="n">String</span> <span class="n">s</span><span class="o">){</span>
                    <span class="n">id</span> <span class="o">=</span> <span class="n">s</span><span class="o">;</span>
                <span class="o">}</span>
                <span class="n">String</span> <span class="nf">getSlip</span><span class="o">(){</span>
                    <span class="k">return</span> <span class="n">id</span><span class="o">;</span>
                <span class="o">}</span>
            <span class="o">}</span>
            <span class="n">TrackingSlip</span> <span class="n">ts</span> <span class="o">=</span> <span class="k">new</span> <span class="n">TrackingSlip</span><span class="o">(</span><span class="s">&#34;slip&#34;</span><span class="o">);</span>
            <span class="n">String</span> <span class="n">s</span> <span class="o">=</span> <span class="n">ts</span><span class="o">.</span><span class="na">getSlip</span><span class="o">();</span>
        <span class="o">}</span>
    <span class="o">}</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">track</span><span class="o">(){</span>
        <span class="n">internalTracking</span><span class="o">(</span><span class="kc">true</span><span class="o">);</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">Parcel6</span> <span class="n">p</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Parcel6</span><span class="o">();</span>
        <span class="n">p</span><span class="o">.</span><span class="na">track</span><span class="o">();</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></td></tr></table>
</div>
</div><h2 id="6匿名内部类">6.匿名内部类</h2>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Parcel7</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="n">Contents</span> <span class="nf">contents</span><span class="o">(){</span>
        <span class="k">return</span> <span class="k">new</span> <span class="n">Contents</span><span class="o">()</span> <span class="o">{</span>
            <span class="kd">private</span> <span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="n">11</span><span class="o">;</span>
            <span class="kd">public</span> <span class="kt">int</span> <span class="nf">value</span><span class="o">()</span> <span class="o">{</span>
                <span class="k">return</span> <span class="n">i</span><span class="o">;</span>
            <span class="o">}</span>
        <span class="o">};</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></td></tr></table>
</div>
</div><p>在这个匿名内部类中，使用了默认的构造器来生成一个<code>Contents</code>。下面的代码展示的是，基类需要一个有参数的构造器。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Wrapping</span> <span class="o">{</span>
    <span class="kd">private</span> <span class="kt">int</span> <span class="n">i</span><span class="o">;</span>
    <span class="kd">public</span> <span class="nf">Wrapping</span><span class="o">(</span><span class="kt">int</span> <span class="n">x</span><span class="o">){</span>
        <span class="n">i</span> <span class="o">=</span> <span class="n">x</span><span class="o">;</span>
    <span class="o">}</span>
    <span class="kd">public</span> <span class="kt">int</span> <span class="nf">value</span><span class="o">(){</span>
        <span class="k">return</span> <span class="n">i</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Parcel8</span> <span class="o">{</span>
    <span class="c1">//只需简单地传递合适的参数给基类的构造函数即可
</span><span class="c1"></span>    <span class="kd">public</span> <span class="n">Wrapping</span> <span class="nf">wrapping</span><span class="o">(</span><span class="kt">int</span> <span class="n">x</span><span class="o">){</span>
        <span class="k">return</span> <span class="k">new</span> <span class="n">Wrapping</span><span class="o">(</span><span class="n">x</span><span class="o">){</span>
            <span class="kd">public</span> <span class="kt">int</span> <span class="nf">value</span><span class="o">(){</span>
                <span class="k">return</span> <span class="kd">super</span><span class="o">.</span><span class="na">value</span><span class="o">()*</span><span class="n">47</span><span class="o">;</span>
            <span class="o">}</span>
        <span class="o">};</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">Parcel8</span> <span class="n">p</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Parcel8</span><span class="o">();</span>
        <span class="n">Wrapping</span> <span class="n">w</span> <span class="o">=</span> <span class="n">p</span><span class="o">.</span><span class="na">wrapping</span><span class="o">(</span><span class="n">10</span><span class="o">);</span>
    <span class="o">}</span>

<span class="o">}</span>
</code></pre></td></tr></table>
</div>
</div><p>在匿名类中定义字段时，还能够对其执行初始化操作。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Parcel9</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="n">Destination</span> <span class="nf">destination</span><span class="o">(</span><span class="kd">final</span> <span class="n">String</span> <span class="n">dest</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">return</span> <span class="k">new</span> <span class="n">Destination</span><span class="o">()</span> <span class="o">{</span>
            <span class="kd">private</span> <span class="n">String</span> <span class="n">label</span> <span class="o">=</span> <span class="n">dest</span><span class="o">;</span> <span class="c1">//对字段进行初始化
</span><span class="c1"></span>
            <span class="kd">public</span> <span class="n">String</span> <span class="nf">readLabel</span><span class="o">()</span> <span class="o">{</span>
                <span class="k">return</span> <span class="n">label</span><span class="o">;</span>
            <span class="o">}</span>
        <span class="o">};</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">Parcel9</span> <span class="n">p</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Parcel9</span><span class="o">();</span>
        <span class="n">Destination</span> <span class="n">d</span> <span class="o">=</span> <span class="n">p</span><span class="o">.</span><span class="na">destination</span><span class="o">(</span><span class="s">&#34;Tasmania&#34;</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></td></tr></table>
</div>
</div><p>如果定义一个匿名内部类，并且希望它使用一个在其外部定义的对象，那么编译器会要求其参数引用是<code>final</code>的。</p>
<p>在匿名类中不可能有命名构造器，因为它根本没名字！但通过<code>实例初始化</code>就能够达到为匿名内部类创建一个构造器的效果。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="kd">public</span> <span class="kd">abstract</span> <span class="kd">class</span> <span class="nc">Base</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="nf">Base</span><span class="o">(</span><span class="kt">int</span> <span class="n">i</span><span class="o">){</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;Base constructor.i = &#34;</span><span class="o">+</span><span class="n">i</span><span class="o">);</span>
    <span class="o">}</span>
    <span class="kd">public</span> <span class="kd">abstract</span> <span class="kt">void</span> <span class="nf">f</span><span class="o">();</span>
<span class="o">}</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">AnonymousConstructor</span> <span class="o">{</span>
    <span class="c1">//匿名内部类不可能有构造器,但通过实例初始化,能够达到为匿名内部类创建一个构造器的效果
</span><span class="c1"></span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="n">Base</span> <span class="nf">getBase</span><span class="o">(</span><span class="kt">int</span> <span class="n">i</span><span class="o">){</span>
        <span class="k">return</span> <span class="k">new</span> <span class="n">Base</span><span class="o">(</span><span class="n">i</span><span class="o">)</span> <span class="o">{</span>
            <span class="o">{</span>
                <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;Inside instance initializer&#34;</span><span class="o">);</span>
            <span class="o">}</span>
            <span class="nd">@Override</span>
            <span class="kd">public</span> <span class="kt">void</span> <span class="nf">f</span><span class="o">()</span> <span class="o">{</span>
                <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;In anonymous f()&#34;</span><span class="o">);</span>
            <span class="o">}</span>
        <span class="o">};</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">Base</span> <span class="n">base</span> <span class="o">=</span> <span class="n">getBase</span><span class="o">(</span><span class="n">47</span><span class="o">);</span>
        <span class="n">base</span><span class="o">.</span><span class="na">f</span><span class="o">();</span>
    <span class="o">}</span>
<span class="o">}</span>
<span class="cm">/*
</span><span class="cm">输出
</span><span class="cm">Base constructor.i = 47
</span><span class="cm">Inside instance initializer
</span><span class="cm">In anonymous f()
</span><span class="cm"> */</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="61-再访工厂方法">6.1 再访工厂方法</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span><span class="lnt">53
</span><span class="lnt">54
</span><span class="lnt">55
</span><span class="lnt">56
</span><span class="lnt">57
</span><span class="lnt">58
</span><span class="lnt">59
</span><span class="lnt">60
</span><span class="lnt">61
</span><span class="lnt">62
</span><span class="lnt">63
</span><span class="lnt">64
</span><span class="lnt">65
</span><span class="lnt">66
</span><span class="lnt">67
</span><span class="lnt">68
</span><span class="lnt">69
</span><span class="lnt">70
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="kd">public</span> <span class="kd">interface</span> <span class="nc">Service</span> <span class="o">{</span>
    <span class="kt">void</span> <span class="nf">method1</span><span class="o">();</span>
    <span class="kt">void</span> <span class="nf">method2</span><span class="o">();</span>
<span class="o">}</span>

<span class="kd">public</span> <span class="kd">interface</span> <span class="nc">ServiceFactory</span> <span class="o">{</span>
    <span class="n">Service</span> <span class="nf">getService</span><span class="o">();</span>
<span class="o">}</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Implementation1</span> <span class="kd">implements</span> <span class="n">Service</span> <span class="o">{</span>
    <span class="kd">private</span> <span class="nf">Implementation1</span><span class="o">()</span> <span class="o">{</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">method1</span><span class="o">()</span> <span class="o">{</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;Implementation1 method1&#34;</span><span class="o">);</span>

    <span class="o">}</span>

    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">method2</span><span class="o">()</span> <span class="o">{</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;Implementation1 method2&#34;</span><span class="o">);</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="n">ServiceFactory</span> <span class="n">factory</span> <span class="o">=</span>
            <span class="k">new</span> <span class="n">ServiceFactory</span><span class="o">()</span> <span class="o">{</span>
                <span class="kd">public</span> <span class="n">Service</span> <span class="nf">getService</span><span class="o">()</span> <span class="o">{</span>
                    <span class="k">return</span> <span class="k">new</span> <span class="n">Implementation1</span><span class="o">();</span>
                <span class="o">}</span>
            <span class="o">};</span>
<span class="o">}</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Implementation2</span> <span class="kd">implements</span> <span class="n">Service</span> <span class="o">{</span>
    <span class="kd">private</span> <span class="nf">Implementation2</span><span class="o">()</span> <span class="o">{</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">method1</span><span class="o">()</span> <span class="o">{</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;Implementation2 method1&#34;</span><span class="o">);</span>

    <span class="o">}</span>

    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">method2</span><span class="o">()</span> <span class="o">{</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;Implementation2 method2&#34;</span><span class="o">);</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="n">ServiceFactory</span> <span class="n">factory</span> <span class="o">=</span>
            <span class="k">new</span> <span class="n">ServiceFactory</span><span class="o">()</span> <span class="o">{</span>
                <span class="kd">public</span> <span class="n">Service</span> <span class="nf">getService</span><span class="o">()</span> <span class="o">{</span>
                    <span class="k">return</span> <span class="k">new</span> <span class="n">Implementation2</span><span class="o">();</span>
                <span class="o">}</span>
            <span class="o">};</span>
<span class="o">}</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Factories</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">serviceConsumer</span><span class="o">(</span><span class="n">ServiceFactory</span> <span class="n">factory</span><span class="o">){</span>
        <span class="n">Service</span> <span class="n">s</span> <span class="o">=</span> <span class="n">factory</span><span class="o">.</span><span class="na">getService</span><span class="o">();</span>
        <span class="n">s</span><span class="o">.</span><span class="na">method1</span><span class="o">();</span>
        <span class="n">s</span><span class="o">.</span><span class="na">method2</span><span class="o">();</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">serviceConsumer</span><span class="o">(</span><span class="n">Implementation1</span><span class="o">.</span><span class="na">factory</span><span class="o">);</span>
        <span class="n">serviceConsumer</span><span class="o">(</span><span class="n">Implementation1</span><span class="o">.</span><span class="na">factory</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>
<span class="cm">/*
</span><span class="cm">输出
</span><span class="cm">Implementation1 method1
</span><span class="cm">Implementation1 method2
</span><span class="cm">Implementation1 method1
</span><span class="cm">Implementation1 method2
</span><span class="cm"> */</span>
</code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span><span class="lnt">53
</span><span class="lnt">54
</span><span class="lnt">55
</span><span class="lnt">56
</span><span class="lnt">57
</span><span class="lnt">58
</span><span class="lnt">59
</span><span class="lnt">60
</span><span class="lnt">61
</span><span class="lnt">62
</span><span class="lnt">63
</span><span class="lnt">64
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="kd">public</span> <span class="kd">interface</span> <span class="nc">Game</span> <span class="o">{</span>
    <span class="kt">boolean</span> <span class="nf">move</span><span class="o">();</span>
<span class="o">}</span>

<span class="kd">public</span> <span class="kd">interface</span> <span class="nc">GameFactory</span> <span class="o">{</span>
    <span class="n">Game</span> <span class="nf">getGame</span><span class="o">();</span>
<span class="o">}</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Checkers</span> <span class="kd">implements</span> <span class="n">Game</span> <span class="o">{</span>

    <span class="kd">private</span> <span class="nf">Checkers</span><span class="o">(){}</span>
    <span class="kd">private</span> <span class="kt">int</span> <span class="n">moves</span> <span class="o">=</span> <span class="n">0</span><span class="o">;</span>
    <span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="kt">int</span> <span class="n">MOVES</span> <span class="o">=</span> <span class="n">3</span><span class="o">;</span>
    <span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">move</span><span class="o">()</span> <span class="o">{</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;Checkers move&#34;</span><span class="o">+</span><span class="n">moves</span><span class="o">);</span>
        <span class="k">return</span> <span class="o">++</span><span class="n">moves</span><span class="o">!=</span><span class="n">MOVES</span><span class="o">;</span>
    <span class="o">}</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="n">GameFactory</span> <span class="n">factory</span> <span class="o">=</span> <span class="k">new</span> <span class="n">GameFactory</span><span class="o">()</span> <span class="o">{</span>
        <span class="kd">public</span> <span class="n">Game</span> <span class="nf">getGame</span><span class="o">()</span> <span class="o">{</span>
            <span class="k">return</span> <span class="k">new</span> <span class="n">Checkers</span><span class="o">();</span>
        <span class="o">}</span>
    <span class="o">};</span>

<span class="o">}</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Chess</span> <span class="kd">implements</span> <span class="n">Game</span> <span class="o">{</span>
    <span class="kd">private</span> <span class="nf">Chess</span><span class="o">()</span> <span class="o">{</span>
    <span class="o">}</span>

    <span class="kd">private</span> <span class="kt">int</span> <span class="n">moves</span> <span class="o">=</span> <span class="n">0</span><span class="o">;</span>
    <span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="kt">int</span> <span class="n">MOVES</span> <span class="o">=</span> <span class="n">4</span><span class="o">;</span>

    <span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">move</span><span class="o">()</span> <span class="o">{</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;Chess move &#34;</span> <span class="o">+</span> <span class="n">moves</span><span class="o">);</span>
        <span class="k">return</span> <span class="o">++</span><span class="n">moves</span> <span class="o">!=</span> <span class="n">MOVES</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="n">GameFactory</span> <span class="n">factory</span> <span class="o">=</span> <span class="k">new</span> <span class="n">GameFactory</span><span class="o">()</span> <span class="o">{</span>
        <span class="kd">public</span> <span class="n">Game</span> <span class="nf">getGame</span><span class="o">()</span> <span class="o">{</span>
            <span class="k">return</span> <span class="k">new</span> <span class="n">Chess</span><span class="o">();</span>
        <span class="o">}</span>
    <span class="o">};</span>
<span class="o">}</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Games</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">playGame</span><span class="o">(</span><span class="n">GameFactory</span> <span class="n">factory</span><span class="o">){</span>
        <span class="n">Game</span> <span class="n">s</span> <span class="o">=</span> <span class="n">factory</span><span class="o">.</span><span class="na">getGame</span><span class="o">();</span>
        <span class="k">while</span> <span class="o">(</span><span class="n">s</span><span class="o">.</span><span class="na">move</span><span class="o">());</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">playGame</span><span class="o">(</span><span class="n">Checkers</span><span class="o">.</span><span class="na">factory</span><span class="o">);</span>
        <span class="n">playGame</span><span class="o">(</span><span class="n">Chess</span><span class="o">.</span><span class="na">factory</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>
<span class="cm">/*
</span><span class="cm">输出
</span><span class="cm">Checkers move0
</span><span class="cm">Checkers move1
</span><span class="cm">Checkers move2
</span><span class="cm">Chess move 0
</span><span class="cm">Chess move 1
</span><span class="cm">Chess move 2
</span><span class="cm">Chess move 3
</span><span class="cm"> */</span>
</code></pre></td></tr></table>
</div>
</div><h2 id="7嵌套类">7.嵌套类</h2>
<p>如果不需要内部类与外围类对象之间有联系，那么可以将内部类声明为<code>static</code>，这通常称为<code>嵌套类</code>。普通的内部类对象隐式地保存了一个引用，指向创建它的外围类对象。当内部类是static时，要创建嵌套类的对象，并不需要其外围类的对象。不能从嵌套类的对象中访问非静态的外围类对象。</p>
<p>嵌套类与普通的内部类还有一个区别。普通内部类的字段与方法，只能放在类的外部层次上，所以**普通的内部类不能有static数据和static字段，也不能包含嵌套类。**但嵌套类可以包含所有这些东西。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Parcel11</span> <span class="o">{</span>
    <span class="kd">private</span> <span class="kd">static</span> <span class="kd">class</span> <span class="nc">ParcelContents</span> <span class="kd">implements</span> <span class="n">Contents</span> <span class="o">{</span>
        <span class="kd">private</span> <span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="n">11</span><span class="o">;</span>

        <span class="kd">public</span> <span class="kt">int</span> <span class="nf">value</span><span class="o">()</span> <span class="o">{</span>
            <span class="k">return</span> <span class="n">i</span><span class="o">;</span>
        <span class="o">}</span>
    <span class="o">}</span>

    <span class="kd">protected</span> <span class="kd">static</span> <span class="kd">class</span> <span class="nc">ParcelDestination</span> <span class="kd">implements</span> <span class="n">Destination</span> <span class="o">{</span>
        <span class="kd">private</span> <span class="n">String</span> <span class="n">label</span><span class="o">;</span>

        <span class="kd">private</span> <span class="nf">ParcelDestination</span><span class="o">(</span><span class="n">String</span> <span class="n">whereTo</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">label</span> <span class="o">=</span> <span class="n">whereTo</span><span class="o">;</span>
        <span class="o">}</span>

        <span class="kd">public</span> <span class="n">String</span> <span class="nf">readLabel</span><span class="o">()</span> <span class="o">{</span>
            <span class="k">return</span> <span class="n">label</span><span class="o">;</span>
        <span class="o">}</span>

        <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">f</span><span class="o">()</span> <span class="o">{</span>

        <span class="o">}</span>

        <span class="kd">static</span> <span class="kt">int</span> <span class="n">x</span> <span class="o">=</span> <span class="n">10</span><span class="o">;</span>

        <span class="kd">static</span> <span class="kd">class</span> <span class="nc">AnotherLevel</span> <span class="o">{</span>
            <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">f</span><span class="o">()</span> <span class="o">{</span>

            <span class="o">}</span>

            <span class="kd">static</span> <span class="kt">int</span> <span class="n">x</span> <span class="o">=</span> <span class="n">10</span><span class="o">;</span>
        <span class="o">}</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="n">Destination</span> <span class="nf">destination</span><span class="o">(</span><span class="n">String</span> <span class="n">s</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">return</span> <span class="k">new</span> <span class="n">ParcelDestination</span><span class="o">(</span><span class="n">s</span><span class="o">);</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="n">Contents</span> <span class="nf">contents</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="k">new</span> <span class="n">ParcelContents</span><span class="o">();</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">Contents</span> <span class="n">c</span> <span class="o">=</span> <span class="n">contents</span><span class="o">();</span>
        <span class="n">Destination</span> <span class="n">d</span> <span class="o">=</span> <span class="n">destination</span><span class="o">(</span><span class="s">&#34;Tasmania&#34;</span><span class="o">);</span>
    <span class="o">}</span>

<span class="o">}</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="71-接口内部的类">7.1 接口内部的类</h3>
<p>正常情况下，不能再接口内部放置任何代码，单嵌套类可以作为接口的一部分。你放到接口中的任何类都自动地是<code>public</code>和<code>static</code>的。因为类是<code>static</code>的，只是将嵌套类置于接口的命名空间内，这并不违法接口的规则。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="kd">public</span> <span class="kd">interface</span> <span class="nc">ClassInInterface</span> <span class="o">{</span>
    <span class="kt">void</span> <span class="nf">howdy</span><span class="o">();</span>
    <span class="kd">class</span> <span class="nc">Test</span> <span class="kd">implements</span> <span class="n">ClassInInterface</span><span class="o">{</span>

        <span class="kd">public</span> <span class="kt">void</span> <span class="nf">howdy</span><span class="o">()</span> <span class="o">{</span>
            <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;Howdy!&#34;</span><span class="o">);</span>
        <span class="o">}</span>

        <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
            <span class="k">new</span> <span class="n">Test</span><span class="o">().</span><span class="na">howdy</span><span class="o">();</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span>
<span class="cm">/*
</span><span class="cm">输出
</span><span class="cm">Howdy!
</span><span class="cm">*/</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="72-从多层嵌套类中访问外部类的成员">7.2 从多层嵌套类中访问外部类的成员</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">MNA</span> <span class="o">{</span>
    <span class="kd">private</span> <span class="kt">void</span> <span class="nf">f</span><span class="o">(){}</span>
    <span class="kd">class</span> <span class="nc">A</span><span class="o">{</span>
        <span class="kd">private</span> <span class="kt">void</span> <span class="nf">g</span><span class="o">(){}</span>
        <span class="kd">public</span> <span class="kd">class</span> <span class="nc">B</span><span class="o">{</span>
            <span class="kt">void</span> <span class="nf">h</span><span class="o">(){</span>
                <span class="n">g</span><span class="o">();</span>
                <span class="n">f</span><span class="o">();</span>
            <span class="o">}</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">MultiNestingAccess</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">){</span>
        <span class="n">MNA</span> <span class="n">mna</span> <span class="o">=</span> <span class="k">new</span> <span class="n">MNA</span><span class="o">();</span>
        <span class="n">MNA</span><span class="o">.</span><span class="na">A</span> <span class="n">mnaa</span> <span class="o">=</span> <span class="n">mna</span><span class="o">.</span><span class="na">new</span> <span class="nf">A</span><span class="o">();</span>
        <span class="n">MNA</span><span class="o">.</span><span class="na">A</span><span class="o">.</span><span class="na">B</span> <span class="n">mnaab</span> <span class="o">=</span> <span class="n">mnaa</span><span class="o">.</span><span class="na">new</span> <span class="nf">B</span><span class="o">();</span>
        <span class="n">mnaab</span><span class="o">.</span><span class="na">h</span><span class="o">();</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></td></tr></table>
</div>
</div><h2 id="8为什么需要内部类">8.为什么需要内部类</h2>
<p>每个内部类都能独立地集成自一个接口的实现，所以无论外围类是否已经集成了某个接口的实现，对于内部类都没有影响。</p>
<p>如果没有内部类提供的、可以继承多个具体的或抽象的类的能力，一些设计与编程问题就很难解决。从这个角度看，**内部类使得多重继承的解决方案变得完整。接口解决了部分问题，而内部类有效地实现了“多重继承”。**也就是说内部类允许继承多个非接口类型（类或抽象类）。</p>
<p>必须在一个类中以某种方式实现两个接口。由于接口的灵活性，你又两种选择：使用单一类，或者使用内部类。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="kd">public</span> <span class="kd">interface</span> <span class="nc">A</span> <span class="o">{}</span>
<span class="kd">public</span> <span class="kd">interface</span> <span class="nc">B</span> <span class="o">{}</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">X</span> <span class="kd">implements</span> <span class="n">A</span><span class="o">,</span><span class="n">B</span> <span class="o">{}</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Y</span> <span class="kd">implements</span> <span class="n">A</span> <span class="o">{</span>
    <span class="n">B</span> <span class="nf">makeB</span><span class="o">(){</span>
        <span class="k">return</span> <span class="k">new</span> <span class="n">B</span><span class="o">(){};</span>
    <span class="o">}</span>
<span class="o">}</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">MultiInterfaces</span> <span class="o">{</span>
    <span class="kd">static</span> <span class="kt">void</span> <span class="nf">taskA</span><span class="o">(</span><span class="n">A</span> <span class="n">a</span><span class="o">){}</span>
    <span class="kd">static</span> <span class="kt">void</span> <span class="nf">taskB</span><span class="o">(</span><span class="n">B</span> <span class="n">b</span><span class="o">){}</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">X</span> <span class="n">x</span> <span class="o">=</span> <span class="k">new</span> <span class="n">X</span><span class="o">();</span>
        <span class="n">Y</span> <span class="n">y</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Y</span><span class="o">();</span>
        <span class="n">taskA</span><span class="o">(</span><span class="n">x</span><span class="o">);</span>
        <span class="n">taskA</span><span class="o">(</span><span class="n">y</span><span class="o">);</span>
        <span class="n">taskB</span><span class="o">(</span><span class="n">x</span><span class="o">);</span>
        <span class="n">taskB</span><span class="o">(</span><span class="n">y</span><span class="o">.</span><span class="na">makeB</span><span class="o">());</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></td></tr></table>
</div>
</div><p>如果拥有的是抽象的类或具体的类，而不是接口，那就只能使用内部类才能实现多重继承。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">D</span> <span class="o">{}</span>
<span class="kd">public</span> <span class="kd">abstract</span> <span class="kd">class</span> <span class="nc">E</span> <span class="o">{}</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Z</span> <span class="kd">extends</span> <span class="n">D</span><span class="o">{</span>
    <span class="n">E</span> <span class="nf">makeE</span><span class="o">(){</span>
        <span class="k">return</span> <span class="k">new</span> <span class="n">E</span><span class="o">()</span> <span class="o">{};</span>
    <span class="o">}</span>
<span class="o">}</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">MultiImplementation</span> <span class="o">{</span>
    <span class="kd">static</span> <span class="kt">void</span> <span class="nf">tasksD</span><span class="o">(</span><span class="n">D</span> <span class="n">d</span><span class="o">){}</span>
    <span class="kd">static</span> <span class="kt">void</span> <span class="nf">tasksE</span><span class="o">(</span><span class="n">E</span> <span class="n">e</span><span class="o">){}</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">Z</span> <span class="n">z</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Z</span><span class="o">();</span>
        <span class="n">tasksD</span><span class="o">(</span><span class="n">z</span><span class="o">);</span>
        <span class="n">tasksE</span><span class="o">(</span><span class="n">z</span><span class="o">.</span><span class="na">makeE</span><span class="o">());</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="81-闭包与回调">8.1 闭包与回调</h3>
<p>**闭包（closure）**是一个可调用的对象，它记录了一些信息，这些信息来自创建它的作用域。通过这个定义，可以看出内部类是面向对象的闭包，因为它不仅包含外围类对象的信息，还自动拥有一个指向外围类对象的引用，在此作用域内，内部类有权操作所有的成员，包括<code>private</code>成员。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span><span class="lnt">53
</span><span class="lnt">54
</span><span class="lnt">55
</span><span class="lnt">56
</span><span class="lnt">57
</span><span class="lnt">58
</span><span class="lnt">59
</span><span class="lnt">60
</span><span class="lnt">61
</span><span class="lnt">62
</span><span class="lnt">63
</span><span class="lnt">64
</span><span class="lnt">65
</span><span class="lnt">66
</span><span class="lnt">67
</span><span class="lnt">68
</span><span class="lnt">69
</span><span class="lnt">70
</span><span class="lnt">71
</span><span class="lnt">72
</span><span class="lnt">73
</span><span class="lnt">74
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="kd">public</span> <span class="kd">interface</span> <span class="nc">Incrementable</span> <span class="o">{</span>
    <span class="kt">void</span> <span class="nf">increment</span><span class="o">();</span>
<span class="o">}</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Callee1</span> <span class="kd">implements</span> <span class="n">Incrementable</span> <span class="o">{</span>

    <span class="kd">private</span> <span class="kt">int</span> <span class="n">i</span> <span class="o">=</span><span class="n">0</span><span class="o">;</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">increment</span><span class="o">()</span> <span class="o">{</span>
        <span class="n">i</span><span class="o">++;</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">i</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">MyIncrement</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">increment</span><span class="o">()</span> <span class="o">{</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;Other operation&#34;</span><span class="o">);</span>
    <span class="o">}</span>

    <span class="kd">static</span> <span class="kt">void</span> <span class="nf">f</span><span class="o">(</span><span class="n">MyIncrement</span> <span class="n">mi</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">mi</span><span class="o">.</span><span class="na">increment</span><span class="o">();</span>
    <span class="o">}</span>
<span class="o">}</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Callee2</span> <span class="kd">extends</span> <span class="n">MyIncrement</span> <span class="o">{</span>

    <span class="kd">private</span> <span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="n">0</span><span class="o">;</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">increment</span><span class="o">()</span> <span class="o">{</span>
        <span class="kd">super</span><span class="o">.</span><span class="na">increment</span><span class="o">();</span>
        <span class="n">i</span><span class="o">++;</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">i</span><span class="o">);</span>
    <span class="o">}</span>

    <span class="kd">private</span> <span class="kd">class</span> <span class="nc">Closure</span> <span class="kd">implements</span> <span class="n">Incrementable</span> <span class="o">{</span>
        <span class="kd">public</span> <span class="kt">void</span> <span class="nf">increment</span><span class="o">()</span> <span class="o">{</span>
            <span class="n">Callee2</span><span class="o">.</span><span class="na">this</span><span class="o">.</span><span class="na">increment</span><span class="o">();</span>
        <span class="o">}</span>
    <span class="o">}</span>

    <span class="n">Incrementable</span> <span class="nf">getCallbackReference</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="k">new</span> <span class="n">Closure</span><span class="o">();</span>
    <span class="o">}</span>
<span class="o">}</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Caller</span> <span class="o">{</span>
    <span class="kd">private</span> <span class="n">Incrementable</span> <span class="n">callbackReference</span><span class="o">;</span>
    <span class="n">Caller</span><span class="o">(</span><span class="n">Incrementable</span> <span class="n">cbh</span><span class="o">){</span>
        <span class="n">callbackReference</span> <span class="o">=</span> <span class="n">cbh</span><span class="o">;</span>
    <span class="o">}</span>
    <span class="kt">void</span> <span class="nf">go</span><span class="o">(){</span>
        <span class="n">callbackReference</span><span class="o">.</span><span class="na">increment</span><span class="o">();</span>
    <span class="o">}</span>
<span class="o">}</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Callbacks</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">Callee1</span> <span class="n">c1</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Callee1</span><span class="o">();</span>
        <span class="n">Callee2</span> <span class="n">c2</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Callee2</span><span class="o">();</span>
        <span class="n">MyIncrement</span><span class="o">.</span><span class="na">f</span><span class="o">(</span><span class="n">c2</span><span class="o">);</span>
        <span class="n">Caller</span> <span class="n">caller1</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Caller</span><span class="o">(</span><span class="n">c1</span><span class="o">);</span>
        <span class="n">Caller</span> <span class="n">caller2</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Caller</span><span class="o">(</span><span class="n">c2</span><span class="o">.</span><span class="na">getCallbackReference</span><span class="o">());</span>
        <span class="n">caller1</span><span class="o">.</span><span class="na">go</span><span class="o">();</span>
        <span class="n">caller1</span><span class="o">.</span><span class="na">go</span><span class="o">();</span>
        <span class="n">caller2</span><span class="o">.</span><span class="na">go</span><span class="o">();</span>
        <span class="n">caller2</span><span class="o">.</span><span class="na">go</span><span class="o">();</span>
    <span class="o">}</span>
<span class="o">}</span>
<span class="cm">/*
</span><span class="cm">输出
</span><span class="cm">Other operation
</span><span class="cm">1
</span><span class="cm">1
</span><span class="cm">2
</span><span class="cm">Other operation
</span><span class="cm">2
</span><span class="cm">Other operation
</span><span class="cm">3
</span><span class="cm"> */</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="82-内部类与控制框架">8.2 内部类与控制框架</h3>
<h2 id="9内部类的集成">9.内部类的集成</h2>
<p>创建构造器，不能只是传递一个指向外围类对象的引用。必须在构造器内部使用如下语法。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="n">enclosingClassReference</span><span class="o">.</span><span class="na">super</span><span class="o">();</span>
</code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">WithInner</span> <span class="o">{</span>
    <span class="kd">class</span> <span class="nc">Inner</span><span class="o">{}</span>
<span class="o">}</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">InheritInner</span> <span class="kd">extends</span> <span class="n">WithInner</span><span class="o">.</span><span class="na">Inner</span> <span class="o">{</span>
    <span class="n">InheritInner</span><span class="o">(</span><span class="n">WithInner</span> <span class="n">wi</span><span class="o">){</span>
        <span class="n">wi</span><span class="o">.</span><span class="na">super</span><span class="o">();</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></td></tr></table>
</div>
</div><h2 id="10内部类可以被覆盖吗">10.内部类可以被覆盖吗</h2>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Egg</span> <span class="o">{</span>
    <span class="kd">private</span> <span class="n">Yolk</span> <span class="n">y</span><span class="o">;</span>
    <span class="kd">protected</span> <span class="kd">class</span> <span class="nc">Yolk</span><span class="o">{</span>
        <span class="kd">public</span> <span class="nf">Yolk</span><span class="o">(){</span>
            <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;Egg.Yolk()&#34;</span><span class="o">);</span>
        <span class="o">}</span>
    <span class="o">}</span>
    <span class="kd">public</span> <span class="nf">Egg</span><span class="o">(){</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;New Egg()&#34;</span><span class="o">);</span>
        <span class="n">y</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Yolk</span><span class="o">();</span>
    <span class="o">}</span>
<span class="o">}</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">BigEgg</span> <span class="kd">extends</span> <span class="n">Egg</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="kd">class</span> <span class="nc">Yolk</span><span class="o">{</span>
        <span class="kd">public</span> <span class="nf">Yolk</span><span class="o">(){</span>
            <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;BigEgg.Yolk()&#34;</span><span class="o">);</span>
        <span class="o">}</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">new</span> <span class="n">BigEgg</span><span class="o">();</span>
    <span class="o">}</span>
<span class="o">}</span>
<span class="cm">/*
</span><span class="cm">New Egg()
</span><span class="cm">Egg.Yolk()
</span><span class="cm"> */</span>
</code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Egg2</span> <span class="o">{</span>
    <span class="kd">protected</span> <span class="kd">class</span> <span class="nc">Yolk</span><span class="o">{</span>
        <span class="kd">public</span> <span class="nf">Yolk</span><span class="o">(){</span>
            <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;Egg2.Yolk()&#34;</span><span class="o">);</span>
        <span class="o">}</span>
        <span class="kd">public</span> <span class="kt">void</span> <span class="nf">f</span><span class="o">(){</span>
            <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;Egg2.Yolk.f()&#34;</span><span class="o">);</span>
        <span class="o">}</span>
    <span class="o">}</span>
    <span class="kd">private</span> <span class="n">Yolk</span> <span class="n">y</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Yolk</span><span class="o">();</span>
    <span class="kd">public</span> <span class="nf">Egg2</span><span class="o">(){</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;new Egg2()&#34;</span><span class="o">);</span>
    <span class="o">}</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">insertYolk</span><span class="o">(</span><span class="n">Yolk</span> <span class="n">yy</span><span class="o">){</span>
        <span class="n">y</span> <span class="o">=</span> <span class="n">yy</span><span class="o">;</span>
    <span class="o">}</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">g</span><span class="o">(){</span>
        <span class="n">y</span><span class="o">.</span><span class="na">f</span><span class="o">();</span>
    <span class="o">}</span>

<span class="o">}</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">BigEgg2</span> <span class="kd">extends</span> <span class="n">Egg2</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="kd">class</span> <span class="nc">Yolk</span> <span class="kd">extends</span> <span class="n">Egg2</span><span class="o">.</span><span class="na">Yolk</span> <span class="o">{</span>
        <span class="kd">public</span> <span class="nf">Yolk</span><span class="o">()</span> <span class="o">{</span>
            <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;BigEgg2.Yolk()&#34;</span><span class="o">);</span>
        <span class="o">}</span>

        <span class="nd">@Override</span>
        <span class="kd">public</span> <span class="kt">void</span> <span class="nf">f</span><span class="o">()</span> <span class="o">{</span>
            <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;BigEgg2.Yolk.f()&#34;</span><span class="o">);</span>
        <span class="o">}</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="nf">BigEgg2</span><span class="o">()</span> <span class="o">{</span>
        <span class="n">insertYolk</span><span class="o">(</span><span class="k">new</span> <span class="n">Yolk</span><span class="o">());</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">Egg2</span> <span class="n">e2</span> <span class="o">=</span> <span class="k">new</span> <span class="n">BigEgg2</span><span class="o">();</span>
        <span class="n">e2</span><span class="o">.</span><span class="na">g</span><span class="o">();</span>
    <span class="o">}</span>

<span class="o">}</span>
<span class="cm">/*
</span><span class="cm">输出
</span><span class="cm">Egg2.Yolk()
</span><span class="cm">new Egg2()
</span><span class="cm">Egg2.Yolk()
</span><span class="cm">BigEgg2.Yolk()
</span><span class="cm">BigEgg2.Yolk.f()
</span><span class="cm"> */</span>
</code></pre></td></tr></table>
</div>
</div><h2 id="11局部内部类">11.局部内部类</h2>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span><span class="lnt">53
</span><span class="lnt">54
</span><span class="lnt">55
</span><span class="lnt">56
</span><span class="lnt">57
</span><span class="lnt">58
</span><span class="lnt">59
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="kd">public</span> <span class="kd">interface</span> <span class="nc">Counter</span> <span class="o">{</span>
    <span class="kt">int</span> <span class="nf">next</span><span class="o">();</span>
<span class="o">}</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">LocalInnserClass</span> <span class="o">{</span>
    <span class="kd">private</span> <span class="kt">int</span> <span class="n">count</span><span class="o">;</span>

    <span class="n">Counter</span> <span class="nf">getCounter</span><span class="o">(</span><span class="kd">final</span> <span class="n">String</span> <span class="n">name</span><span class="o">)</span> <span class="o">{</span>
        <span class="kd">class</span> <span class="nc">LocalCounter</span> <span class="kd">implements</span> <span class="n">Counter</span> <span class="o">{</span>
            <span class="kd">public</span> <span class="nf">LocalCounter</span><span class="o">()</span> <span class="o">{</span>
                <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;LocalCounter()&#34;</span><span class="o">);</span>
            <span class="o">}</span>

            <span class="kd">public</span> <span class="kt">int</span> <span class="nf">next</span><span class="o">()</span> <span class="o">{</span>
                <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">print</span><span class="o">(</span><span class="n">name</span><span class="o">);</span>
                <span class="k">return</span> <span class="n">count</span><span class="o">++;</span>
            <span class="o">}</span>
        <span class="o">}</span>
        <span class="k">return</span> <span class="k">new</span> <span class="n">LocalCounter</span><span class="o">();</span>
    <span class="o">}</span>

    <span class="n">Counter</span> <span class="nf">getCounter2</span><span class="o">(</span><span class="kd">final</span> <span class="n">String</span> <span class="n">name</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">return</span> <span class="k">new</span> <span class="n">Counter</span><span class="o">()</span> <span class="o">{</span>
            <span class="o">{</span>
                <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;Counter&#34;</span><span class="o">);</span>
            <span class="o">}</span>

            <span class="kd">public</span> <span class="kt">int</span> <span class="nf">next</span><span class="o">()</span> <span class="o">{</span>
                <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">print</span><span class="o">(</span><span class="n">name</span><span class="o">);</span>
                <span class="k">return</span> <span class="n">count</span><span class="o">++;</span>
            <span class="o">}</span>
        <span class="o">};</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">LocalInnserClass</span> <span class="n">lic</span> <span class="o">=</span> <span class="k">new</span> <span class="n">LocalInnserClass</span><span class="o">();</span>
        <span class="n">Counter</span> <span class="n">c1</span> <span class="o">=</span> <span class="n">lic</span><span class="o">.</span><span class="na">getCounter</span><span class="o">(</span><span class="s">&#34;Local innser&#34;</span><span class="o">),</span>
                <span class="n">c2</span> <span class="o">=</span> <span class="n">lic</span><span class="o">.</span><span class="na">getCounter2</span><span class="o">(</span><span class="s">&#34;Anonymous inner&#34;</span><span class="o">);</span>
        <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="n">0</span><span class="o">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">5</span><span class="o">;</span> <span class="n">i</span><span class="o">++)</span> <span class="o">{</span>
            <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">c1</span><span class="o">.</span><span class="na">next</span><span class="o">());</span>
        <span class="o">}</span>
        <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="n">0</span><span class="o">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">5</span><span class="o">;</span> <span class="n">i</span><span class="o">++)</span> <span class="o">{</span>
            <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">c2</span><span class="o">.</span><span class="na">next</span><span class="o">());</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span>
<span class="cm">/*
</span><span class="cm">LocalCounter()
</span><span class="cm">Counter
</span><span class="cm">Local innser0
</span><span class="cm">Local innser1
</span><span class="cm">Local innser2
</span><span class="cm">Local innser3
</span><span class="cm">Local innser4
</span><span class="cm">Anonymous inner5
</span><span class="cm">Anonymous inner6
</span><span class="cm">Anonymous inner7
</span><span class="cm">Anonymous inner8
</span><span class="cm">Anonymous inner9
</span><span class="cm"> */</span>
</code></pre></td></tr></table>
</div>
</div><h2 id="12内部类标识符">12.内部类标识符</h2>
<p>每个类都会产生一个<code>.class</code>文件，其中包含了如何创建该类型的对象的全部信息。内部类也必须生成一个<code>.class</code>文件以包含它们的Class对象信息。这些类文件的命名有严格的规则：外围类的名字，加上<code>$</code>,再加上内部类的名字。例如，<code>LocalInnerClass.java</code>生成的<code>.class</code>文件包括：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-text" data-lang="text">Counter.class
LocalInnerClass$1.class
LocalInnerClass$1LocalCounter.class
LocalInnserClass.class
</code></pre></td></tr></table>
</div>
</div><p>如果内部类是匿名的，编译器会简单地产生一个数字作为其标识符。如果内部类是嵌套在别的内部类之中，只需直接将它们的名字加载其外围类标识符与<code>$</code>的后面。</p>
<h2 id="参考">参考</h2>
<ul>
<li>Java编程思想</li>
</ul>

    </div>

    <div class="post-copyright">
  <p class="copyright-item">
    <span class="item-title">文章作者</span>
    <span class="item-content">malinkang</span>
  </p>
  <p class="copyright-item">
    <span class="item-title">上次更新</span>
    <span class="item-content">
        2013-05-14
        
    </span>
  </p>
  
  
</div>
<footer class="post-footer">
      <div class="post-tags">
          <a href="/tags/thinking-in-java/">Thinking in Java</a>
          </div>
      <nav class="post-nav">
        <a class="prev" href="/post/thinking-in-java-holding-your-objects/">
            <i class="iconfont icon-left"></i>
            <span class="prev-text nav-default">《Java编程思想》第11章持有对象</span>
            <span class="prev-text nav-mobile">上一篇</span>
          </a>
        <a class="next" href="/post/thinking-in-java-interfaces/">
            <span class="next-text nav-default">《Java编程思想》第9章接口</span>
            <span class="next-text nav-mobile">下一篇</span>
            <i class="iconfont icon-right"></i>
          </a>
      </nav>
    </footer>
  </article>
        </div>
        <div id="disqus_thread"></div>
    <script type="text/javascript">
    (function() {
      
      
      if (window.location.hostname === 'localhost') return;

      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      var disqus_shortname = 'malinkang-cn';
      dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
    </script>
    <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>

  

  

      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="social-links">
      <a href="https://twitter.com/malinkang" class="iconfont icon-twitter" title="twitter"></a>
      <a href="https://github.com/malinkang" class="iconfont icon-github" title="github"></a>
      <a href="https://weibo.com/malinkang" class="iconfont icon-weibo" title="weibo"></a>
  <a href="https://malinkang.cn/index.xml" type="application/rss+xml" class="iconfont icon-rss" title="rss"></a>
</div>

<div class="copyright">
  <span class="power-by">
    由 <a class="hexo-link" href="https://gohugo.io">Hugo</a> 强力驱动
  </span>
  <span class="division">|</span>
  <span class="theme-info">
    主题 - 
    <a class="theme-link" href="https://github.com/olOwOlo/hugo-theme-even">Even</a>
  </span>

  

  <span class="copyright-year">
    &copy; 
    2017 - 
    2021
    <span class="heart">
      <i class="iconfont icon-heart"></i>
    </span>
    <span class="author">malinkang</span>
  </span>
</div>
    </footer>

    <div class="back-to-top" id="back-to-top">
      <i class="iconfont icon-up"></i>
    </div>
  </div>
  
  <script src="https://cdn.jsdelivr.net/npm/jquery@3.2.1/dist/jquery.min.js" integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/slideout@1.0.1/dist/slideout.min.js" integrity="sha256-t+zJ/g8/KXIJMjSVQdnibt4dlaDxc9zXr/9oNPeWqdg=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.1.20/dist/jquery.fancybox.min.js" integrity="sha256-XVLffZaxoWfGUEbdzuLi7pwaUJv1cecsQJQqGLe7axY=" crossorigin="anonymous"></script>



<script type="text/javascript" src="/js/main.min.d7b7ada643c9c1a983026e177f141f7363b4640d619caf01d8831a6718cd44ea.js"></script>
  <script type="text/javascript">
    window.MathJax = {
      showProcessingMessages: false,
      messageStyle: 'none'
    };
  </script>
  <script async src="https://cdn.jsdelivr.net/npm/mathjax@2.7.5/MathJax.js?config=TeX-MML-AM_CHTML"  integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>








</body>
</html>
