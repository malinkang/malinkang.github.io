<!DOCTYPE html>
<html><head>
<title>Android Canvas</title>

<meta charset="utf-8">
<meta name="X-UA-Compatible" content="IE=edge">
<meta name="google-site-verification" content="">
<meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport">
<meta content="telephone=no" name="format-detection">
<meta name="description" content="">
<meta name="renderer" content="webkit">
<meta name="theme-color" content="#ffffff">




<script src="/vendor/js/jquery.min.js" ></script>
<script src="/vendor/js/popper.min.js" ></script>
<script src="/vendor/js/bootstrap.min.js" ></script>
<script src="/vendor/js/smooth-scroll.polyfills.min.js" ></script>
<link type="text/css" rel="stylesheet" href="/vendor/css/bootstrap.min.css">
<script src="/vendor/js/vue.min.js" ></script>




<link rel="stylesheet" href="https://malinkang.cn/scss/journal.min.56b67b8b01d7cd1015ed14414fd2fc33ebfb2e8413dcbc47c5cd734544c92cd7.css" integrity="sha256-VrZ7iwHXzRAV7RRBT9L8M&#43;v7LoQT3LxHxc1zRUTJLNc=" media="screen">



<link rel="stylesheet" href="https://malinkang.cn/scss/dark-mode.min.5a2bbd1758c83affd639a91fbfd5cc681b1a5574df99442825c444dd40504b13.css" integrity="sha256-Wiu9F1jIOv/WOakfv9XMaBsaVXTfmUQoJcRE3UBQSxM=" media="screen">


<script src="https://malinkang.cn//js/loadCSS.js"></script>
<script>
  loadCSS("https://fonts.googleapis.com/css?family=Lora|Montserrat|Fira+Mono|Noto+Serif+SC|Material+Icons");
</script>

<script src="https://malinkang.cn//js/table.js"></script>




<script src="https://malinkang.cn//js/toc.js"></script>



<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.css">
<script src="https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.min.js"></script>
<script src="/vendor/js/md5.min.js"></script>
<script>
  var gitalk = new Gitalk({
  clientID: 'd84786eae9edb9e6521b',
  clientSecret: 'a30a17b679a15e85b8f257eec4231d5b286e1b58',
  repo: 'malinkang.github.io',
  owner: 'malinkang',
  admin: ['malinkang'],
  id: md5(location.pathname),
  distractionFreeMode: 'false'
  });
  window.onload = function () {
        gitalk.render('gitalk-container')
  }
</script>






</head><body>
    	<div id="app"><div ref="sideContainer" class="side-container">
    
    <a class="a-block nav-head false" href="https://malinkang.cn/">
    
        <div class="nav-title">
            Malinkang‘s Blog
        </div>
        
        <div class="nav-subtitle">
            人生最可悲的事情，莫过于胸怀大志，却又虚度光阴。
        </div>
        
    </a>

    <div class="nav-link-list">
        
        
            
            
            
                
            
            
            
            <a class="a-block nav-link-item active" href="/posts">
                Archive
            </a>
            
        
            
            
            
            
            
            <a class="a-block nav-link-item false" href="https://android.malinkang.cn">
                Android笔记
            </a>
            
        
            
            
            
            
            
            <a class="a-block nav-link-item false" href="https://kotlin.malinkang.cn">
                Kotlin笔记
            </a>
            
        
            
            
            
            
            
            <a class="a-block nav-link-item false" href="/index.xml">
                RSS Feed
            </a>
            
        
    </div>

    

    <div class="nav-footer">
        
Hugo Theme <a href="https://github.com/amazingrise/hugo-theme-diary">Diary</a> by <a href="https://amazingrise.net">Rise</a>
<br>
Ported from <a href="https://mak1t0.cc/" target="_blank" rel="noreferrer noopener">Makito</a>'s <a href="https://github.com/SumiMakito/hexo-theme-journal/" target="_blank" rel="noreferrer noopener">Journal.</a> <br>
<br>

&copy;
	
	This is a customized copyright.
	
    </div>
    
</div><div ref="extraContainer" class="extra-container">
    
    
    <div class="toc animated-visibility" :class="{ invisible: scrollY <= 140 }">


	<div class="toc-content">
	
		
		
		
		<center>- CATALOG -</center>
			
				
				
					
						
						
							<ul>
						
							<ul>
						
							<ul>
						
						
								<li>
				 					<a href="#%e7%bb%98%e5%88%b6%e9%a2%9c%e8%89%b2" v-on:click="closeDrawer" id="绘制颜色-nav">
										 绘制颜色
									</a>
								</li>
						
							</ul>
						
							</ul>
						
							</ul>
						
					
				
			
				
				
					
						
						
							<ul>
						
							<ul>
						
							<ul>
						
						
								<li>
				 					<a href="#%e7%bb%98%e5%88%b6%e5%9f%ba%e6%9c%ac%e5%bd%a2%e7%8a%b6" v-on:click="closeDrawer" id="绘制基本形状-nav">
										 绘制基本形状
									</a>
								</li>
						
							</ul>
						
							</ul>
						
							</ul>
						
					
				
			
				
				
					
						
						
							<ul>
						
							<ul>
						
							<ul>
						
							<ul>
						
						
								<li>
				 					<a href="#%e7%bb%98%e5%88%b6%e7%82%b9" v-on:click="closeDrawer" id="绘制点-nav">
										 绘制点
									</a>
								</li>
						
							</ul>
						
							</ul>
						
							</ul>
						
							</ul>
						
					
				
			
				
				
					
						
						
							<ul>
						
							<ul>
						
							<ul>
						
							<ul>
						
						
								<li>
				 					<a href="#%e7%bb%98%e5%88%b6%e7%9b%b4%e7%ba%bf" v-on:click="closeDrawer" id="绘制直线-nav">
										 绘制直线
									</a>
								</li>
						
							</ul>
						
							</ul>
						
							</ul>
						
							</ul>
						
					
				
			
				
				
					
						
						
							<ul>
						
							<ul>
						
							<ul>
						
							<ul>
						
						
								<li>
				 					<a href="#%e7%bb%98%e5%88%b6%e7%9f%a9%e5%bd%a2" v-on:click="closeDrawer" id="绘制矩形-nav">
										 绘制矩形
									</a>
								</li>
						
							</ul>
						
							</ul>
						
							</ul>
						
							</ul>
						
					
				
			
				
				
					
						
						
							<ul>
						
							<ul>
						
							<ul>
						
							<ul>
						
						
								<li>
				 					<a href="#%e7%bb%98%e5%88%b6%e5%9c%86%e8%a7%92%e7%9f%a9%e5%bd%a2" v-on:click="closeDrawer" id="绘制圆角矩形-nav">
										 绘制圆角矩形
									</a>
								</li>
						
							</ul>
						
							</ul>
						
							</ul>
						
							</ul>
						
					
				
			
				
				
					
						
						
							<ul>
						
							<ul>
						
							<ul>
						
							<ul>
						
						
								<li>
				 					<a href="#%e7%bb%98%e5%88%b6%e6%a4%ad%e5%9c%86" v-on:click="closeDrawer" id="绘制椭圆-nav">
										 绘制椭圆
									</a>
								</li>
						
							</ul>
						
							</ul>
						
							</ul>
						
							</ul>
						
					
				
			
				
				
					
						
						
							<ul>
						
							<ul>
						
							<ul>
						
							<ul>
						
						
								<li>
				 					<a href="#%e7%bb%98%e5%88%b6%e5%9c%86" v-on:click="closeDrawer" id="绘制圆-nav">
										 绘制圆
									</a>
								</li>
						
							</ul>
						
							</ul>
						
							</ul>
						
							</ul>
						
					
				
			
				
				
					
						
						
							<ul>
						
							<ul>
						
							<ul>
						
							<ul>
						
						
								<li>
				 					<a href="#%e7%bb%98%e5%88%b6%e5%9c%86%e5%bc%a7" v-on:click="closeDrawer" id="绘制圆弧-nav">
										 绘制圆弧
									</a>
								</li>
						
							</ul>
						
							</ul>
						
							</ul>
						
							</ul>
						
					
				
			
				
				
					
						
						
							<ul>
						
							<ul>
						
							<ul>
						
						
								<li>
				 					<a href="#%e7%94%bb%e5%b8%83%e6%93%8d%e4%bd%9c" v-on:click="closeDrawer" id="画布操作-nav">
										 画布操作
									</a>
								</li>
						
							</ul>
						
							</ul>
						
							</ul>
						
					
				
			
				
				
					
						
						
							<ul>
						
							<ul>
						
							<ul>
						
							<ul>
						
						
								<li>
				 					<a href="#%e4%bd%8d%e7%a7%bbtranslate" v-on:click="closeDrawer" id="位移translate-nav">
										 位移（translate）
									</a>
								</li>
						
							</ul>
						
							</ul>
						
							</ul>
						
							</ul>
						
					
				
			
				
				
					
						
						
							<ul>
						
							<ul>
						
							<ul>
						
							<ul>
						
						
								<li>
				 					<a href="#%e7%bc%a9%e6%94%bescale" v-on:click="closeDrawer" id="缩放scale-nav">
										 缩放（scale）
									</a>
								</li>
						
							</ul>
						
							</ul>
						
							</ul>
						
							</ul>
						
					
				
			
				
				
					
						
						
							<ul>
						
							<ul>
						
							<ul>
						
							<ul>
						
						
								<li>
				 					<a href="#%e6%97%8b%e8%bd%acrotate" v-on:click="closeDrawer" id="旋转rotate-nav">
										 旋转（rotate）
									</a>
								</li>
						
							</ul>
						
							</ul>
						
							</ul>
						
							</ul>
						
					
				
			
				
				
					
						
						
							<ul>
						
							<ul>
						
							<ul>
						
							<ul>
						
						
								<li>
				 					<a href="#%e9%94%99%e5%88%87skew" v-on:click="closeDrawer" id="错切skew-nav">
										 错切（skew）
									</a>
								</li>
						
							</ul>
						
							</ul>
						
							</ul>
						
							</ul>
						
					
				
			
				
				
					
						
						
							<ul>
						
							<ul>
						
							<ul>
						
						
								<li>
				 					<a href="#%e7%bb%98%e5%88%b6%e5%9b%be%e7%89%87" v-on:click="closeDrawer" id="绘制图片-nav">
										 绘制图片
									</a>
								</li>
						
							</ul>
						
							</ul>
						
							</ul>
						
					
				
			
				
				
					
						
						
							<ul>
						
							<ul>
						
							<ul>
						
							<ul>
						
						
								<li>
				 					<a href="#%e7%bb%98%e5%88%b6bitmap" v-on:click="closeDrawer" id="绘制bitmap-nav">
										 绘制Bitmap
									</a>
								</li>
						
							</ul>
						
							</ul>
						
							</ul>
						
							</ul>
						
					
				
			
				
				
					
						
						
							<ul>
						
							<ul>
						
							<ul>
						
						
								<li>
				 					<a href="#%e7%bb%98%e5%88%b6%e6%96%87%e5%ad%97" v-on:click="closeDrawer" id="绘制文字-nav">
										 绘制文字
									</a>
								</li>
						
							</ul>
						
							</ul>
						
							</ul>
						
					
				
			
				
				
					
						
						
							<ul>
						
							<ul>
						
							<ul>
						
						
								<li>
				 					<a href="#%e5%8f%82%e8%80%83" v-on:click="closeDrawer" id="参考-nav">
										 参考
									</a>
								</li>
						
							</ul>
						
							</ul>
						
							</ul>
						
					
				
			
	</div>

</div>
    
    <div class="pagination">
        <a id="globalBackToTop" class="pagination-action animated-visibility" href="#top" :class="{ invisible: scrollY == 0 }">
            <i class="material-icons pagination-action-icon">
                keyboard_arrow_up
            </i>
        </a>
        
        <a class="pagination-action" v-on:click="toggleDarkMode">
            <i class="material-icons pagination-action-icon" v-if="isDarkMode">
                brightness_4
            </i>
            <i class="material-icons pagination-action-icon" v-else="isDarkMode">
                brightness_7
            </i>
        </a>
        
        
    </div>
</div><div class="single-column-drawer-container" ref="drawer"
     v-bind:class="{ 'single-column-drawer-container-active': isDrawerOpen }">
    <div class="drawer-content">
        <div class="drawer-menu">
            
            
            
                
                
                
                    
                
                
                
                <a class="a-block drawer-menu-item active" href="/posts">
                    Archive
                </a>
                
            
                
                
                
                
                
                <a class="a-block drawer-menu-item false" href="https://android.malinkang.cn">
                    Android笔记
                </a>
                
            
                
                
                
                
                
                <a class="a-block drawer-menu-item false" href="https://kotlin.malinkang.cn">
                    Kotlin笔记
                </a>
                
            
                
                
                
                
                
                <a class="a-block drawer-menu-item false" href="/index.xml">
                    RSS Feed
                </a>
                
            
            
            <div class="toc">


	<div class="toc-content">
	
		
		
		
		<center>- CATALOG -</center>
			
				
				
					
						
						
							<ul>
						
							<ul>
						
							<ul>
						
						
								<li>
				 					<a href="#%e7%bb%98%e5%88%b6%e9%a2%9c%e8%89%b2" v-on:click="closeDrawer" id="绘制颜色-nav">
										 绘制颜色
									</a>
								</li>
						
							</ul>
						
							</ul>
						
							</ul>
						
					
				
			
				
				
					
						
						
							<ul>
						
							<ul>
						
							<ul>
						
						
								<li>
				 					<a href="#%e7%bb%98%e5%88%b6%e5%9f%ba%e6%9c%ac%e5%bd%a2%e7%8a%b6" v-on:click="closeDrawer" id="绘制基本形状-nav">
										 绘制基本形状
									</a>
								</li>
						
							</ul>
						
							</ul>
						
							</ul>
						
					
				
			
				
				
					
						
						
							<ul>
						
							<ul>
						
							<ul>
						
							<ul>
						
						
								<li>
				 					<a href="#%e7%bb%98%e5%88%b6%e7%82%b9" v-on:click="closeDrawer" id="绘制点-nav">
										 绘制点
									</a>
								</li>
						
							</ul>
						
							</ul>
						
							</ul>
						
							</ul>
						
					
				
			
				
				
					
						
						
							<ul>
						
							<ul>
						
							<ul>
						
							<ul>
						
						
								<li>
				 					<a href="#%e7%bb%98%e5%88%b6%e7%9b%b4%e7%ba%bf" v-on:click="closeDrawer" id="绘制直线-nav">
										 绘制直线
									</a>
								</li>
						
							</ul>
						
							</ul>
						
							</ul>
						
							</ul>
						
					
				
			
				
				
					
						
						
							<ul>
						
							<ul>
						
							<ul>
						
							<ul>
						
						
								<li>
				 					<a href="#%e7%bb%98%e5%88%b6%e7%9f%a9%e5%bd%a2" v-on:click="closeDrawer" id="绘制矩形-nav">
										 绘制矩形
									</a>
								</li>
						
							</ul>
						
							</ul>
						
							</ul>
						
							</ul>
						
					
				
			
				
				
					
						
						
							<ul>
						
							<ul>
						
							<ul>
						
							<ul>
						
						
								<li>
				 					<a href="#%e7%bb%98%e5%88%b6%e5%9c%86%e8%a7%92%e7%9f%a9%e5%bd%a2" v-on:click="closeDrawer" id="绘制圆角矩形-nav">
										 绘制圆角矩形
									</a>
								</li>
						
							</ul>
						
							</ul>
						
							</ul>
						
							</ul>
						
					
				
			
				
				
					
						
						
							<ul>
						
							<ul>
						
							<ul>
						
							<ul>
						
						
								<li>
				 					<a href="#%e7%bb%98%e5%88%b6%e6%a4%ad%e5%9c%86" v-on:click="closeDrawer" id="绘制椭圆-nav">
										 绘制椭圆
									</a>
								</li>
						
							</ul>
						
							</ul>
						
							</ul>
						
							</ul>
						
					
				
			
				
				
					
						
						
							<ul>
						
							<ul>
						
							<ul>
						
							<ul>
						
						
								<li>
				 					<a href="#%e7%bb%98%e5%88%b6%e5%9c%86" v-on:click="closeDrawer" id="绘制圆-nav">
										 绘制圆
									</a>
								</li>
						
							</ul>
						
							</ul>
						
							</ul>
						
							</ul>
						
					
				
			
				
				
					
						
						
							<ul>
						
							<ul>
						
							<ul>
						
							<ul>
						
						
								<li>
				 					<a href="#%e7%bb%98%e5%88%b6%e5%9c%86%e5%bc%a7" v-on:click="closeDrawer" id="绘制圆弧-nav">
										 绘制圆弧
									</a>
								</li>
						
							</ul>
						
							</ul>
						
							</ul>
						
							</ul>
						
					
				
			
				
				
					
						
						
							<ul>
						
							<ul>
						
							<ul>
						
						
								<li>
				 					<a href="#%e7%94%bb%e5%b8%83%e6%93%8d%e4%bd%9c" v-on:click="closeDrawer" id="画布操作-nav">
										 画布操作
									</a>
								</li>
						
							</ul>
						
							</ul>
						
							</ul>
						
					
				
			
				
				
					
						
						
							<ul>
						
							<ul>
						
							<ul>
						
							<ul>
						
						
								<li>
				 					<a href="#%e4%bd%8d%e7%a7%bbtranslate" v-on:click="closeDrawer" id="位移translate-nav">
										 位移（translate）
									</a>
								</li>
						
							</ul>
						
							</ul>
						
							</ul>
						
							</ul>
						
					
				
			
				
				
					
						
						
							<ul>
						
							<ul>
						
							<ul>
						
							<ul>
						
						
								<li>
				 					<a href="#%e7%bc%a9%e6%94%bescale" v-on:click="closeDrawer" id="缩放scale-nav">
										 缩放（scale）
									</a>
								</li>
						
							</ul>
						
							</ul>
						
							</ul>
						
							</ul>
						
					
				
			
				
				
					
						
						
							<ul>
						
							<ul>
						
							<ul>
						
							<ul>
						
						
								<li>
				 					<a href="#%e6%97%8b%e8%bd%acrotate" v-on:click="closeDrawer" id="旋转rotate-nav">
										 旋转（rotate）
									</a>
								</li>
						
							</ul>
						
							</ul>
						
							</ul>
						
							</ul>
						
					
				
			
				
				
					
						
						
							<ul>
						
							<ul>
						
							<ul>
						
							<ul>
						
						
								<li>
				 					<a href="#%e9%94%99%e5%88%87skew" v-on:click="closeDrawer" id="错切skew-nav">
										 错切（skew）
									</a>
								</li>
						
							</ul>
						
							</ul>
						
							</ul>
						
							</ul>
						
					
				
			
				
				
					
						
						
							<ul>
						
							<ul>
						
							<ul>
						
						
								<li>
				 					<a href="#%e7%bb%98%e5%88%b6%e5%9b%be%e7%89%87" v-on:click="closeDrawer" id="绘制图片-nav">
										 绘制图片
									</a>
								</li>
						
							</ul>
						
							</ul>
						
							</ul>
						
					
				
			
				
				
					
						
						
							<ul>
						
							<ul>
						
							<ul>
						
							<ul>
						
						
								<li>
				 					<a href="#%e7%bb%98%e5%88%b6bitmap" v-on:click="closeDrawer" id="绘制bitmap-nav">
										 绘制Bitmap
									</a>
								</li>
						
							</ul>
						
							</ul>
						
							</ul>
						
							</ul>
						
					
				
			
				
				
					
						
						
							<ul>
						
							<ul>
						
							<ul>
						
						
								<li>
				 					<a href="#%e7%bb%98%e5%88%b6%e6%96%87%e5%ad%97" v-on:click="closeDrawer" id="绘制文字-nav">
										 绘制文字
									</a>
								</li>
						
							</ul>
						
							</ul>
						
							</ul>
						
					
				
			
				
				
					
						
						
							<ul>
						
							<ul>
						
							<ul>
						
						
								<li>
				 					<a href="#%e5%8f%82%e8%80%83" v-on:click="closeDrawer" id="参考-nav">
										 参考
									</a>
								</li>
						
							</ul>
						
							</ul>
						
							</ul>
						
					
				
			
	</div>

</div>
            
        </div>
    </div>
</div>
<transition name="fade">
    <div v-bind:class="{ 'single-column-drawer-mask': mounted }" v-if="isDrawerOpen" v-on:click="toggleDrawer"></div>
</transition>
<nav ref="navBar" class="navbar sticky-top navbar-light single-column-nav-container">
    <div ref="navBackground" class="nav-background"></div>
    <div class="container container-narrow nav-content">
        <button id="nav_dropdown_btn" class="nav-dropdown-toggle" type="button" v-on:click="toggleDrawer">
            <i class="material-icons">
                menu
            </i>
        </button>
        <a ref="navTitle" class="navbar-brand" href="https://malinkang.cn/">
            Malinkang‘s Blog
        </a>
        
        <button type="button" class="nav-darkmode-toggle" v-on:click="toggleDarkMode">
            <i class="material-icons" v-if="isDarkMode">
                brightness_4
            </i>
            <i class="material-icons" v-else="isDarkMode">
                brightness_7
            </i>
        </button>
        
    </div>
</nav>
<div class="single-column-header-container" ref="pageHead"
     v-bind:style="{ transform: 'translateZ(0px) translateY('+.3*scrollY+'px)', opacity: 1-navOpacity }">
    <a href="https://malinkang.cn/">
        <div class="single-column-header-title">Malinkang‘s Blog</div>
        
        <div class="single-column-header-subtitle">人生最可悲的事情，莫过于胸怀大志，却又虚度光阴。</div>
        

    </a>
</div>
            <div id="content">
<div ref="streamContainer" class="stream-container">
    <div class="post-list-container post-list-container-shadow">
        <div class="post">
            
            
            

            <div class="post-head-wrapper-text-only"
                
            >
                <div class="post-title">
                    Android Canvas
                    
                    <div class="post-meta">
                        
                        <time itemprop="datePublished">
                            2015-12-22 13:38
                        </time>
                        

                        

                        
                        
                    </div>
                </div>
            </div>
            
            <div class="post-body-wrapper">
                <div class="post-body">
                    <p>Canvas我们可以称之为画布，我们可以使用画笔在上面绘制颜色，也可以绘制点、线以及矩形、扇形等各种形状，还可以绘制图片文本路径等，下面我们一一进行介绍</p>
<h3 id="绘制颜色">绘制颜色</h3>
<p>Canvas提供了三个绘制颜色的方法。</p>
<ul>
<li>drawColor</li>
<li>drawRGB</li>
<li>drawARGB</li>
</ul>
<h3 id="绘制基本形状">绘制基本形状</h3>
<p>想要在画布上进行绘制，就需要一个画笔Paint。这里我们只简单介绍画笔的使用，关于画笔的详细使用将在画笔这一章详细介绍。</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">CanvasView</span> <span style="color:#66d9ef">extends</span> View <span style="color:#f92672">{</span>
  <span style="color:#66d9ef">public</span> <span style="color:#a6e22e">CanvasView</span><span style="color:#f92672">(</span>Context context<span style="color:#f92672">,</span> <span style="color:#a6e22e">@Nullable</span> AttributeSet attrs<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
    <span style="color:#66d9ef">super</span><span style="color:#f92672">(</span>context<span style="color:#f92672">,</span> attrs<span style="color:#f92672">);</span>
    initPaint<span style="color:#f92672">();</span>
  <span style="color:#f92672">}</span>
  <span style="color:#75715e">//1.创建Paint对象
</span><span style="color:#75715e"></span>  <span style="color:#66d9ef">private</span> Paint mPaint <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> Paint<span style="color:#f92672">();</span>
  <span style="color:#75715e">//2.初始化Paint
</span><span style="color:#75715e"></span>  <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">initPaint</span><span style="color:#f92672">(){</span>
    mPaint<span style="color:#f92672">.</span><span style="color:#a6e22e">setColor</span><span style="color:#f92672">(</span>getResources<span style="color:#f92672">().</span><span style="color:#a6e22e">getColor</span><span style="color:#f92672">(</span>R<span style="color:#f92672">.</span><span style="color:#a6e22e">color</span><span style="color:#f92672">.</span><span style="color:#a6e22e">purple</span><span style="color:#f92672">));</span><span style="color:#75715e">//设置画笔颜色
</span><span style="color:#75715e"></span>    mPaint<span style="color:#f92672">.</span><span style="color:#a6e22e">setStyle</span><span style="color:#f92672">(</span>Paint<span style="color:#f92672">.</span><span style="color:#a6e22e">Style</span><span style="color:#f92672">.</span><span style="color:#a6e22e">FILL</span><span style="color:#f92672">);</span><span style="color:#75715e">//设置画笔样式为填充
</span><span style="color:#75715e"></span>    mPaint<span style="color:#f92672">.</span><span style="color:#a6e22e">setStrokeWidth</span><span style="color:#f92672">(</span>10f<span style="color:#f92672">);</span> <span style="color:#75715e">//设置画笔宽度为10px
</span><span style="color:#75715e"></span>  <span style="color:#f92672">}</span>
  
  <span style="color:#a6e22e">@Override</span> <span style="color:#66d9ef">protected</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">onDraw</span><span style="color:#f92672">(</span>Canvas canvas<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
    <span style="color:#66d9ef">super</span><span style="color:#f92672">.</span><span style="color:#a6e22e">onDraw</span><span style="color:#f92672">(</span>canvas<span style="color:#f92672">);</span>
  <span style="color:#f92672">}</span>
<span style="color:#f92672">}</span>
</code></pre></div><h4 id="绘制点">绘制点</h4>
<p>绘制一个点需要这个点的坐标。</p>
<p>Canvas提供了三个绘制点的方法：</p>
<ul>
<li>public void drawPoint(float x, float y, @NonNull Paint paint)；绘制单个点</li>
<li>public void drawPoints(@Size(multiple=2) @NonNull float[] pts, @NonNull Paint paint) 绘制多个点</li>
<li>public void drawPoints(@Size(multiple=2) float[] pts, int offset, int count, @NonNull Paint paint)</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#75715e">//在坐标(200,200)位置绘制一个点
</span><span style="color:#75715e"></span>canvas<span style="color:#f92672">.</span><span style="color:#a6e22e">drawPoint</span><span style="color:#f92672">(</span>200<span style="color:#f92672">,</span> 200<span style="color:#f92672">,</span> mPaint<span style="color:#f92672">);</span>
<span style="color:#75715e">//绘制一组点，坐标位置由float数组指定
</span><span style="color:#75715e"></span>canvas<span style="color:#f92672">.</span><span style="color:#a6e22e">drawPoints</span><span style="color:#f92672">(</span><span style="color:#66d9ef">new</span> <span style="color:#66d9ef">float</span><span style="color:#f92672">[]{</span>
    500<span style="color:#f92672">,</span>500<span style="color:#f92672">,</span>
    500<span style="color:#f92672">,</span>600<span style="color:#f92672">,</span>
    500<span style="color:#f92672">,</span>700
<span style="color:#f92672">},</span>mPaint<span style="color:#f92672">);</span>
</code></pre></div><p><img src="/assets/images/canvas-point.jpeg" alt=""></p>
<h4 id="绘制直线">绘制直线</h4>
<p>绘制直线需要两个点，初始点和结束点。</p>
<p>Canvas同样提供了三个绘制直线的方法：</p>
<ul>
<li>public void drawLine(float startX, float startY, float stopX, float stopY, @NonNull Paint paint)</li>
<li>public void drawLines(@Size(multiple=4) @NonNull float[] pts, int offset, int count,@NonNull Paint paint)</li>
<li>public void drawLines(@Size(multiple=4) @NonNull float[] pts, @NonNull Paint paint)</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java">canvas<span style="color:#f92672">.</span><span style="color:#a6e22e">drawLine</span><span style="color:#f92672">(</span>300<span style="color:#f92672">,</span> 300<span style="color:#f92672">,</span> 500<span style="color:#f92672">,</span> 600<span style="color:#f92672">,</span> mPaint<span style="color:#f92672">);</span>    <span style="color:#75715e">// 在坐标(300,300)(500,600)之间绘制一条直线
</span><span style="color:#75715e"></span>canvas<span style="color:#f92672">.</span><span style="color:#a6e22e">drawLines</span><span style="color:#f92672">(</span><span style="color:#66d9ef">new</span> <span style="color:#66d9ef">float</span><span style="color:#f92672">[]</span> <span style="color:#f92672">{</span>               <span style="color:#75715e">// 绘制一组线 每四数字(两个点的坐标)确定一条线
</span><span style="color:#75715e"></span>    100<span style="color:#f92672">,</span> 200<span style="color:#f92672">,</span> 200<span style="color:#f92672">,</span> 200<span style="color:#f92672">,</span> 100<span style="color:#f92672">,</span> 300<span style="color:#f92672">,</span> 200<span style="color:#f92672">,</span> 300
<span style="color:#f92672">},</span> mPaint<span style="color:#f92672">);</span>
</code></pre></div><p><img src="/assets/images/canvas-line.jpeg" alt=""></p>
<h4 id="绘制矩形">绘制矩形</h4>
<p>确定一个矩形最少需要四个数据，就是对角线的两个点的坐标值，这里一般采用左上角和右下角的两个点的坐标。</p>
<p>Canvas提供了三个绘制矩形的方法：</p>
<ul>
<li>public void drawRect(float left, float top, float right, float bottom, @NonNull Paint paint):前两个参数是左上角点的坐标，后两个参数是右下角坐标点</li>
<li>public void drawRect(@NonNull Rect r, @NonNull Paint paint)</li>
<li>public void drawRect(@NonNull RectF rect, @NonNull Paint paint)</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java">canvas<span style="color:#f92672">.</span><span style="color:#a6e22e">drawRect</span><span style="color:#f92672">(</span>0<span style="color:#f92672">,</span>0<span style="color:#f92672">,</span>400<span style="color:#f92672">,</span>400<span style="color:#f92672">,</span>mPaint<span style="color:#f92672">);</span>
<span style="color:#75715e">// or
</span><span style="color:#75715e"></span>Rect rect <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> Rect<span style="color:#f92672">(</span>0<span style="color:#f92672">,</span>0<span style="color:#f92672">,</span>400<span style="color:#f92672">,</span>400<span style="color:#f92672">);</span>
canvas<span style="color:#f92672">.</span><span style="color:#a6e22e">drawRect</span><span style="color:#f92672">(</span>rect<span style="color:#f92672">,</span>mPaint<span style="color:#f92672">);</span>
<span style="color:#75715e">// or
</span><span style="color:#75715e"></span>RectF rectF <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> RectF<span style="color:#f92672">(</span>0<span style="color:#f92672">,</span>0<span style="color:#f92672">,</span>400<span style="color:#f92672">,</span>400<span style="color:#f92672">);</span>
canvas<span style="color:#f92672">.</span><span style="color:#a6e22e">drawRect</span><span style="color:#f92672">(</span>rectF<span style="color:#f92672">,</span>mPaint<span style="color:#f92672">);</span>
</code></pre></div><p><img src="/assets/images/canvas-rect.jpeg" alt=""></p>
<h4 id="绘制圆角矩形">绘制圆角矩形</h4>
<p>Canvas提供了两个绘制圆角矩形的方法：</p>
<ul>
<li>public void drawRoundRect(float left, float top, float right, float bottom, float rx, float ry,@NonNull Paint paint)：相比绘制矩形，我们需要提供一个圆角的半径，由于圆角是一个椭圆，所以需要提供椭圆的两个半径rx和ry。</li>
<li>public void drawRoundRect(@NonNull RectF rect, float rx, float ry, @NonNull Paint paint)</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#75715e">// API 21 提供
</span><span style="color:#75715e"></span>canvas<span style="color:#f92672">.</span><span style="color:#a6e22e">drawRoundRect</span><span style="color:#f92672">(</span>100<span style="color:#f92672">,</span>100<span style="color:#f92672">,</span>500<span style="color:#f92672">,</span>500<span style="color:#f92672">,</span>20<span style="color:#f92672">,</span>20<span style="color:#f92672">,</span>mPaint<span style="color:#f92672">);</span>
<span style="color:#75715e">// or
</span><span style="color:#75715e"></span>RectF rectF <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> RectF<span style="color:#f92672">(</span>100<span style="color:#f92672">,</span>100<span style="color:#f92672">,</span>500<span style="color:#f92672">,</span>500<span style="color:#f92672">);</span>
canvas<span style="color:#f92672">.</span><span style="color:#a6e22e">drawRoundRect</span><span style="color:#f92672">(</span>rectF<span style="color:#f92672">,</span>20<span style="color:#f92672">,</span>20<span style="color:#f92672">,</span>mPaint<span style="color:#f92672">);</span>
</code></pre></div><p><img src="/assets/images/canvas-roundrect.jpeg" alt=""></p>
<p>当rx或者ry的值大于矩形的一半时，按照一半进行处理：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#75715e">// API 21 提供
</span><span style="color:#75715e"></span>canvas<span style="color:#f92672">.</span><span style="color:#a6e22e">drawRoundRect</span><span style="color:#f92672">(</span>100<span style="color:#f92672">,</span>100<span style="color:#f92672">,</span>500<span style="color:#f92672">,</span>500<span style="color:#f92672">,</span>250<span style="color:#f92672">,</span>250<span style="color:#f92672">,</span>mPaint<span style="color:#f92672">);</span>
<span style="color:#75715e">// or
</span><span style="color:#75715e"></span>RectF rectF <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> RectF<span style="color:#f92672">(</span>100<span style="color:#f92672">,</span>100<span style="color:#f92672">,</span>500<span style="color:#f92672">,</span>500<span style="color:#f92672">);</span>
canvas<span style="color:#f92672">.</span><span style="color:#a6e22e">drawRoundRect</span><span style="color:#f92672">(</span>rectF<span style="color:#f92672">,</span>250<span style="color:#f92672">,</span>250<span style="color:#f92672">,</span>mPaint<span style="color:#f92672">);</span>
</code></pre></div><p><img src="/assets/images/canvas-roundrect2.jpeg" alt=""></p>
<h4 id="绘制椭圆">绘制椭圆</h4>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#75715e">//API 21 提供
</span><span style="color:#75715e"></span>canvas<span style="color:#f92672">.</span><span style="color:#a6e22e">drawOval</span><span style="color:#f92672">(</span>100<span style="color:#f92672">,</span>100<span style="color:#f92672">,</span>800<span style="color:#f92672">,</span>400<span style="color:#f92672">,</span>mPaint<span style="color:#f92672">);</span>
<span style="color:#75715e">//or
</span><span style="color:#75715e"></span>RectF rectF <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> RectF<span style="color:#f92672">(</span>100<span style="color:#f92672">,</span>100<span style="color:#f92672">,</span>800<span style="color:#f92672">,</span>400<span style="color:#f92672">);</span>
canvas<span style="color:#f92672">.</span><span style="color:#a6e22e">drawOval</span><span style="color:#f92672">(</span>rectF<span style="color:#f92672">,</span>mPaint<span style="color:#f92672">);</span>
</code></pre></div><p><img src="/assets/images/canvas-oval.jpeg" alt=""></p>
<h4 id="绘制圆">绘制圆</h4>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java">canvas<span style="color:#f92672">.</span><span style="color:#a6e22e">drawCircle</span><span style="color:#f92672">(</span>500<span style="color:#f92672">,</span>500<span style="color:#f92672">,</span>400<span style="color:#f92672">,</span>mPaint<span style="color:#f92672">);</span>  <span style="color:#75715e">// 绘制一个圆心坐标在(500,500)，半径为400 的圆。
</span></code></pre></div><p><img src="/assets/images/canvas-circle.jpg" alt=""></p>
<h4 id="绘制圆弧">绘制圆弧</h4>
<p>Canvas提供了两个绘制圆弧的方法：</p>
<ul>
<li>public void drawArc(@NonNull RectF oval, float startAngle, float sweepAngle, boolean useCenter, @NonNull Paint paint)</li>
<li>public void drawArc(float left, float top, float right, float bottom, float startAngle,float sweepAngle, boolean useCenter, @NonNull Paint paint)</li>
</ul>
<p>从上面可以看出，相比于绘制椭圆，绘制圆弧还多了三个参数：</p>
<ul>
<li>startAngle：开始角度</li>
<li>sweepAngle：扫过角度</li>
<li>useCenter：是否使用中心，使用了中心点之后绘制出来类似于一个扇形，而不使用中心点则是圆弧起始点和结束点之间的连线加上圆弧围成的图形。</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#75715e">//绘制背景
</span><span style="color:#75715e"></span>mPaint<span style="color:#f92672">.</span><span style="color:#a6e22e">setColor</span><span style="color:#f92672">(</span>Color<span style="color:#f92672">.</span><span style="color:#a6e22e">GRAY</span><span style="color:#f92672">);</span>
RectF rectF <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> RectF<span style="color:#f92672">(</span>100<span style="color:#f92672">,</span>100<span style="color:#f92672">,</span>500<span style="color:#f92672">,</span>500<span style="color:#f92672">);</span>
RectF rectF2 <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> RectF<span style="color:#f92672">(</span>600<span style="color:#f92672">,</span>100<span style="color:#f92672">,</span>1000<span style="color:#f92672">,</span>500<span style="color:#f92672">);</span>
canvas<span style="color:#f92672">.</span><span style="color:#a6e22e">drawRect</span><span style="color:#f92672">(</span>rectF<span style="color:#f92672">,</span>mPaint<span style="color:#f92672">);</span>
canvas<span style="color:#f92672">.</span><span style="color:#a6e22e">drawRect</span><span style="color:#f92672">(</span>rectF2<span style="color:#f92672">,</span>mPaint<span style="color:#f92672">);</span>
<span style="color:#75715e">//绘制圆弧
</span><span style="color:#75715e"></span>mPaint<span style="color:#f92672">.</span><span style="color:#a6e22e">setColor</span><span style="color:#f92672">(</span>getResources<span style="color:#f92672">().</span><span style="color:#a6e22e">getColor</span><span style="color:#f92672">(</span>R<span style="color:#f92672">.</span><span style="color:#a6e22e">color</span><span style="color:#f92672">.</span><span style="color:#a6e22e">purple</span><span style="color:#f92672">));</span><span style="color:#75715e">//设置画笔颜色
</span><span style="color:#75715e"></span>canvas<span style="color:#f92672">.</span><span style="color:#a6e22e">drawArc</span><span style="color:#f92672">(</span>rectF<span style="color:#f92672">,</span>0<span style="color:#f92672">,</span>90<span style="color:#f92672">,</span><span style="color:#66d9ef">true</span><span style="color:#f92672">,</span>mPaint<span style="color:#f92672">);</span>
canvas<span style="color:#f92672">.</span><span style="color:#a6e22e">drawArc</span><span style="color:#f92672">(</span>rectF2<span style="color:#f92672">,</span>0<span style="color:#f92672">,</span>90<span style="color:#f92672">,</span><span style="color:#66d9ef">false</span><span style="color:#f92672">,</span>mPaint<span style="color:#f92672">);</span>
</code></pre></div><p><img src="/assets/images/canvas-arc.jpeg" alt=""></p>
<h3 id="画布操作">画布操作</h3>
<h4 id="位移translate">位移（translate）</h4>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java">canvas<span style="color:#f92672">.</span><span style="color:#a6e22e">translate</span><span style="color:#f92672">(</span>100<span style="color:#f92672">,</span>100<span style="color:#f92672">);</span>
canvas<span style="color:#f92672">.</span><span style="color:#a6e22e">drawCircle</span><span style="color:#f92672">(</span>0<span style="color:#f92672">,</span>0<span style="color:#f92672">,</span>100<span style="color:#f92672">,</span>mPaint<span style="color:#f92672">);</span>

canvas<span style="color:#f92672">.</span><span style="color:#a6e22e">translate</span><span style="color:#f92672">(</span>200<span style="color:#f92672">,</span>0<span style="color:#f92672">);</span>
canvas<span style="color:#f92672">.</span><span style="color:#a6e22e">drawCircle</span><span style="color:#f92672">(</span>0<span style="color:#f92672">,</span>0<span style="color:#f92672">,</span>100<span style="color:#f92672">,</span>mPaint<span style="color:#f92672">);</span>
</code></pre></div><p><img src="/assets/images/canvas-translate.jpg" alt=""></p>
<h4 id="缩放scale">缩放（scale）</h4>
<p>canvas提供了两个方法缩放的方法</p>
<ul>
<li>public void scale (float sx, float sy)</li>
<li>public final void scale (float sx, float sy, float px, float py)</li>
</ul>
<p>这两个方法中前两个参数是相同的分别为x轴和y轴的缩放比例。而第二种方法比前一种多了两个参数，用来控制缩放中心位置的。</p>
<p>缩放比例(sx,sy)取值范围详解：</p>
<table>
<thead>
<tr>
<th>取值范围(n)</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>[-∞, -1)</td>
<td>先根据缩放中心放大n倍，再根据中心轴进行翻转</td>
</tr>
<tr>
<td>-1</td>
<td>根据缩放中心轴进行翻转</td>
</tr>
<tr>
<td>(-1, 0)</td>
<td>先根据缩放中心缩小到n，再根据中心轴进行翻转</td>
</tr>
<tr>
<td>0</td>
<td>不会显示，若sx为0，则宽度为0，不会显示，sy同理</td>
</tr>
<tr>
<td>(0, 1)</td>
<td>根据缩放中心缩小到n</td>
</tr>
<tr>
<td>1</td>
<td>没有变化</td>
</tr>
<tr>
<td>(1, +∞)</td>
<td>根据缩放中心放大n倍</td>
</tr>
</tbody>
</table>
<p>如果在缩放时稍微注意一下就会发现<!-- raw HTML omitted -->缩放的中心默认为坐标原点,而缩放中心轴就是坐标轴<!-- raw HTML omitted -->，如下：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java">RectF rect <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> RectF<span style="color:#f92672">(</span>0<span style="color:#f92672">,</span>0<span style="color:#f92672">,</span>400<span style="color:#f92672">,</span>400<span style="color:#f92672">);</span>
canvas<span style="color:#f92672">.</span><span style="color:#a6e22e">drawRect</span><span style="color:#f92672">(</span>rect<span style="color:#f92672">,</span>mPaint<span style="color:#f92672">);</span>
canvas<span style="color:#f92672">.</span><span style="color:#a6e22e">scale</span><span style="color:#f92672">(</span>0<span style="color:#f92672">.</span><span style="color:#a6e22e">5f</span><span style="color:#f92672">,</span>0<span style="color:#f92672">.</span><span style="color:#a6e22e">5f</span><span style="color:#f92672">);</span><span style="color:#75715e">//画布缩小一半
</span><span style="color:#75715e"></span>mPaint<span style="color:#f92672">.</span><span style="color:#a6e22e">setColor</span><span style="color:#f92672">(</span>getResources<span style="color:#f92672">().</span><span style="color:#a6e22e">getColor</span><span style="color:#f92672">(</span>R<span style="color:#f92672">.</span><span style="color:#a6e22e">color</span><span style="color:#f92672">.</span><span style="color:#a6e22e">purple</span><span style="color:#f92672">));</span>
canvas<span style="color:#f92672">.</span><span style="color:#a6e22e">drawRect</span><span style="color:#f92672">(</span>rect<span style="color:#f92672">,</span>mPaint<span style="color:#f92672">);</span>
</code></pre></div><p><img src="/assets/images/canvas-scale1.jpg" alt=""></p>
<p>设置缩放中心位置</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java">RectF rect <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> RectF<span style="color:#f92672">(</span>0<span style="color:#f92672">,</span>0<span style="color:#f92672">,</span>400<span style="color:#f92672">,</span>400<span style="color:#f92672">);</span>
canvas<span style="color:#f92672">.</span><span style="color:#a6e22e">drawRect</span><span style="color:#f92672">(</span>rect<span style="color:#f92672">,</span>mPaint<span style="color:#f92672">);</span>
canvas<span style="color:#f92672">.</span><span style="color:#a6e22e">scale</span><span style="color:#f92672">(</span>0<span style="color:#f92672">.</span><span style="color:#a6e22e">5f</span><span style="color:#f92672">,</span>0<span style="color:#f92672">.</span><span style="color:#a6e22e">5f</span><span style="color:#f92672">,</span>200<span style="color:#f92672">,</span>200<span style="color:#f92672">);</span><span style="color:#75715e">//画布缩小一半
</span><span style="color:#75715e"></span>mPaint<span style="color:#f92672">.</span><span style="color:#a6e22e">setColor</span><span style="color:#f92672">(</span>getResources<span style="color:#f92672">().</span><span style="color:#a6e22e">getColor</span><span style="color:#f92672">(</span>R<span style="color:#f92672">.</span><span style="color:#a6e22e">color</span><span style="color:#f92672">.</span><span style="color:#a6e22e">purple</span><span style="color:#f92672">));</span>
canvas<span style="color:#f92672">.</span><span style="color:#a6e22e">drawRect</span><span style="color:#f92672">(</span>rect<span style="color:#f92672">,</span>mPaint<span style="color:#f92672">);</span>   <span style="color:#75715e">// 绘制蓝色矩形
</span><span style="color:#75715e"></span>canvas<span style="color:#f92672">.</span><span style="color:#a6e22e">drawRect</span><span style="color:#f92672">(</span>rect<span style="color:#f92672">,</span>mPaint<span style="color:#f92672">);</span>
</code></pre></div><p><img src="/assets/images/canvas-scale2.jpg" alt=""></p>
<p>前面两个示例缩放的数值都是正数，按照表格中的说明，<strong>当缩放比例为负数的时候会根据缩放中心轴进行翻转</strong>，下面我们就来实验一下：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java">RectF rect <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> RectF<span style="color:#f92672">(</span>0<span style="color:#f92672">,</span>0<span style="color:#f92672">,</span>600<span style="color:#f92672">,</span>400<span style="color:#f92672">);</span>
canvas<span style="color:#f92672">.</span><span style="color:#a6e22e">drawRect</span><span style="color:#f92672">(</span>rect<span style="color:#f92672">,</span>mPaint<span style="color:#f92672">);</span>
canvas<span style="color:#f92672">.</span><span style="color:#a6e22e">scale</span><span style="color:#f92672">(-</span>0<span style="color:#f92672">.</span><span style="color:#a6e22e">5f</span><span style="color:#f92672">,-</span>0<span style="color:#f92672">.</span><span style="color:#a6e22e">5f</span><span style="color:#f92672">,</span>600<span style="color:#f92672">,</span>400<span style="color:#f92672">);</span><span style="color:#75715e">//画布缩小一半
</span><span style="color:#75715e"></span>mPaint<span style="color:#f92672">.</span><span style="color:#a6e22e">setColor</span><span style="color:#f92672">(</span>getResources<span style="color:#f92672">().</span><span style="color:#a6e22e">getColor</span><span style="color:#f92672">(</span>R<span style="color:#f92672">.</span><span style="color:#a6e22e">color</span><span style="color:#f92672">.</span><span style="color:#a6e22e">purple</span><span style="color:#f92672">));</span>
canvas<span style="color:#f92672">.</span><span style="color:#a6e22e">drawRect</span><span style="color:#f92672">(</span>rect<span style="color:#f92672">,</span>mPaint<span style="color:#f92672">);</span>
</code></pre></div><p><img src="/assets/images/canvas-scale3.jpeg" alt=""></p>
<p>本次缩放可以看做是先根据缩放中心(坐标原点)缩放到原来的0.5倍，然后分别按照x轴和y轴进行翻转。</p>
<h4 id="旋转rotate">旋转（rotate）</h4>
<p>canvas提供了两个旋转的方法：</p>
<ul>
<li>public void rotate (float degrees)</li>
<li>public final void rotate (float degrees, float px, float py)
和缩放一样，第二种方法多出来的两个参数依旧是控制旋转中心点的。</li>
</ul>
<p>默认的旋转中心依旧是坐标原点：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java">canvas<span style="color:#f92672">.</span><span style="color:#a6e22e">translate</span><span style="color:#f92672">(</span>200<span style="color:#f92672">,</span>200<span style="color:#f92672">);</span>
RectF rect <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> RectF<span style="color:#f92672">(</span>0<span style="color:#f92672">,</span>0<span style="color:#f92672">,</span>200<span style="color:#f92672">,</span>200<span style="color:#f92672">);</span>   <span style="color:#75715e">// 矩形区域
</span><span style="color:#75715e"></span>canvas<span style="color:#f92672">.</span><span style="color:#a6e22e">drawRect</span><span style="color:#f92672">(</span>rect<span style="color:#f92672">,</span>mPaint<span style="color:#f92672">);</span>
mPaint<span style="color:#f92672">.</span><span style="color:#a6e22e">setColor</span><span style="color:#f92672">(</span>getResources<span style="color:#f92672">().</span><span style="color:#a6e22e">getColor</span><span style="color:#f92672">(</span>R<span style="color:#f92672">.</span><span style="color:#a6e22e">color</span><span style="color:#f92672">.</span><span style="color:#a6e22e">purple</span><span style="color:#f92672">));</span>
canvas<span style="color:#f92672">.</span><span style="color:#a6e22e">rotate</span><span style="color:#f92672">(</span>45<span style="color:#f92672">);</span>
canvas<span style="color:#f92672">.</span><span style="color:#a6e22e">drawRect</span><span style="color:#f92672">(</span>rect<span style="color:#f92672">,</span>mPaint<span style="color:#f92672">);</span>
</code></pre></div><p><img src="/assets/images/canvas-rotate1.jpeg" alt=""></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java">canvas<span style="color:#f92672">.</span><span style="color:#a6e22e">translate</span><span style="color:#f92672">(</span>200<span style="color:#f92672">,</span>200<span style="color:#f92672">);</span>
RectF rect <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> RectF<span style="color:#f92672">(</span>0<span style="color:#f92672">,</span>0<span style="color:#f92672">,</span>200<span style="color:#f92672">,</span>200<span style="color:#f92672">);</span>   <span style="color:#75715e">// 矩形区域
</span><span style="color:#75715e"></span>canvas<span style="color:#f92672">.</span><span style="color:#a6e22e">drawRect</span><span style="color:#f92672">(</span>rect<span style="color:#f92672">,</span>mPaint<span style="color:#f92672">);</span>
mPaint<span style="color:#f92672">.</span><span style="color:#a6e22e">setColor</span><span style="color:#f92672">(</span>getResources<span style="color:#f92672">().</span><span style="color:#a6e22e">getColor</span><span style="color:#f92672">(</span>R<span style="color:#f92672">.</span><span style="color:#a6e22e">color</span><span style="color:#f92672">.</span><span style="color:#a6e22e">purple</span><span style="color:#f92672">));</span>
canvas<span style="color:#f92672">.</span><span style="color:#a6e22e">rotate</span><span style="color:#f92672">(</span>45<span style="color:#f92672">,</span>100<span style="color:#f92672">,</span>100<span style="color:#f92672">);</span>
canvas<span style="color:#f92672">.</span><span style="color:#a6e22e">drawRect</span><span style="color:#f92672">(</span>rect<span style="color:#f92672">,</span>mPaint<span style="color:#f92672">);</span>
</code></pre></div><p><img src="/assets/images/canvas-rotate2.jpeg" alt=""></p>
<h4 id="错切skew">错切（skew）</h4>
<p>skew这里翻译为错切，错切是特殊类型的线性变换。</p>
<p>错切只提供了一种方法：</p>
<ul>
<li>public void skew (float sx, float sy)</li>
</ul>
<p>参数含义：
float sx:将画布在x方向上倾斜相应的角度，sx倾斜角度的tan值.
float sy:将画布在y轴方向上倾斜相应的角度，sy为倾斜角度的tan值.</p>
<p>示例：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java">mPaint<span style="color:#f92672">.</span><span style="color:#a6e22e">setStyle</span><span style="color:#f92672">(</span>Paint<span style="color:#f92672">.</span><span style="color:#a6e22e">Style</span><span style="color:#f92672">.</span><span style="color:#a6e22e">STROKE</span><span style="color:#f92672">);</span>
RectF rect <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> RectF<span style="color:#f92672">(</span>0<span style="color:#f92672">,</span>0<span style="color:#f92672">,</span>200<span style="color:#f92672">,</span>200<span style="color:#f92672">);</span> 
canvas<span style="color:#f92672">.</span><span style="color:#a6e22e">drawRect</span><span style="color:#f92672">(</span>rect<span style="color:#f92672">,</span>mPaint<span style="color:#f92672">);</span>
canvas<span style="color:#f92672">.</span><span style="color:#a6e22e">skew</span><span style="color:#f92672">(</span>1<span style="color:#f92672">,</span>0<span style="color:#f92672">);</span>
mPaint<span style="color:#f92672">.</span><span style="color:#a6e22e">setColor</span><span style="color:#f92672">(</span>getResources<span style="color:#f92672">().</span><span style="color:#a6e22e">getColor</span><span style="color:#f92672">(</span>R<span style="color:#f92672">.</span><span style="color:#a6e22e">color</span><span style="color:#f92672">.</span><span style="color:#a6e22e">purple</span><span style="color:#f92672">));</span>        
canvas<span style="color:#f92672">.</span><span style="color:#a6e22e">drawRect</span><span style="color:#f92672">(</span>rect<span style="color:#f92672">,</span>mPaint<span style="color:#f92672">);</span>
</code></pre></div><p><img src="/assets/images/canvas-skew.jpeg" alt=""></p>
<h3 id="绘制图片">绘制图片</h3>
<h4 id="绘制bitmap">绘制Bitmap</h4>
<p>Canvas提供了如下绘制Bitmap的方法：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#75715e">//第一类
</span><span style="color:#75715e"></span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">drawBitmap</span> <span style="color:#f92672">(</span>Bitmap bitmap<span style="color:#f92672">,</span> Matrix matrix<span style="color:#f92672">,</span> Paint paint<span style="color:#f92672">)</span>
<span style="color:#75715e">//第二类绘制时指定了图片左上角的坐标(距离坐标原点的距离)
</span><span style="color:#75715e"></span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">drawBitmap</span> <span style="color:#f92672">(</span>Bitmap bitmap<span style="color:#f92672">,</span> <span style="color:#66d9ef">float</span> left<span style="color:#f92672">,</span> <span style="color:#66d9ef">float</span> top<span style="color:#f92672">,</span> Paint paint<span style="color:#f92672">)</span>
<span style="color:#75715e">//第三类绘制图片的部分区域
</span><span style="color:#75715e">//src指定绘制图片的区域，dst指定图片在屏幕上显示的区域
</span><span style="color:#75715e"></span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">drawBitmap</span> <span style="color:#f92672">(</span>Bitmap bitmap<span style="color:#f92672">,</span> Rect src<span style="color:#f92672">,</span> Rect dst<span style="color:#f92672">,</span> Paint paint<span style="color:#f92672">)</span>
<span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">drawBitmap</span> <span style="color:#f92672">(</span>Bitmap bitmap<span style="color:#f92672">,</span> Rect src<span style="color:#f92672">,</span> RectF dst<span style="color:#f92672">,</span> Paint paint<span style="color:#f92672">)</span>
</code></pre></div><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java">Bitmap bitmap <span style="color:#f92672">=</span> BitmapFactory<span style="color:#f92672">.</span><span style="color:#a6e22e">decodeResource</span><span style="color:#f92672">(</span>getResources<span style="color:#f92672">(),</span> R<span style="color:#f92672">.</span><span style="color:#a6e22e">drawable</span><span style="color:#f92672">.</span><span style="color:#a6e22e">cat</span><span style="color:#f92672">);</span>
canvas<span style="color:#f92672">.</span><span style="color:#a6e22e">drawBitmap</span><span style="color:#f92672">(</span>bitmap<span style="color:#f92672">,</span> <span style="color:#66d9ef">new</span> Matrix<span style="color:#f92672">(),</span> mPaint<span style="color:#f92672">);</span>
</code></pre></div><p><img src="/assets/images/canvas-bitmap1.jpeg" alt=""></p>
<p>绘制部分区域</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java">Bitmap bitmap <span style="color:#f92672">=</span> BitmapFactory<span style="color:#f92672">.</span><span style="color:#a6e22e">decodeResource</span><span style="color:#f92672">(</span>getResources<span style="color:#f92672">(),</span> R<span style="color:#f92672">.</span><span style="color:#a6e22e">drawable</span><span style="color:#f92672">.</span><span style="color:#a6e22e">cat</span><span style="color:#f92672">);</span>
<span style="color:#75715e">// 指定图片绘制区域
</span><span style="color:#75715e"></span>Rect src <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> Rect<span style="color:#f92672">(</span>0<span style="color:#f92672">,</span>0<span style="color:#f92672">,</span>bitmap<span style="color:#f92672">.</span><span style="color:#a6e22e">getWidth</span><span style="color:#f92672">()/</span>2<span style="color:#f92672">,</span>bitmap<span style="color:#f92672">.</span><span style="color:#a6e22e">getHeight</span><span style="color:#f92672">()/</span>2<span style="color:#f92672">);</span>
<span style="color:#75715e">// 指定图片在屏幕上显示的区域
</span><span style="color:#75715e"></span>Rect dst <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> Rect<span style="color:#f92672">(</span>0<span style="color:#f92672">,</span>0<span style="color:#f92672">,</span>bitmap<span style="color:#f92672">.</span><span style="color:#a6e22e">getWidth</span><span style="color:#f92672">(),</span>bitmap<span style="color:#f92672">.</span><span style="color:#a6e22e">getHeight</span><span style="color:#f92672">());</span>
canvas<span style="color:#f92672">.</span><span style="color:#a6e22e">drawBitmap</span><span style="color:#f92672">(</span>bitmap<span style="color:#f92672">,</span> src<span style="color:#f92672">,</span>dst<span style="color:#f92672">,</span> mPaint<span style="color:#f92672">);</span>
</code></pre></div><p><img src="/assets/images/canvas-bitmap2.jpeg" alt=""></p>
<h3 id="绘制文字">绘制文字</h3>
<p>canvas提供如下绘制文字的方法</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#75715e">// 第一类 指定文本基线位置(基线x默认在字符串左侧，基线y默认在字符串下方)。
</span><span style="color:#75715e"></span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">drawText</span> <span style="color:#f92672">(</span>String text<span style="color:#f92672">,</span> <span style="color:#66d9ef">float</span> x<span style="color:#f92672">,</span> <span style="color:#66d9ef">float</span> y<span style="color:#f92672">,</span> Paint paint<span style="color:#f92672">)</span>
<span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">drawText</span> <span style="color:#f92672">(</span>String text<span style="color:#f92672">,</span> <span style="color:#66d9ef">int</span> start<span style="color:#f92672">,</span> <span style="color:#66d9ef">int</span> end<span style="color:#f92672">,</span> <span style="color:#66d9ef">float</span> x<span style="color:#f92672">,</span> <span style="color:#66d9ef">float</span> y<span style="color:#f92672">,</span> Paint paint<span style="color:#f92672">)</span>
<span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">drawText</span> <span style="color:#f92672">(</span>CharSequence text<span style="color:#f92672">,</span> <span style="color:#66d9ef">int</span> start<span style="color:#f92672">,</span> <span style="color:#66d9ef">int</span> end<span style="color:#f92672">,</span> <span style="color:#66d9ef">float</span> x<span style="color:#f92672">,</span> <span style="color:#66d9ef">float</span> y<span style="color:#f92672">,</span> Paint paint<span style="color:#f92672">)</span>
<span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">drawText</span> <span style="color:#f92672">(</span><span style="color:#66d9ef">char</span><span style="color:#f92672">[]</span> text<span style="color:#f92672">,</span> <span style="color:#66d9ef">int</span> index<span style="color:#f92672">,</span> <span style="color:#66d9ef">int</span> count<span style="color:#f92672">,</span> <span style="color:#66d9ef">float</span> x<span style="color:#f92672">,</span> <span style="color:#66d9ef">float</span> y<span style="color:#f92672">,</span> Paint paint<span style="color:#f92672">)</span>
<span style="color:#75715e">// 第二类可以分别指定每个文字的位置。
</span><span style="color:#75715e"></span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">drawPosText</span> <span style="color:#f92672">(</span>String text<span style="color:#f92672">,</span> <span style="color:#66d9ef">float</span><span style="color:#f92672">[]</span> pos<span style="color:#f92672">,</span> Paint paint<span style="color:#f92672">)</span>
<span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">drawPosText</span> <span style="color:#f92672">(</span><span style="color:#66d9ef">char</span><span style="color:#f92672">[]</span> text<span style="color:#f92672">,</span> <span style="color:#66d9ef">int</span> index<span style="color:#f92672">,</span> <span style="color:#66d9ef">int</span> count<span style="color:#f92672">,</span> <span style="color:#66d9ef">float</span><span style="color:#f92672">[]</span> pos<span style="color:#f92672">,</span> Paint paint<span style="color:#f92672">)</span>
<span style="color:#75715e">// 第三类指定一个路径，根据路径绘制文字。
</span><span style="color:#75715e"></span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">drawTextOnPath</span> <span style="color:#f92672">(</span>String text<span style="color:#f92672">,</span> Path path<span style="color:#f92672">,</span> <span style="color:#66d9ef">float</span> hOffset<span style="color:#f92672">,</span> <span style="color:#66d9ef">float</span> vOffset<span style="color:#f92672">,</span> Paint paint<span style="color:#f92672">)</span>
<span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">drawTextOnPath</span> <span style="color:#f92672">(</span><span style="color:#66d9ef">char</span><span style="color:#f92672">[]</span> text<span style="color:#f92672">,</span> <span style="color:#66d9ef">int</span> index<span style="color:#f92672">,</span> <span style="color:#66d9ef">int</span> count<span style="color:#f92672">,</span> Path path<span style="color:#f92672">,</span> <span style="color:#66d9ef">float</span> hOffset<span style="color:#f92672">,</span> <span style="color:#66d9ef">float</span> vOffset<span style="color:#f92672">,</span> Paint paint<span style="color:#f92672">)</span>
</code></pre></div><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java">String str <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;ABCDEFGHIJK&#34;</span><span style="color:#f92672">;</span>
mPaint<span style="color:#f92672">.</span><span style="color:#a6e22e">setTextSize</span><span style="color:#f92672">(</span>50<span style="color:#f92672">);</span>              <span style="color:#75715e">// 设置字体大小
</span><span style="color:#75715e"></span>canvas<span style="color:#f92672">.</span><span style="color:#a6e22e">drawText</span><span style="color:#f92672">(</span>str<span style="color:#f92672">,</span>2<span style="color:#f92672">,</span>5<span style="color:#f92672">,</span>200<span style="color:#f92672">,</span>500<span style="color:#f92672">,</span>mPaint<span style="color:#f92672">);</span>
</code></pre></div><p><img src="/assets/images/canvas-text.jpeg" alt=""></p>
<p>为每个字符指定位置</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java">String str <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;ABCDEF&#34;</span><span style="color:#f92672">;</span>
mPaint<span style="color:#f92672">.</span><span style="color:#a6e22e">setTextSize</span><span style="color:#f92672">(</span>50<span style="color:#f92672">);</span>              <span style="color:#75715e">// 设置字体大小
</span><span style="color:#75715e"></span>canvas<span style="color:#f92672">.</span><span style="color:#a6e22e">drawPosText</span><span style="color:#f92672">(</span>str<span style="color:#f92672">,</span> <span style="color:#66d9ef">new</span> <span style="color:#66d9ef">float</span><span style="color:#f92672">[]</span> <span style="color:#f92672">{</span>
    100<span style="color:#f92672">,</span> 100<span style="color:#f92672">,</span>    <span style="color:#75715e">// 第一个字符位置
</span><span style="color:#75715e"></span>    200<span style="color:#f92672">,</span> 200<span style="color:#f92672">,</span>    <span style="color:#75715e">// 第二个字符位置
</span><span style="color:#75715e"></span>    300<span style="color:#f92672">,</span> 300<span style="color:#f92672">,</span>    <span style="color:#75715e">// ...
</span><span style="color:#75715e"></span>    400<span style="color:#f92672">,</span> 400<span style="color:#f92672">,</span> 
    500<span style="color:#f92672">,</span> 500<span style="color:#f92672">,</span>
    600<span style="color:#f92672">,</span> 600
<span style="color:#f92672">},</span> mPaint<span style="color:#f92672">);</span>
</code></pre></div><p><img src="/assets/images/canvas-text2.jpeg" alt=""></p>
<h3 id="参考">参考</h3>
<ul>
<li><a href="https://github.com/GcsSloop/AndroidNote">AndroidNote</a></li>
<li><a href="http://chiuki.github.io/android-shaders-filters/">Fun with Android Shaders and Filters</a></li>
</ul>
                    
                    <HR width="100%" id="EOF">
                    <p style="color:#777;">Last modified on 2015-12-22</p>
                    
                </div>
            </div>
            
            
            <nav class="post-pagination">

                
                <a class="newer-posts" href="https://malinkang.cn/posts/class-file-format/">
                    Next<br>Class文件结构
                </a>
                
                
                
                <a class="older-posts" href="https://malinkang.cn/posts/android-decompile/">
                    Previous<br>android反编译
                </a>
                
            </nav>
            <div class="post-comment-wrapper">
                


<div id="gitalk-container"></div>





            </div>
        </div>
    </div>
</div>

            </div><div id="single-column-footer">
Hugo Theme <a href="https://github.com/amazingrise/hugo-theme-diary">Diary</a> by <a href="https://amazingrise.net">Rise</a>
<br>
Ported from <a href="https://mak1t0.cc/" target="_blank" rel="noreferrer noopener">Makito</a>'s <a href="https://github.com/SumiMakito/hexo-theme-journal/" target="_blank" rel="noreferrer noopener">Journal.</a> <br>
<br>

&copy;
	
	This is a customized copyright.
	</div>
    	</div>
    <script src="https://malinkang.cn//js/journal.js"></script>
    </body>
</html>
